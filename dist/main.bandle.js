/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./public/common/categoriesList.js":
/*!*****************************************!*\
  !*** ./public/common/categoriesList.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst categoriesList = [\r\n  'Маркетинг',\r\n  'Личный опыт',\r\n  'Вопросы',\r\n  'SaberDevs',\r\n  'Сервисы',\r\n  'Будущее',\r\n  'Финансы',\r\n  'Дизайн',\r\n  'Соцсети',\r\n  'Техника',\r\n  'Карьера',\r\n  'Медиа',\r\n  'Истории',\r\n  'Торговля',\r\n  'SEO',\r\n  'Офлайн',\r\n  'Видео',\r\n  'Офис',\r\n  'Офтоп',\r\n  'Транспорт',\r\n  'Право',\r\n  'Трибуна',\r\n  'Еда',\r\n  'Конкурсы',\r\n  'Приёмная',\r\n  'Миграция',\r\n];\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (categoriesList);\r\n\n\n//# sourceURL=webpack://saber_project/./public/common/categoriesList.js?");

/***/ }),

/***/ "./public/common/regexp.js":
/*!*********************************!*\
  !*** ./public/common/regexp.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"login\": () => (/* binding */ login),\n/* harmony export */   \"password\": () => (/* binding */ password),\n/* harmony export */   \"firstName\": () => (/* binding */ firstName),\n/* harmony export */   \"lastName\": () => (/* binding */ lastName),\n/* harmony export */   \"cirillic\": () => (/* binding */ cirillic),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Только буквенные латинские символы и _ числом от 4 до 20\r\nconst login = /^[a-zA-Z][a-zA-Z0-9_]{4,20}$/;\r\n\r\n// Любые символы числом от 8 до 256\r\nconst password = /^\\S{8,40}$/;\r\n// '^[A-Za-z0-9.,\\\\/#!$%\\\\^&\\\\*;:{}=\\\\-_`~()]{8,40}$';\r\n// '^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z])(?=(.*[a-zA-Z]){4}).{8,256}$';\r\n\r\n// Имена не короче 2-х букв.\r\nconst firstName = /^[a-zA-Zа-яА-Я]{2,}$/;\r\n// Тестировалось на:\r\n/*\r\nДжон\r\nГектор\r\nМатиас\r\nМартин\r\nАй\r\nЧао\r\nЭлжбета\r\nSalah\r\n*/\r\n\r\n// Поддерживает двойные фамилии, апострофы, дефисы.\r\nconst lastName =\r\n/^[a-zA-Zа-яА-Я]{1,}'?-?[a-zA-Zа-яА-Я]{1,}(\\s[a-zA-Zа-яА-Я]{1,})?$/;\r\n// Тестировалось на:\r\n/*\r\nСмит\r\nД'Ларги\r\nДоу-Смит\r\nд'Аррас\r\nЛютер Кинг\r\nDeniels\r\nCho-Go\r\nad-Din\r\nDi Angelo\r\nLa Malfa\r\n*/\r\n\r\n// Аналог [а-яёА-ЯЁ]\r\nconst cirillic = /[\\u0401\\u0451\\u0410-\\u044f]/;\r\n\r\nconst regexp = {\r\n  login,\r\n  password,\r\n  firstName,\r\n  lastName,\r\n  cirillic,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (regexp);\r\n\n\n//# sourceURL=webpack://saber_project/./public/common/regexp.js?");

/***/ }),

/***/ "./public/common/utils.js":
/*!********************************!*\
  !*** ./public/common/utils.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getRusDateTime\": () => (/* binding */ getRusDateTime),\n/* harmony export */   \"translateServerDateToMS\": () => (/* binding */ translateServerDateToMS),\n/* harmony export */   \"recoverBlobWithUrl\": () => (/* binding */ recoverBlobWithUrl),\n/* harmony export */   \"appendApiImg\": () => (/* binding */ appendApiImg),\n/* harmony export */   \"getFileBrowserStorageUrl\": () => (/* binding */ getFileBrowserStorageUrl),\n/* harmony export */   \"redirect\": () => (/* binding */ redirect),\n/* harmony export */   \"htmlToString\": () => (/* binding */ htmlToString),\n/* harmony export */   \"genRanHex\": () => (/* binding */ genRanHex),\n/* harmony export */   \"genRanHexColor\": () => (/* binding */ genRanHexColor),\n/* harmony export */   \"createInput\": () => (/* binding */ createInput),\n/* harmony export */   \"createInputRow\": () => (/* binding */ createInputRow),\n/* harmony export */   \"createLabel\": () => (/* binding */ createLabel),\n/* harmony export */   \"getPageHeight\": () => (/* binding */ getPageHeight),\n/* harmony export */   \"getUserWindowWidth\": () => (/* binding */ getUserWindowWidth),\n/* harmony export */   \"getUserWindowHeight\": () => (/* binding */ getUserWindowHeight),\n/* harmony export */   \"getCurrentPageYPos\": () => (/* binding */ getCurrentPageYPos),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n// ///////////////////////////////// //\r\n//\r\n//                utils\r\n//\r\n// ///////////////////////////////// //\r\n\r\n\r\n\r\n/**\r\n * @param {number} time\r\n * @return {string}\r\n */\r\nfunction getRusDateTime(time) {\r\n  const options = {\r\n    year: 'numeric',\r\n    month: 'numeric',\r\n    day: 'numeric',\r\n    hour: 'numeric',\r\n    minute: 'numeric',\r\n    timezone: 'Russia/Moscow',\r\n  };\r\n\r\n  return new Date(time).toLocaleString('ru', options);\r\n}\r\n\r\n/**\r\n * @param {string} datetime\r\n * @return {number}\r\n */\r\nfunction translateServerDateToMS(datetime) {\r\n  // привожу 2021/11/23 13:13 к ISO 8601\r\n  // https://ru.wikipedia.org/wiki/ISO_8601\r\n  return Date.parse(\r\n      datetime.replaceAll('/', '-').replace(' ', 'T') + ':00',\r\n  );\r\n}\r\n\r\n/**\r\n * @param {BlobURL} url\r\n * @return {Promise<Blob>}\r\n */\r\nfunction recoverBlobWithUrl(url) {\r\n  return new Promise((resolve, reject) => {\r\n    if (typeof url !== 'string') {\r\n      reject(new Error('Передай мне строку, а не url: ' + url));\r\n    }\r\n    if (url === '') {\r\n      reject(new Error('Картинку не отправляем'));\r\n    } else {\r\n      resolve();\r\n    }\r\n  })\r\n      .then(() => fetch(url))\r\n      .then((res) => res.blob());\r\n}\r\n/**\r\n * @param {object} obj\r\n */\r\nfunction appendApiImg(obj) {\r\n  if ('avatarUrl' in obj && !obj.avatarUrl.startsWith(_modules_ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].APIurl)) {\r\n    obj.avatarUrl = _modules_ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].APIurl + '/img/' + obj.avatarUrl;\r\n  }\r\n  if ('previewUrl' in obj && !obj.previewUrl.startsWith(_modules_ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].APIurl)) {\r\n    obj.previewUrl = _modules_ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].APIurl + '/img/' + obj.previewUrl;\r\n  }\r\n};\r\n\r\n/**\r\n * @param {string} file\r\n * @return {Promise}\r\n */\r\nfunction getFileBrowserStorageUrl(file) {\r\n  return new Promise((r) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => r(e.target.result);\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\n/**\r\n * Вызов Router.open(to) через имитацию клика\r\n * Обязательно наличие элемента #root в DOM\r\n * @param {string} to\r\n */\r\nfunction redirect(to) {\r\n  const clickSimulator = document.createElement('a');\r\n  const root = document.querySelector('#root');\r\n\r\n  clickSimulator.id = 'clickSimulator';\r\n  clickSimulator.href = to;\r\n\r\n  root.appendChild(clickSimulator);\r\n  clickSimulator.click();\r\n  root.removeChild(clickSimulator);\r\n}\r\n\r\n/**\r\n * Возврат содежимого в виде строки\r\n * @param {HTMLElement} el\r\n * @return {string}\r\n */\r\nfunction htmlToString(el) {\r\n  const wrapper = document.createElement('div');\r\n  wrapper.appendChild(el);\r\n  return wrapper.innerHTML;\r\n}\r\n\r\n/**\r\n * генерирует рандомный цвет\r\n * @param {number} size\r\n * @return {string}\r\n */\r\nfunction genRanHex(size = 6) {\r\n  return [...Array(size)].map(\r\n      () => Math.floor(Math.random() * 16).toString(16),\r\n  ).join('');\r\n}\r\n\r\n/**\r\n * генерирует рандомный цвет\r\n * @param {number} size\r\n * @return {string}\r\n */\r\nfunction genRanHexColor() {\r\n  // https://stackoverflow.com/questions/12043187/how-to-check-if-hex-color-is-too-black\r\n  // функция из PHP\r\n  // цвет считается ярким, если яркость больше 155, тусклым, если < 40\r\n  while (true) {\r\n    const red = Math.floor(Math.random() * 255);\r\n    const green = Math.floor(Math.random() * 255);\r\n    const blue = Math.floor(Math.random() * 255);\r\n    const brightness = ((red * 299) + (green * 587) + (blue * 114)) / 1000;\r\n    // Самый светлый черный в проекте #313030.\r\n    // пусть цвета тусклее #404040 (40h = 64) не пропускаются\r\n    if (brightness < 155 && brightness > 40 &&\r\n          (red > 64 && green > 40 && blue > 64)) {\r\n      return '#' + red.toString(16) + green.toString(16) + blue.toString(16);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Создает импут-поле в одну строку\r\n * @param {string} type\r\n * @param {string} placeholder\r\n * @param {string} name\r\n * @param {string} title\r\n * @param {boolean} [required = false]\r\n * @param {string} pattern\r\n * @return {HTMLInputElement}\r\n */\r\nfunction createInput(\r\n    type,\r\n    placeholder,\r\n    name,\r\n    title = null,\r\n    required = false,\r\n    pattern = null,\r\n) {\r\n  const input = document.createElement('input');\r\n  input.type = type;\r\n  input.name = name;\r\n  input.id = 'input-' + name;\r\n  input.placeholder = placeholder;\r\n  input.required = required;\r\n  if (title != null) input.title = title;\r\n  if (pattern != null) input.pattern = pattern;\r\n\r\n  return input;\r\n}\r\n\r\n/**\r\n * Создает красивую строку с импутом для формы\r\n * @param {HTMLInputElement} input\r\n * @return {HTMLDivElement}\r\n */\r\nfunction createInputRow(input) {\r\n  const div = document.createElement('div');\r\n  div.className = 'form-row';\r\n\r\n  const tooltip = document.createElement('div');\r\n  tooltip.className = 'tooltip';\r\n  tooltip.title = input.title;\r\n  const tooltipSign = document.createElement('div');\r\n  tooltipSign.className = 'tooltip-sign';\r\n  tooltipSign.textContent = '?';\r\n\r\n  if (input.title === 'null') {\r\n    tooltip.style.visibility = 'hidden';\r\n  }\r\n\r\n  div.appendChild(input);\r\n  tooltip.appendChild(tooltipSign);\r\n  div.appendChild(tooltip);\r\n\r\n  return div;\r\n}\r\n\r\n/**\r\n * Создает html-label в одну строку\r\n * @param {string} htmlFor\r\n * @param {string} text\r\n * @return {HTMLLabelElement}\r\n */\r\nfunction createLabel(htmlFor, text) {\r\n  const label = document.createElement('label');\r\n  label.textContent = text;\r\n  label.htmlFor = htmlFor;\r\n  return label;\r\n}\r\n\r\n/**\r\n * Возвращает доступную для отображения высоту окна с учетом скрола\r\n * @return {number}\r\n */\r\nfunction getPageHeight() {\r\n  return Math.max(\r\n      document.body.scrollHeight, document.documentElement.scrollHeight,\r\n      document.body.offsetHeight, document.documentElement.offsetHeight,\r\n      document.body.clientHeight, document.documentElement.clientHeight,\r\n  );\r\n}\r\n\r\n/**\r\n * Возвращает ширину окна браузера пользователя\r\n * @return {number}\r\n */\r\nfunction getUserWindowWidth() {\r\n  return document.documentElement.clientWidth;\r\n}\r\n\r\n/**\r\n * Возвращает высоту окна браузера пользователя\r\n * @return {number}\r\n */\r\nfunction getUserWindowHeight() {\r\n  return document.documentElement.clientHeight;\r\n}\r\n\r\n/**\r\n * Возвращает текущую позицию скрола\r\n * @return {number}\r\n */\r\nfunction getCurrentPageYPos() {\r\n  return window.pageYOffset;\r\n}\r\n\r\nconst Utils = {\r\n  createInput,\r\n  createLabel,\r\n  createInputRow,\r\n  getPageHeight,\r\n  getUserWindowWidth,\r\n  getUserWindowHeight,\r\n  getCurrentPageYPos,\r\n  redirect,\r\n  htmlToString,\r\n  genRanHexColor,\r\n  getFileBrowserStorageUrl,\r\n  recoverBlobWithUrl,\r\n  appendApiImg,\r\n  getRusDateTime,\r\n  translateServerDateToMS,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Utils);\r\n\n\n//# sourceURL=webpack://saber_project/./public/common/utils.js?");

/***/ }),

/***/ "./public/components/_basic/baseComponent.js":
/*!***************************************************!*\
  !*** ./public/components/_basic/baseComponent.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BaseComponent)\n/* harmony export */ });\n/* harmony import */ var _baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n/**\r\n * [Интерфейс] ViewModel для View\r\n * @class BaseComponent\r\n */\r\nclass BaseComponent {\r\n  /**\r\n   * Конструктор с логом\r\n   */\r\n  constructor() {\r\n    this.root = document.createElement('div');\r\n    this.view = new _baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\n    this.unsubscribes = [];\r\n\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.viewsDebug) {\r\n      console.log(`[VIEW ${this.constructor.name}]\\tinit`);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.viewsDebug) {\r\n      console.log(`[VIEW ${this.constructor.name}]\\trender`);\r\n    }\r\n    return document.createElement('div');\r\n  }\r\n\r\n  /**\r\n   * Очистка памяти и отписка от связанных событий\r\n   */\r\n  destroy() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.viewsDebug) {\r\n      console.log(`[VIEW  ${this.constructor.name}]\\tdestroy`);\r\n    }\r\n    this.view = null;\r\n    this.unsubscribes.forEach((unsubscribe) => {\r\n      if (typeof unsubscribe === 'function') {\r\n        unsubscribe();\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/_basic/baseComponent.js?");

/***/ }),

/***/ "./public/components/_basic/baseComponentView.js":
/*!*******************************************************!*\
  !*** ./public/components/_basic/baseComponentView.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BaseComponentView)\n/* harmony export */ });\n/**\r\n * @class BaseComponentView\r\n */\r\nclass BaseComponentView {\r\n  /**\r\n    * @return {HTMLElement}\r\n    */\r\n  render() {\r\n    return document.createElement('div');\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/_basic/baseComponentView.js?");

/***/ }),

/***/ "./public/components/categoryChoiceBar/categoryChoiceBar.js":
/*!******************************************************************!*\
  !*** ./public/components/categoryChoiceBar/categoryChoiceBar.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CategoryChoiceBar)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _categoryChoiceBarView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categoryChoiceBarView.js */ \"./public/components/categoryChoiceBar/categoryChoiceBarView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _common_categoriesList_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/categoriesList.js */ \"./public/common/categoriesList.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * ViewModel-компонент соответсвующего View\r\n * @class CatergoryChooseBar\r\n */\r\nclass CategoryChoiceBar extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент заголовка для страницы с категориями\r\n   * @param {Action<string>} getCurrentSelection\r\n   * @param {Action<string>} setSelection\r\n   * @param {Action} clearSelection\r\n   * @param {Type} SELECT_CATEGORY_TYPE\r\n   */\r\n  constructor(getCurrentSelection, setSelection,\r\n      clearSelection, SELECT_CATEGORY_TYPE,\r\n  ) {\r\n    super();\r\n    this.view = new _categoryChoiceBarView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n    this.setSelection = setSelection;\r\n    this.clearSelection = clearSelection;\r\n    this.getCurrentSelection = getCurrentSelection;\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    this.unsubscribes.push(\r\n        // Выделить выбранную категорию\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(SELECT_CATEGORY_TYPE, (category) => {\r\n          this.markSelectedCategory(category);\r\n        }),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render(_common_categoriesList_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\r\n    const categoriesBox = this.root.querySelector('div.tags');\r\n\r\n    this.root.querySelectorAll('div.tags__tag-content').forEach((category) => {\r\n      category.addEventListener('click', ({target}) => {\r\n        const choosenCategory = this.getCurrentSelection();\r\n        if (target.innerHTML === choosenCategory) {\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(this.clearSelection());\r\n        } else {\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(this.setSelection(target.innerHTML));\r\n        }\r\n      });\r\n      if (category.textContent.trim() ===\r\n          this.getCurrentSelection()) {\r\n        category.classList.add('categories__choosen');\r\n      }\r\n    });\r\n\r\n    // Выводятся нужные теги при вводе в поисковую строку (поиск)\r\n    const showMatch = (elem, pos, len) => elem.slice(0, pos) +\r\n        '<span class=\"categories__mark\">' + elem.slice(pos, pos + len) +\r\n        '</span>' + elem.slice(pos + len);\r\n\r\n    this.root.querySelector('input.categories__search-input')\r\n        .oninput = (e) => {\r\n          const value = e.target.value;\r\n          if (value != '') {\r\n            categoriesBox.childNodes.forEach((content) => {\r\n              const elem = content.lastChild;\r\n              const pos = elem.textContent.toLocaleLowerCase().indexOf(value);\r\n              if (pos == -1) {\r\n                elem.parentElement.style.display = 'none';\r\n                elem.innerHTML = elem.textContent;\r\n              } else {\r\n                elem.parentElement.style.display = '';\r\n                elem.innerHTML = showMatch(elem.textContent, pos, value.length);\r\n              }\r\n            });\r\n          } else {\r\n            categoriesBox.childNodes.forEach((content) => {\r\n              const elem = content.lastChild;\r\n              elem.parentElement.style.display = '';\r\n              elem.innerHTML = elem.textContent;\r\n            });\r\n          }\r\n        };\r\n\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * пройтись по всем сущностям и выделить выбранный\r\n   * @param {string} currentCategory\r\n   */\r\n  markSelectedCategory(currentCategory) {\r\n    const categoriesBox = this.root.querySelector('div.tags');\r\n    if (!categoriesBox) {\r\n      console.warn('{CategoryChoiceBar} component hasn\\'t been rendered yet');\r\n      return;\r\n    }\r\n    categoriesBox.childNodes.forEach((categoryDiv) => {\r\n      categoryDiv.classList.remove('categories__choosen');\r\n      if (categoryDiv.innerText === currentCategory) {\r\n        categoryDiv.classList.add('categories__choosen');\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/categoryChoiceBar/categoryChoiceBar.js?");

/***/ }),

/***/ "./public/components/categoryChoiceBar/categoryChoiceBar.pug.js":
/*!**********************************************************************!*\
  !*** ./public/components/categoryChoiceBar/categoryChoiceBar.pug.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ categoryChoiceBarComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_has_own_property=Object.prototype.hasOwnProperty;\nvar pug_match_html=/[\"&<>]/;\nfunction pug_style(r){if(!r)return\"\";if(\"object\"==typeof r){var t=\"\";for(var e in r)pug_has_own_property.call(r,e)&&(t=t+e+\":\"+r[e]+\";\");return t}return r+\"\"}function x(){};\n\nfunction \n            categoryChoiceBarComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (Array, categories) {\n      pug_mixins[\"tagMixin\"] = pug_interp = function(content, color, cross=false){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\npug_html = pug_html + \"\\u003Cdiv\" + (\" class=\\\"tags__tag-content\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E \";\nif ((cross)) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag tags_with-cross\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv\" + (\" class=\\\"tags__tag__del-btn cross-icon cross-icon_white\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\";\n};\npug_html = pug_html + \"\\u003Cdiv class=\\\"plate\\\"\\u003E\\u003Cdiv class=\\\"categories__search-block\\\"\\u003E\\u003Cdiv class=\\\"categories__search\\\"\\u003E\\u003Cinput class=\\\"categories__search-input\\\" type=\\\"text\\\" id=\\\"categories-search\\\" placeholder=\\\"фильтр\\\"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"tags\\\"\\u003E\";\nif (Array.isArray(categories)) {\n// iterate categories\n;(function(){\n  var $$obj = categories;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var category = $$obj[pug_index0];\npug_mixins[\"tagMixin\"](category.content, category.color);\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var category = $$obj[pug_index0];\npug_mixins[\"tagMixin\"](category.content, category.color);\n    }\n  }\n}).call(this);\n\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"Array\" in locals_for_with ?\n        locals_for_with.Array :\n        typeof Array !== 'undefined' ? Array : undefined, \"categories\" in locals_for_with ?\n        locals_for_with.categories :\n        typeof categories !== 'undefined' ? categories : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/categoryChoiceBar/categoryChoiceBar.pug.js?");

/***/ }),

/***/ "./public/components/categoryChoiceBar/categoryChoiceBarView.js":
/*!**********************************************************************!*\
  !*** ./public/components/categoryChoiceBar/categoryChoiceBarView.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CategoryChoiceBarView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _categoryChoiceBar_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categoryChoiceBar.pug.js */ \"./public/components/categoryChoiceBar/categoryChoiceBar.pug.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @class CatergoryChooseBarView\r\n */\r\nclass CategoryChoiceBarView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {Array<string>} categories\r\n   * @return {HTMLElement}\r\n   */\r\n  render(categories) {\r\n    const barDiv = document.createElement('div');\r\n    barDiv.innerHTML = (0,_categoryChoiceBar_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n      categories: categories.map((c)=>({content: c, color: (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_2__.genRanHexColor)()})),\r\n    });\r\n    return barDiv.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/categoryChoiceBar/categoryChoiceBarView.js?");

/***/ }),

/***/ "./public/components/editor/articleEditor.pug.js":
/*!*******************************************************!*\
  !*** ./public/components/editor/articleEditor.pug.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ articleEditorComponent)\n/* harmony export */ });\nfunction x(){};\n\nfunction \n            articleEditorComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (tags) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"article-create\\\"\\u003E\\u003Cdiv class=\\\"article-create__title\\\"\\u003EСоздание статьи\\u003C\\u002Fdiv\\u003E\\u003Cform class=\\\"article-create__form\\\"\\u003E\\u003Cdiv class=\\\"article-create__category_selector\\\"\\u003E\\u003Cdiv class=\\\"article-create__row\\\"\\u003E\\u003Cdiv class=\\\"article-create__label\\\"\\u003EВыберете категорию\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__right\\\"\\u003E\\u003Cbutton class=\\\"btn_color-elementary article-create__del-btn\\\"\\u003EУдалить\\u003C\\u002Fbutton\\u003E\\u003Cbutton class=\\\"btn_color-elementary article-create__clear-btn\\\"\\u003EОчистить\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__rows\\\"\\u003E\\u003Cdiv class=\\\"article-create__row\\\"\\u003E\\u003Cdiv class=\\\"article-create__label\\\"\\u003EЗаголовок\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__field\\\"\\u003E\\u003Cinput class=\\\"article-create__input\\\" type=\\\"text\\\" name=\\\"title\\\"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__row\\\"\\u003E\\u003Cdiv class=\\\"article-create__label\\\"\\u003EТекст статьи\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__field\\\"\\u003E\\u003Ctextarea class=\\\"article-create__input article-create__text\\\" name=\\\"text\\\"\\u003E\\u003C\\u002Ftextarea\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__row\\\"\\u003E\\u003Cdiv class=\\\"article-create__label\\\"\\u003EТеги\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__tags-actions\\\"\\u003E\\u003Cinput class=\\\"article-create__input-tag\\\" type=\\\"text\\\" name=\\\"tag\\\" maxlength=\\\"20\\\"\\u002F\\u003E\\u003Cbutton class=\\\"article-create__add-tag\\\"\\u003E+\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__tags\\\"\\u003E\" + (null == (pug_interp = tags) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__right\\\"\\u003E\\u003Cinput class=\\\"btn_color-elementary\\\" type=\\\"file\\\" name=\\\"photo\\\" value=\\\"Заставка\\\"\\u002F\\u003E\\u003Cinput class=\\\"btn_color-elementary\\\" type=\\\"button\\\" name=\\\"clear-photo\\\" value=\\\"Удалить картинку\\\"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__preview\\\"\\u003E\\u003Cdiv class=\\\"article-create__preview__title\\\"\\u003EПредпросмотр:\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__preview__content\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__tags-actions\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-create__right\\\"\\u003E\\u003Cinput class=\\\"btn_color-elementary\\\" type=\\\"submit\\\" name=\\\"btn-submit\\\" value=\\\"Создать\\\"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fform\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"tags\" in locals_for_with ?\n        locals_for_with.tags :\n        typeof tags !== 'undefined' ? tags : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/editor/articleEditor.pug.js?");

/***/ }),

/***/ "./public/components/editor/editor.js":
/*!********************************************!*\
  !*** ./public/components/editor/editor.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Editor)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _editorView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editorView.js */ \"./public/components/editor/editorView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/actions/editorActions.js */ \"./public/flux/actions/editorActions.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n   * Проверяет состояние editor\r\n   * @return {boolean}\r\n   */\r\nfunction isUpdateFromState() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n  return typeof state.currentId === 'string' && state.currentId !== '0' ||\r\n         typeof state.currentId === 'number' && state.currentId !== 0;\r\n}\r\n\r\n/**\r\n * Компонент редактора статей\r\n * @class Editor\r\n */\r\nclass Editor extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Окошко сообщений о состоянии сервиса\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _editorView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n        () => {\r\n          const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n          return state[state.currentId]?.category || '';\r\n        },\r\n        _flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].saveCategory,\r\n        _flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].clearCategory,\r\n        _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.SAVE_CATEGORY,\r\n    );\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.CLEAR_ARTICLE, () => {\r\n          this.clear();\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.PUBLISH_ARTICLE, () => {\r\n          this.clear();\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.CREATE_ARTICLE, () => {\r\n          this.changeToCreate();\r\n          this.setContent(_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor[0]);\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.EDIT_EXISTING_ARTICLE, ({id}) => {\r\n          this.changeToUpdate();\r\n          this.setContent(_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor[id]);\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.SAVE_CATEGORY, (category) => {\r\n          this.view.changePreviewCategory(category);\r\n        }),\r\n    );\r\n  }\r\n\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render(_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization);\r\n\r\n    // Проверяем, было ли вызвано событие EDIT_EXISTING_ARTICLE\r\n    // до рендера. Если было, то в сторе есть изменения.\r\n    // Проверяем, что стор неинициализирован. такое бывает, если перешли\r\n    // в редактор по урлу. Должен быть редирект на логин\r\n    if (!_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor[_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor.currentId]) {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].createArticle());\r\n    }\r\n    const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n    this.setContent(state[state.currentId]);\r\n    if (typeof state.currentId === 'string' && state.currentId !== '0' ||\r\n        typeof state.currentId === 'number' && state.currentId !== 0) {\r\n      this.changeToUpdate();\r\n    } else {\r\n      this.changeToCreate();\r\n    }\r\n\r\n    state[state.currentId].tags.forEach((tag) =>{\r\n      this.view.appendTag(\r\n          tag,\r\n          () => _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeTag(tag)),\r\n      );\r\n    });\r\n\r\n    // //////////////////////////////////\r\n    //\r\n    //          Обработчики\r\n    //\r\n    // //////////////////////////////////\r\n\r\n    // кнопка добавления тега\r\n    const tagInput = this.root.querySelector('input.article-create__input-tag');\r\n    this.root.querySelector('.article-create__add-tag').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          const tag = tagInput.value.trim().replace(/\\s+/g, '_');\r\n          // Проверка, а есть ли уже такой тег?\r\n          const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n          if (tag === '' || state[state.currentId].tags.includes(tag)) {\r\n            return;\r\n          }\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].appendTag(tag));\r\n          this.view.appendTag(\r\n              tag,\r\n              () => _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeTag(tag)),\r\n          );\r\n          tagInput.value = '';\r\n        },\r\n    );\r\n\r\n    const textareaInput = this.root.querySelector('textarea');\r\n    const titleInput = this.root.querySelector('input[name=\"title\"]');\r\n\r\n    // Сохранение введенного пользователем текста onChange\r\n    // Этот евент не рейзится, если textValue меняется программой\r\n    const textInputChangeListener = (e) => {\r\n      const title = titleInput.value;\r\n      const text = textareaInput.value;\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].saveArticle(\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor.currentId, {title, text},\r\n      ));\r\n    };\r\n    textareaInput.addEventListener('change', textInputChangeListener);\r\n    titleInput.addEventListener('input', textInputChangeListener);\r\n\r\n    // Дублирование измененного текста на превью\r\n    textareaInput.addEventListener('input', (e) => {\r\n      this.view.changePreviewText(textareaInput.value);\r\n    });\r\n\r\n    titleInput.addEventListener('input', (e) => {\r\n      const title = titleInput.value;\r\n      this.view.changePreviewTitle(title);\r\n    });\r\n\r\n    // сброс полей статьи\r\n    this.root.querySelector('.article-create__clear-btn').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].confirm(\r\n              'Вы собираетесь очистить всё',\r\n              'Продолжив, Вы безвозвратно сотрете то, что написали',\r\n              () => {\r\n                this.clear();\r\n              });\r\n        });\r\n\r\n    // удаление статьи\r\n    this.root.querySelector('.article-create__del-btn').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].confirm(\r\n              'Точно хотите удалить?',\r\n              'Продолжив, вы удалите статью',\r\n              () => {\r\n                _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post({\r\n                  url:\r\n                    `/articles/delete?id=${_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor.currentId}`,\r\n                  body: {},\r\n                }).then(({status, response}) => {\r\n                  if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n                    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteArticle(\r\n                        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor.currentId,\r\n                    ));\r\n                    _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].informativeMsg('Успех!', 'Статья была удалена');\r\n                    redirect('/profile');\r\n                    return;\r\n                  }\r\n                  if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.invalidSession) {\r\n                    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.authorizationActions.logout());\r\n                    _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].signup(false);\r\n                    return;\r\n                  }\r\n                  // В случае ошибки\r\n                  _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].netOrServerError(status, response.msg);\r\n                });\r\n              });\r\n        },\r\n    );\r\n\r\n    // сабмит формы\r\n    this.root.querySelector('form').addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      const text = this.root.querySelector('textarea')?.value.trim();\r\n      const title= this.root.querySelector('input[name=\"title\"]')?.value.trim();\r\n      if (!text || !title || text === '' || title === '') {\r\n        console.warn('{Editor} пустые статьи - это плохо:', {text}, {title});\r\n        _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].informativeMsg(\r\n            'Ошибка', 'Заголовок и текст статьи не должны быть пустыми',\r\n        );\r\n        return;\r\n      }\r\n\r\n      const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n      const isUpdate = isUpdateFromState();\r\n\r\n      const body = {\r\n        title,\r\n        text,\r\n        category: state[state.currentId].category,\r\n        // img: 'добавляем ниже',\r\n        tags: state[state.currentId].tags,\r\n      };\r\n      if (isUpdate) {\r\n        Object.assign(body, {id: state.currentId});\r\n      }\r\n\r\n      let responseStatus = 0;\r\n      (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.recoverBlobWithUrl)(state[state.currentId].img)\r\n          .then((blob) => _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].postFile({url: '/img/upload', body: blob}))\r\n          .then(({status, response}) => new Promise((resolve, reject) => {\r\n            if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n              resolve(response.data.imgId);\r\n            } else {\r\n              responseStatus = status;\r\n              reject(new Error(response.msg));\r\n            }\r\n          }))\r\n          // Если падает Blob то надо восстановить цепочку,\r\n          // а если Ajax, то перейти в конец\r\n          .catch((err) => new Promise((resolve, reject) => {\r\n            // упал Blob, а не сеть -> продолжить без картинки\r\n            if (responseStatus === 0) {\r\n              resolve('');\r\n            } else {\r\n              reject(err);\r\n            }\r\n          }))\r\n          .then((img) => _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post({\r\n            url: `/articles/${isUpdate ? 'update' : 'create'}`,\r\n            body: {...body, img},\r\n          }))\r\n          .then(({status, response}) => new Promise((resolve, reject) => {\r\n            if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n              resolve(response.data);\r\n            } else {\r\n              responseStatus = status;\r\n              reject(new Error(response.msg));\r\n            }\r\n          }))\r\n          .then((articleId) => {\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].publishArticle(articleId));\r\n            _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].informativeMsg(\r\n                'Успех!', `Статья успешно ${isUpdate?'изменена' : 'создана'}`,\r\n            );\r\n            redirect(`/article/${isUpdate ? state.currentId : articleId}`);\r\n          })\r\n          .catch(({message}) => {\r\n            if (responseStatus === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.invalidSession) {\r\n              _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.authorizationActions.logout());\r\n              _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].signup(false);\r\n              return;\r\n            }\r\n            if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n              console.warn(message);\r\n            }\r\n            _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].netOrServerError(responseStatus, message);\r\n          });\r\n    });\r\n\r\n    // Загрузка превьюхи\r\n    this.root.querySelector('input[name=\"photo\"]').addEventListener(\r\n        'change',\r\n        (e) => {\r\n          const file = e.currentTarget.files[0];\r\n\r\n          if (!file.type.startsWith('image/')) {\r\n            _modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].warn('Ошибка', 'Выберите изображение');\r\n            return;\r\n          }\r\n          (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.getFileBrowserStorageUrl)(file).then((imgUrl) => {\r\n            this.view.changePreviewImage(imgUrl);\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].saveImg(imgUrl));\r\n          });\r\n        });\r\n\r\n    // удаление фото с превью\r\n    this.root.querySelector('input[name=\"clear-photo\"]').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          this.view.clearPreviewImage();\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].clearImg());\r\n        },\r\n    );\r\n\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    * @param {Object?} existingArticle\r\n    * @property {string} title\r\n    * @property {string} text\r\n    * @property {Array<string>?} tags\r\n    * @property {number?} time\r\n    * @property {string?} author\r\n    * @property {number?} likes\r\n    * @property {number?} comments\r\n    */\r\n  setContent({title, text, img, category}) {\r\n    if (title || text) {\r\n      console.log('{EDITOR} set content');\r\n    }\r\n    this.view.setContent(title, text);\r\n    this.view.changePreviewCategory(category);\r\n    if (!img) {\r\n      return;\r\n    }\r\n    if (img !== '') {\r\n      this.view.changePreviewImage(img);\r\n    } else {\r\n      this.view.clearPreviewImage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * сбросить value форм\r\n   */\r\n  clear() {\r\n    console.log('{EDITOR} clear');\r\n    this.setContent({\r\n      title: '',\r\n      text: '',\r\n      img: '',\r\n      category: '',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Поменять надписи на \"Создание\"\r\n   */\r\n  changeToCreate() {\r\n    const submitBtn = this.root.querySelector('input[name=\"btn-submit\"]');\r\n    if (!submitBtn) {\r\n      console.warn(\r\n          `{Editor} can\\'t use changeToCreate:\r\n          component hasn\\'t been rendered yet`,\r\n      );\r\n      return;\r\n    }\r\n    submitBtn.value = 'Создать';\r\n    this.root.querySelector('.article-create__title').textContent =\r\n      'Создание статьи';\r\n    this.root.querySelector('.article-create__del-btn').style.display = 'none';\r\n    this.view.category.style.display = 'flex';\r\n  }\r\n\r\n  /**\r\n   * Поменять надписи на \"Изменение\"\r\n   */\r\n  changeToUpdate() {\r\n    const submitBtn = this.root.querySelector('input[name=\"btn-submit\"]');\r\n    if (!submitBtn) {\r\n      console.warn(\r\n          `{Editor} can\\'t use changeToCreate:\r\n          component hasn\\'t been rendered yet`,\r\n      );\r\n      return;\r\n    }\r\n    submitBtn.value = 'Изменить';\r\n    this.root.querySelector('.article-create__title').textContent =\r\n      'Изменение статьи';\r\n    this.root.querySelector('.article-create__del-btn').style.display = 'flex';\r\n    // запрещаем менять категории при редактировании\r\n    this.view.category.style.display = 'none';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/editor/editor.js?");

/***/ }),

/***/ "./public/components/editor/editorView.js":
/*!************************************************!*\
  !*** ./public/components/editor/editorView.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditorView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _editor_articleEditor_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../editor/articleEditor.pug.js */ \"./public/components/editor/articleEditor.pug.js\");\n/* harmony import */ var _tag_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tag.pug.js */ \"./public/components/editor/tag.pug.js\");\n/* harmony import */ var _feed_card_pug_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../feed/card.pug.js */ \"./public/components/feed/card.pug.js\");\n/* harmony import */ var _categoryChoiceBar_categoryChoiceBar_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../categoryChoiceBar/categoryChoiceBar.js */ \"./public/components/categoryChoiceBar/categoryChoiceBar.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst PREVIEW_TEXT_LIMIT = 350;\r\n\r\n/**\r\n * @param {Date} d\r\n * @return {string} hh:mm dd.mm.yyyy\r\n */\r\nfunction convertDate(d = new Date()) {\r\n  const pad = (s) => (s < 10) ? '0' + s : s;\r\n  return [pad(d.getHours()), pad(d.getMinutes())].join(':') + ' ' +\r\n  [pad(d.getDate()), pad(d.getMonth()+1), d.getFullYear()].join('/');\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n * @return {string}\r\n */\r\nfunction fillCardImgStyle(url) {\r\n  return `background: -webkit-gradient(linear, left top, left bottom,` +\r\n  `from(rgba(0, 0, 0, 0.7)), to(rgba(0, 0, 0, 0.7))), url(${url});`+\r\n  `background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),` +\r\n  `url(${url});\r\n  background-size: cover;\r\n  background-repeat: no-repeat;`;\r\n}\r\n\r\n/**\r\n * @class EditorView\r\n */\r\nclass EditorView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Компонент редактора\r\n   * @param {Action<string>} getCurrentSelection\r\n   * @param {Action<string>} setSelection\r\n   * @param {Action} clearSelection\r\n   * @param {Type} SELECT_TYPE\r\n   */\r\n  constructor(getCurrentSelection, setSelection, clearSelection, SELECT_TYPE) {\r\n    super();\r\n    this.innerComponents = {\r\n      categoryChoiceBar: new _categoryChoiceBar_categoryChoiceBar_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](\r\n          getCurrentSelection, setSelection, clearSelection, SELECT_TYPE,\r\n      ),\r\n    };\r\n    this.tagBox = null;\r\n    this.previewBox = null;\r\n    this.textAreaInput = null;\r\n    this.titleInput = null;\r\n    this.category = null;\r\n  }\r\n\r\n  /**\r\n   * @param {object} author\r\n   * @return {HTMLElement}\r\n   */\r\n  render(author) {\r\n    const editor = document.createElement('div');\r\n    editor.innerHTML = (0,_editor_articleEditor_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\r\n\r\n    this.category =\r\n        editor.firstChild.querySelector('.article-create__category_selector');\r\n    this.category.querySelector('.article-create__row')\r\n        .appendChild(this.innerComponents.categoryChoiceBar.render());\r\n    // немного другие стили\r\n    editor.firstChild.querySelector('.plate')\r\n        .className = 'article-create__category_selector';\r\n\r\n    this.previewBox =\r\n        editor.firstChild.querySelector('.article-create__preview__content');\r\n    this.previewBox.innerHTML = (0,_feed_card_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      id: '-preview',\r\n      datetime: convertDate(),\r\n      category: 'категория не выбрана',\r\n      author,\r\n      comments: '',\r\n      likes: '',\r\n    })\r\n        .replace('card', 'article-create__preview__card')\r\n        .replace(/style=\".*\\n.*\\n.*\\n.*;\"/, '');\r\n\r\n    this.tagBox = this.previewBox.querySelector('.tags');\r\n    this.textAreaInput = editor.firstChild.querySelector('textarea');\r\n    this.titleInput = editor.firstChild.querySelector('input[name=\"title\"]');\r\n\r\n    return editor.firstChild;\r\n  }\r\n\r\n  /**\r\n   * Добавляет тег вниз страницы\r\n   * @param {string} tag\r\n   * @param {function} deleteAction\r\n   */\r\n  appendTag(tag, deleteAction) {\r\n    if (this.tagBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_tag_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n      content: tag,\r\n      color: (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_5__.genRanHexColor)(),\r\n      cross: true,\r\n    });\r\n    const tagDiv = wrapper.firstChild;\r\n    tagDiv.querySelector('.tags__tag__del-btn').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          deleteAction();\r\n          tagDiv.remove();\r\n        });\r\n    this.tagBox.appendChild(tagDiv);\r\n  }\r\n\r\n  /**\r\n   * Стираем все выбранные теги со страницы\r\n   */\r\n  clearTags() {\r\n    if (this.tagBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    this.tagBox.innerHTML = '';\r\n  }\r\n\r\n  /**\r\n   * @param {string} url\r\n   */\r\n  changePreviewImage(url) {\r\n    if (this.previewBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n\r\n    this.previewBox.querySelector('.article-create__preview__card')\r\n        .style.cssText = fillCardImgStyle(url);\r\n  }\r\n\r\n  /**\r\n   * сброс фотографии\r\n   */\r\n  clearPreviewImage() {\r\n    this.previewBox.querySelector('.article-create__preview__card')\r\n        .style.cssText = '';\r\n  }\r\n\r\n  /**\r\n   * @param {string} text\r\n   */\r\n  changePreviewText(text) {\r\n    if (this.previewBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    text = text.slice(0, PREVIEW_TEXT_LIMIT);\r\n    this.previewBox.querySelector('.card__description').textContent = text;\r\n  }\r\n\r\n  /**\r\n   * @param {string} text\r\n   */\r\n  changePreviewTitle(text) {\r\n    if (this.previewBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    this.previewBox.querySelector('.preview__title').textContent = text;\r\n  }\r\n\r\n  /**\r\n   * @param {string} text\r\n   */\r\n  changePreviewCategory(text) {\r\n    if (this.previewBox === null ) {\r\n      console.warn(\r\n          '{Editor} component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    if (text === '') {\r\n      this.previewBox.querySelector('.card__category').textContent =\r\n        'категория не выбрана';\r\n    } else {\r\n      this.previewBox.querySelector('.card__category').textContent = text;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {string} title\r\n   * @param {string} text\r\n   */\r\n  setContent(title, text) {\r\n    if (this.textarea === null || this.titleInput === null) {\r\n      console.warn(\r\n          '{Editor} can\\'t use setContent: component hasn\\'t been rendered yet',\r\n      );\r\n      return;\r\n    }\r\n    this.textAreaInput.value = text;\r\n    this.titleInput.value = title;\r\n    this.changePreviewText(text);\r\n    this.changePreviewTitle(title);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/editor/editorView.js?");

/***/ }),

/***/ "./public/components/editor/tag.pug.js":
/*!*********************************************!*\
  !*** ./public/components/editor/tag.pug.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ tagComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_has_own_property=Object.prototype.hasOwnProperty;\nvar pug_match_html=/[\"&<>]/;\nfunction pug_style(r){if(!r)return\"\";if(\"object\"==typeof r){var t=\"\";for(var e in r)pug_has_own_property.call(r,e)&&(t=t+e+\":\"+r[e]+\";\");return t}return r+\"\"}function x(){};\n\nfunction \n            tagComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (color, content, cross) {\n      pug_html = pug_html + \"\\u003Cdiv\" + (\" class=\\\"tags__tag-content\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E \";\nif ((cross)) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag tags_with-cross\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv\" + (\" class=\\\"tags__tag__del-btn cross-icon cross-icon_white\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"color\" in locals_for_with ?\n        locals_for_with.color :\n        typeof color !== 'undefined' ? color : undefined, \"content\" in locals_for_with ?\n        locals_for_with.content :\n        typeof content !== 'undefined' ? content : undefined, \"cross\" in locals_for_with ?\n        locals_for_with.cross :\n        typeof cross !== 'undefined' ? cross : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/editor/tag.pug.js?");

/***/ }),

/***/ "./public/components/feed/card.pug.js":
/*!********************************************!*\
  !*** ./public/components/feed/card.pug.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ cardComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_has_own_property=Object.prototype.hasOwnProperty;\nvar pug_match_html=/[\"&<>]/;\nfunction pug_style(r){if(!r)return\"\";if(\"object\"==typeof r){var t=\"\";for(var e in r)pug_has_own_property.call(r,e)&&(t=t+e+\":\"+r[e]+\";\");return t}return r+\"\"}function x(){};\n\nfunction \n            cardComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (Array, author, category, comments, datetime, id, likes, previewUrl, tags, text, title) {\n      pug_mixins[\"tagMixin\"] = pug_interp = function(content, color, cross=false){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\npug_html = pug_html + \"\\u003Cdiv\" + (\" class=\\\"tags__tag-content\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E \";\nif ((cross)) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag tags_with-cross\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv\" + (\" class=\\\"tags__tag__del-btn cross-icon cross-icon_white\\\"\"+pug_attr(\"style\", pug_style(`background-color: ${color}`), true, false)) + \"\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\";\n};\npug_html = pug_html + \"\\u003Cdiv\" + (\" class=\\\"card\\\"\"+pug_attr(\"id\", `card${id}`, true, false)+pug_attr(\"style\", pug_style(`background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0.7)), to(rgba(0, 0, 0, 0.7))), url(${previewUrl});\nbackground: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${previewUrl});\nbackground-size: cover;\nbackground-repeat: no-repeat;`), true, false)) + \"\\u003E\\u003Cdiv class=\\\"card__top\\\"\\u003E\\u003Cdiv class=\\\"card__top-left\\\"\\u003E\\u003Cdiv class=\\\"card__time-category\\\"\\u003E\\u003Cdiv class=\\\"card__time\\\"\\u003E\" + (pug_escape(null == (pug_interp = datetime) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__category\\\"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"tags\\\"\\u003E\";\nif (Array.isArray(tags)) {\n// iterate tags\n;(function(){\n  var $$obj = tags;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var tag = $$obj[pug_index0];\npug_mixins[\"tagMixin\"](tag.content, tag.color);\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var tag = $$obj[pug_index0];\npug_mixins[\"tagMixin\"](tag.content, tag.color);\n    }\n  }\n}).call(this);\n\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__author\\\"\\u003E\\u003Cimg\" + (\" class=\\\"card__author-photo\\\"\"+pug_attr(\"src\", `${author.avatarUrl || 'static/img/users/user_icon_loading.svg'}`, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"author-name\\\"\\u003E\";\nif (typeof author === 'object') {\npug_html = pug_html + \"\\u003Cdiv class=\\\"author-name__login\\\"\\u003E\" + (pug_escape(null == (pug_interp = author.login) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"author-name__username\\\"\\u003E\" + (pug_escape(null == (pug_interp = author.firstName) ? \"\" : pug_interp)) + \" \" + (pug_escape(null == (pug_interp = author.lastName) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__content\\\"\\u003E\\u003Ca class=\\\"preview__title\\\"\\u003E\" + (pug_escape(null == (pug_interp = title) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003Cdiv class=\\\"card__description\\\"\\u003E\" + (pug_escape(null == (pug_interp = text) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__bottom\\\"\\u003E\\u003Cdiv class=\\\"action-btns\\\"\\u003E\\u003Cdiv class=\\\"icon action-btns_m-right\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = likes) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"action-btns__likes-icon icon__img\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"icon\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = comments) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"action-btns__comments-icon icon__img\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"Array\" in locals_for_with ?\n        locals_for_with.Array :\n        typeof Array !== 'undefined' ? Array : undefined, \"author\" in locals_for_with ?\n        locals_for_with.author :\n        typeof author !== 'undefined' ? author : undefined, \"category\" in locals_for_with ?\n        locals_for_with.category :\n        typeof category !== 'undefined' ? category : undefined, \"comments\" in locals_for_with ?\n        locals_for_with.comments :\n        typeof comments !== 'undefined' ? comments : undefined, \"datetime\" in locals_for_with ?\n        locals_for_with.datetime :\n        typeof datetime !== 'undefined' ? datetime : undefined, \"id\" in locals_for_with ?\n        locals_for_with.id :\n        typeof id !== 'undefined' ? id : undefined, \"likes\" in locals_for_with ?\n        locals_for_with.likes :\n        typeof likes !== 'undefined' ? likes : undefined, \"previewUrl\" in locals_for_with ?\n        locals_for_with.previewUrl :\n        typeof previewUrl !== 'undefined' ? previewUrl : undefined, \"tags\" in locals_for_with ?\n        locals_for_with.tags :\n        typeof tags !== 'undefined' ? tags : undefined, \"text\" in locals_for_with ?\n        locals_for_with.text :\n        typeof text !== 'undefined' ? text : undefined, \"title\" in locals_for_with ?\n        locals_for_with.title :\n        typeof title !== 'undefined' ? title : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/feed/card.pug.js?");

/***/ }),

/***/ "./public/components/feed/composeCardStandart.js":
/*!*******************************************************!*\
  !*** ./public/components/feed/composeCardStandart.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ composeCards)\n/* harmony export */ });\n/* harmony import */ var _card_pug_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card.pug.js */ \"./public/components/feed/card.pug.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n/**\r\n * Описание сущности карточки в новостной ленте\r\n * @typedef {Object} Card\r\n * @property {string} id           - ID записи\r\n * @property {string} previewUrl   - ссылка не главную картинку\r\n * @property {string} title        - заголовок\r\n * @property {string} text         - содержание записи\r\n * @property {string} authorUrl    - ссылка на страницу автора\r\n * @property {string} authorName   - имя автора\r\n * @property {string} authorAvatar - ссылка на аватар автора\r\n * @property {string} commentsUrl  - ссылка на комменарии к записи\r\n * @property {number} comments     - число комментариев к записи\r\n * @property {number} likes        - рейтинг записи\r\n * @property {Array.string} tags   - отмеченные автором темы сообщений\r\n * @return {HTMLElement}\r\n */\r\n\r\n/**\r\n * Добавить карточки в root-HTMLElement\r\n * Нужен как универсальное правило отрисовки карточек\r\n * в качестве реакции на данные с сервера\r\n * @param {HTMLElement} root - элемент, куда будут вставлены карточки\r\n * @param {Array<Card>} cards - Массив карточек\r\n */\r\nfunction composeCards(root, cards) {\r\n  cards.forEach((element) => {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(element);\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(element.author);\r\n    const cardWrapper = document.createElement('div');\r\n    const tags = element.tags.map((tag) => ({\r\n      content: tag,\r\n      color: (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.genRanHexColor)(),\r\n    }));\r\n    cardWrapper.innerHTML = (0,_card_pug_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\r\n      ...element,\r\n      tags,\r\n    });\r\n    root.appendChild(cardWrapper.firstChild);\r\n  });\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/composeCardStandart.js?");

/***/ }),

/***/ "./public/components/feed/composeUsers.js":
/*!************************************************!*\
  !*** ./public/components/feed/composeUsers.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ composeUsers)\n/* harmony export */ });\n/* harmony import */ var _profileCard_profileCard_pug_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../profileCard/profileCard.pug.js */ \"./public/components/profileCard/profileCard.pug.js\");\n/* harmony import */ var _composeCardStandart_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./composeCardStandart.js */ \"./public/components/feed/composeCardStandart.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n/**\r\n * Описание сущности карточки в новостной ленте\r\n * @typedef {Object} Card\r\n * @property {string} id           - ID записи\r\n * @property {string} previewUrl   - ссылка не главную картинку\r\n * @property {string} title        - заголовок\r\n * @property {string} text         - содержание записи\r\n * @property {string} authorUrl    - ссылка на страницу автора\r\n * @property {string} authorName   - имя автора\r\n * @property {string} authorAvatar - ссылка на аватар автора\r\n * @property {string} commentsUrl  - ссылка на комменарии к записи\r\n * @property {number} comments     - число комментариев к записи\r\n * @property {number} likes        - рейтинг записи\r\n * @property {Array.string} tags   - отмеченные автором темы сообщений\r\n * @return {HTMLElement}\r\n */\r\n\r\n/**\r\n * Добавить карточки в root-HTMLElement\r\n * Нужен как универсальное правило отрисовки карточек\r\n * в качестве реакции на данные с сервера\r\n * @param {HTMLElement} root - элемент, куда будут вставлены карточки\r\n * @param {Array<Card>} cards - Массив карточек\r\n */\r\nfunction composeUsers(root, cards) {\r\n  if (cards.length === 0) {\r\n    return;\r\n  }\r\n  // данные - это юзер\r\n  if ('login' in cards[0]) {\r\n    cards.forEach((element) => {\r\n      (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_2__.appendApiImg)(element);\r\n      const cardWrapper = document.createElement('div');\r\n\r\n      cardWrapper.innerHTML = (0,_profileCard_profileCard_pug_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(element);\r\n      root.appendChild(cardWrapper.firstChild);\r\n    });\r\n  } else {\r\n    // иначе статья\r\n    (0,_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(root, cards);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/composeUsers.js?");

/***/ }),

/***/ "./public/components/feed/feed.js":
/*!****************************************!*\
  !*** ./public/components/feed/feed.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Feed)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _feedView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./feedView.js */ \"./public/components/feed/feedView.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/actions/readerActions.js */ \"./public/flux/actions/readerActions.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @typedef {Object} Card\r\n * @property {string} id           - ID записи\r\n * @property {string} previewUrl   - ссылка не главную картинку\r\n * @property {string} title        - заголовок\r\n * @property {string} text         - содержание записи\r\n * @property {string} authorUrl    - ссылка на страницу автора\r\n * @property {string} authorName   - имя автора\r\n * @property {string} authorAvatar - ссылка на аватар автора\r\n * @property {string} commentsUrl  - ссылка на комменарии к записи\r\n * @property {number} comments     - число комментариев к записи\r\n * @property {number} likes        - рейтинг записи\r\n * @property {Array.string} tags   - отмеченные автором темы сообщений\r\n * @return {HTMLElement}\r\n */\r\n\r\nconst resetDoNotUploadTime = 6000;  // anti- brutforce\r\n\r\n/**\r\n * Создает обработчики клика на разные участки карточки\r\n * @param {HTMLElement} where место, где искать смонтированные шаблонизатором\r\n * карточки\r\n * @param {Array<Card>} cards массив с данными, по которым\r\n * карточки монтировались\r\n */\r\nfunction addClickListenersOnCards(where, cards) {\r\n  cards.forEach((card) => {\r\n    const cardDiv = where.querySelector('#card' + card.id);\r\n    if (cardDiv === null) {\r\n      console.warn('{Feed} card with id', card.id, 'has mounted with error');\r\n      return;\r\n    }\r\n\r\n    cardDiv.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const currentTarget = e.currentTarget;\r\n      console.warn(currentTarget.id);\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch(_flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setArticleLoading(card));\r\n      (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_2__.redirect)('/article/' + currentTarget.id.replace('card', ''));\r\n    });\r\n\r\n    cardDiv.querySelector('.author-name').addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.profilePageActions.setUserInfo(card.author));\r\n          (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_2__.redirect)('/user/' + card.author.login);\r\n        },\r\n    );\r\n\r\n    cardDiv.querySelectorAll('.tags__tag').forEach((t) => t.addEventListener(\r\n        'click',\r\n        (e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          console.warn('TODO: клик по тегу', e.currentTarget.textContent);\r\n        },\r\n    ));\r\n  });\r\n}\r\n/**\r\n * ViewModel-компонент соответсвующего View\r\n * @class Feed\r\n */\r\nclass Feed extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент ленты\r\n   * @param {function} composeCards принимает root - HTMLElement, к которому\r\n   * аппендятся карточки и массив данных, по которому строятся шаблоны\r\n   * @param {string} storeName - имя редьюсера\r\n   * @param {Type} SAVE_NEW_CARDS_ACTION - событие, на которое\r\n   * в ленту добавляются карточки\r\n   * @param {Type} CLEAR_CARDS_ACTION - событие, на которое\r\n   * лента стирается\r\n   * @param {Type} FORBID_CARDS_UPLOADING_ACTION - событие, на которое\r\n   * лента скрывает анимацию подгрузки. Предполаается,\r\n   * что такое событие генерируется методом forbidCardsUploading\r\n   * @param {Type} ALLOW_CARDS_UPLOADING_ACTION - событие, на которое\r\n   * лента приготавливаается к загрузке новых записей. Предполаается,\r\n   * что такое событие генерируется методом allowCardsUploading\r\n   * @param {Action} forbidCardsUploading - действие, которое\r\n   * говорит, о том, что все данные загружены\r\n   * @param {Action} allowCardsUploading - действие, которое\r\n   * разрешает загрузку карточек снова через resetDoNotUploadTime\r\n   * @param {BaseComponent} previewComponent - компонент,\r\n   * который будет вложен в .feed__preview в ленте\r\n   */\r\n  constructor(\r\n      composeCards,\r\n      storeName,\r\n      SAVE_NEW_CARDS_ACTION,\r\n      CLEAR_CARDS_ACTION,\r\n      FORBID_CARDS_UPLOADING_ACTION,\r\n      ALLOW_CARDS_UPLOADING_ACTION,\r\n      forbidCardsUploading,\r\n      allowCardsUploading,\r\n      previewComponent = new _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](),\r\n  ) {\r\n    console.log('{FEED} creation with params:');\r\n    console.log({storeName});\r\n\r\n    super();\r\n    this.innerComponent = previewComponent;\r\n    this.storeName = storeName;\r\n    const cards = _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState()[storeName].cards;\r\n    this.view = new _feedView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n        composeCards,\r\n        previewComponent.render().outerHTML,\r\n        cards,\r\n    );\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subscribe(SAVE_NEW_CARDS_ACTION, ({idLastLoaded, cards}) => {\r\n          if (!Array.isArray(cards)) {\r\n            if (_globals_js__WEBPACK_IMPORTED_MODULE_6__.ajaxDebug) {\r\n              console.warn('API ERROR! Server must return array of Cards',\r\n                  'but returned', typeof cards, ':', {cards});\r\n            }\r\n            return;\r\n          }\r\n\r\n          this.view.addCards(cards);\r\n          addClickListenersOnCards(\r\n              this.view.root.querySelector(`.feed__cards`),\r\n              cards,\r\n          );\r\n\r\n          const endFound = _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState()[storeName].isEndFound;\r\n          if (endFound) {\r\n            if (_globals_js__WEBPACK_IMPORTED_MODULE_6__.ajaxDebug) {\r\n              console.log(`{${storeName}FEED}\r\n              'end' found. isEndFound flag is true`);\r\n            }\r\n            this.view.hideLoadingAnimation();\r\n            // асинхронное событие (выполняется с помощью преобразователя)\r\n            // разрешает загрузку карточек спустя некоторое время\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch((dispatch) => {\r\n              setTimeout(() => {\r\n                if (_globals_js__WEBPACK_IMPORTED_MODULE_6__.ajaxDebug) {\r\n                  console.log('{FEED} isEndFound flag is reset to false');\r\n                }\r\n                dispatch(allowCardsUploading());\r\n              }, resetDoNotUploadTime);\r\n            });\r\n          }\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subscribe(\r\n            CLEAR_CARDS_ACTION,\r\n            () => this.view.clear(),\r\n        ),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subscribe(\r\n            ALLOW_CARDS_UPLOADING_ACTION,\r\n            () => this.view.showLoadingAnimation(),\r\n        ),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subscribe(\r\n            FORBID_CARDS_UPLOADING_ACTION,\r\n            () => this.view.hideLoadingAnimation(),\r\n        ),\r\n    );\r\n  }\r\n\r\n  /**\r\n  * @return {HTMLElement}\r\n  */\r\n  render() {\r\n    super.render();\r\n\r\n    const preview = this.innerComponent.render().outerHTML;\r\n    const cards = _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState()[this.storeName].cards;\r\n    this.root = this.view.render(preview, cards);\r\n    addClickListenersOnCards(\r\n        this.view.root.querySelector(`.feed__cards`),\r\n        cards,\r\n    );\r\n\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState()[this.storeName].isEndFound) {\r\n      this.view.hideLoadingAnimation();\r\n    }\r\n    return this.root;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/feed.js?");

/***/ }),

/***/ "./public/components/feed/feed.pug.js":
/*!********************************************!*\
  !*** ./public/components/feed/feed.pug.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ feedComponent)\n/* harmony export */ });\nfunction x(){};\n\nfunction \n            feedComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (preview) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"feed\\\"\\u003E\\u003Cdiv class=\\\"feed__preview\\\"\\u003E\" + (null == (pug_interp = preview) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"feed__cards\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv id=\\\"feed__loading\\\"\\u003E&#11088;\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"preview\" in locals_for_with ?\n        locals_for_with.preview :\n        typeof preview !== 'undefined' ? preview : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/feed/feed.pug.js?");

/***/ }),

/***/ "./public/components/feed/feedView.js":
/*!********************************************!*\
  !*** ./public/components/feed/feedView.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FeedView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _feed_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./feed.pug.js */ \"./public/components/feed/feed.pug.js\");\n\r\n\r\n\r\n/**\r\n * Описание сущности карточки в новостной ленте\r\n * @typedef {Object} Card\r\n * @property {string} id           - ID записи\r\n * @property {string} previewUrl   - ссылка не главную картинку\r\n * @property {string} title        - заголовок\r\n * @property {string} text         - содержание записи\r\n * @property {string} authorUrl    - ссылка на страницу автора\r\n * @property {string} authorName   - имя автора\r\n * @property {string} authorAvatar - ссылка на аватар автора\r\n * @property {string} commentsUrl  - ссылка на комменарии к записи\r\n * @property {number} comments     - число комментариев к записи\r\n * @property {number} likes        - рейтинг записи\r\n * @property {Array.string} tags   - отмеченные автором темы сообщений\r\n * @return {HTMLElement}\r\n */\r\n\r\n/**\r\n * @class FeedView\r\n */\r\nclass FeedView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Хранит состояние - текущие загруженные карточки\r\n   * @param {function} composeCards принимает root - HTMLElement, к которому\r\n   * аппендятся карточки и массив данных, по которому строятся шаблоны\r\n   * @param {string} preview\r\n   * @param {Array.Card} cards массив карточек (может быть пустым)\r\n   */\r\n  constructor(composeCards, preview, cards) {\r\n    super();\r\n    this.composeCards = composeCards;\r\n    this.root = this.render(preview, cards);\r\n  }\r\n\r\n  /**\r\n    * @param {string} preview\r\n    * @param {Array.Card} cards\r\n    * @return {HTMLElement}\r\n    */\r\n  render(preview, cards) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_feed_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n      preview,\r\n    });\r\n    const feed = wrapper.firstChild;\r\n    this.composeCards(feed.querySelector(`.feed__cards`), cards);\r\n\r\n    this.root = feed;\r\n    return feed;\r\n  }\r\n\r\n  /**\r\n    * Восстанавливает видимость индикатора загрузки,\r\n    * добавляет карточки вниз ленты\r\n    * @param {Array.Card} cards\r\n    */\r\n  addCards(cards) {\r\n    const cardsDiv = this.root.querySelector(`.feed__cards`);\r\n    if (!cardsDiv) {\r\n      console.warn('cannot append cards till Feed is not rendered');\r\n      return;\r\n    }\r\n    this.composeCards(cardsDiv, cards);\r\n    this.showLoadingAnimation();\r\n  }\r\n\r\n  /**\r\n    * Стирает содержимое ленты\r\n    */\r\n  clear() {\r\n    const cardsDiv = this.root.querySelector(`.feed__cards`);\r\n    cardsDiv.innerHTML = '';\r\n  }\r\n\r\n  /**\r\n   * hide loading component\r\n   */\r\n  hideLoadingAnimation() {\r\n    this.root.querySelector('#feed__loading').style.display = 'none';\r\n  }\r\n\r\n  /**\r\n   * show loading component\r\n   */\r\n  showLoadingAnimation() {\r\n    this.root.querySelector('#feed__loading').style.display = 'block';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/feedView.js?");

/***/ }),

/***/ "./public/components/feed/previews/mainPagePreviewBar.js":
/*!***************************************************************!*\
  !*** ./public/components/feed/previews/mainPagePreviewBar.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MainPagePreviewBar)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _mainPagePreviewBarView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mainPagePreviewBarView.js */ \"./public/components/feed/previews/mainPagePreviewBarView.js\");\n\r\n\r\n\r\n// TODO: MainPagePreviewBar -динамическая подборка популярых записей\r\n\r\n/**\r\n * @class MainPagePreviewBar\r\n */\r\nclass MainPagePreviewBar extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Топ популярных новостей\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _mainPagePreviewBarView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render();\r\n    return this.root;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/previews/mainPagePreviewBar.js?");

/***/ }),

/***/ "./public/components/feed/previews/mainPagePreviewBar.pug.js":
/*!*******************************************************************!*\
  !*** ./public/components/feed/previews/mainPagePreviewBar.pug.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ mainPagePreviewBarComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            mainPagePreviewBarComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (Array, avatarUrl, category, comments, datetime, firstName, lastName, likes, login, tags, text, title) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"preview\\\"\\u003E\\u003Cdiv class=\\\"preview__top\\\"\\u003E\\u003Cdiv class=\\\"card__top-left\\\"\\u003E\\u003Cdiv class=\\\"card__time-category\\\"\\u003E\\u003Cdiv class=\\\"card__time\\\"\\u003E\" + (pug_escape(null == (pug_interp = datetime) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__category\\\"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__author\\\"\\u003E\\u003Cdiv class=\\\"author-name\\\"\\u003E\\u003Cdiv class=\\\"author-name__login\\\"\\u003E\" + (pug_escape(null == (pug_interp = login) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"author-name__username\\\"\\u003E\" + (pug_escape(null == (pug_interp = firstName) ? \"\" : pug_interp)) + \" \" + (pug_escape(null == (pug_interp = lastName) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cimg\" + (\" class=\\\"card__author-photo\\\"\"+pug_attr(\"src\", `${avatarUrl || 'static/img/users/user_icon_loading.svg'}`, true, false)) + \"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"preview__content\\\"\\u003E\\u003Cdiv class=\\\"tags\\\"\\u003E\";\nif (Array.isArray(tags)) {\n// iterate tags.length ? tags : []\n;(function(){\n  var $$obj = tags.length ? tags : [];\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var tag = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag preview__tag\\\"\\u003E\" + (pug_escape(null == (pug_interp = tag) ? \"\" : pug_interp)) + \"     \\u003C\\u002Fdiv\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var tag = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Cdiv class=\\\"tags__tag preview__tag\\\"\\u003E\" + (pug_escape(null == (pug_interp = tag) ? \"\" : pug_interp)) + \"     \\u003C\\u002Fdiv\\u003E\";\n    }\n  }\n}).call(this);\n\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003Ca class=\\\"preview__title\\\"\\u003E\" + (pug_escape(null == (pug_interp = title) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003Cdiv class=\\\"preview__description\\\"\\u003E\" + (pug_escape(null == (pug_interp = text) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"card__bottom\\\"\\u003E\\u003Cdiv class=\\\"action-btns\\\"\\u003E\\u003Cdiv class=\\\"icon action-btns_m-right\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = likes) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"action-btns__likes-icon icon__img\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"icon\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = comments) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"action-btns__comments-icon icon__img\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"Array\" in locals_for_with ?\n        locals_for_with.Array :\n        typeof Array !== 'undefined' ? Array : undefined, \"avatarUrl\" in locals_for_with ?\n        locals_for_with.avatarUrl :\n        typeof avatarUrl !== 'undefined' ? avatarUrl : undefined, \"category\" in locals_for_with ?\n        locals_for_with.category :\n        typeof category !== 'undefined' ? category : undefined, \"comments\" in locals_for_with ?\n        locals_for_with.comments :\n        typeof comments !== 'undefined' ? comments : undefined, \"datetime\" in locals_for_with ?\n        locals_for_with.datetime :\n        typeof datetime !== 'undefined' ? datetime : undefined, \"firstName\" in locals_for_with ?\n        locals_for_with.firstName :\n        typeof firstName !== 'undefined' ? firstName : undefined, \"lastName\" in locals_for_with ?\n        locals_for_with.lastName :\n        typeof lastName !== 'undefined' ? lastName : undefined, \"likes\" in locals_for_with ?\n        locals_for_with.likes :\n        typeof likes !== 'undefined' ? likes : undefined, \"login\" in locals_for_with ?\n        locals_for_with.login :\n        typeof login !== 'undefined' ? login : undefined, \"tags\" in locals_for_with ?\n        locals_for_with.tags :\n        typeof tags !== 'undefined' ? tags : undefined, \"text\" in locals_for_with ?\n        locals_for_with.text :\n        typeof text !== 'undefined' ? text : undefined, \"title\" in locals_for_with ?\n        locals_for_with.title :\n        typeof title !== 'undefined' ? title : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/feed/previews/mainPagePreviewBar.pug.js?");

/***/ }),

/***/ "./public/components/feed/previews/mainPagePreviewBarView.js":
/*!*******************************************************************!*\
  !*** ./public/components/feed/previews/mainPagePreviewBarView.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MainPagePreviewBarView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _mainPagePreviewBar_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mainPagePreviewBar.pug.js */ \"./public/components/feed/previews/mainPagePreviewBar.pug.js\");\n\r\n\r\n\r\nconst loadingCard = {\r\n  id: 'loading-card',\r\n  previewUrl: 'static/img/loader-1-HorizontalBalls.gif',\r\n  tags: [],\r\n  title: 'Загрузка...',\r\n  text: `Еще чуть-чуть...`,\r\n  authorUrl: '',\r\n  authorName: 'loading',\r\n  authorAvatar: '',\r\n  commentsUrl: '',\r\n};\r\n\r\n/**\r\n * @class serviceWarningView\r\n */\r\nclass MainPagePreviewBarView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n    * @return {HTMLElement}\r\n    */\r\n  render() {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_mainPagePreviewBar_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(loadingCard);\r\n    return wrapper.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/feed/previews/mainPagePreviewBarView.js?");

/***/ }),

/***/ "./public/components/header/header.js":
/*!********************************************!*\
  !*** ./public/components/header/header.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Header)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _headerView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./headerView.js */ \"./public/components/header/headerView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/actions/searchActions.js */ \"./public/flux/actions/searchActions.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * ViewModel-компонент соответсвующего View\r\n * @class Header\r\n */\r\nclass Header extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент заголовка\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _headerView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n    this.isBlur = false;\r\n    this.isOpen = false;\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render();\r\n\r\n    const searchBtn = this.root.querySelector('.search__button');\r\n    const searchInput = this.root.querySelector('.search__input');\r\n    const searchRow = this.root.querySelector('.search__row');\r\n    const groupOptions = this.root.querySelector(\r\n        '.search__row_group_dropdown',\r\n    );\r\n\r\n    groupOptions.querySelector('.search__row_group_dropdown-content').childNodes\r\n        .forEach((group) => group.addEventListener(\r\n            'click',\r\n            (e) => {\r\n              groupOptions.querySelector('.search__row_group_bar').value =\r\n                  e.target.textContent;\r\n              _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setSearchGroup(\r\n                  e.target.dataset.search,\r\n                  e.target.textContent,\r\n              ));\r\n              // восстанавливаем потерянный при клике фокус\r\n              searchInput.focus();\r\n            }),\r\n        );\r\n\r\n    groupOptions.addEventListener(\r\n        'mouseover',\r\n        (e) => searchInput.removeEventListener('focusout', focusOutListener),\r\n    );\r\n    groupOptions.addEventListener(\r\n        'mouseout',\r\n        (e) => searchInput.addEventListener('focusout', focusOutListener),\r\n    );\r\n\r\n    searchBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      if (!this.isBlur && !this.isOpen) {\r\n        this.openSearchField();\r\n      }\r\n    });\r\n\r\n    searchInput.addEventListener('keydown', ({keyCode, target}) => {\r\n      if (keyCode === 13) {\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setSearchValue(searchInput.value));\r\n        searchInput.blur();\r\n        (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_4__.redirect)('/search');\r\n        // явно записываем группу поиска в строку,\r\n        // а то мало ли что там в редьюсере\r\n        // Обязательно селектор т.к. хедер перендерится при переходе\r\n        this.root.querySelector('.search__row_group_bar').value =\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().search.description;\r\n      }\r\n    });\r\n\r\n    const focusOutListener = (e) => {\r\n      console.log('{Header} searchField lost focus');\r\n      this.closeSearchField();\r\n      this.isBlur = true;\r\n      const delay = parseFloat(searchRow.style.transitionDuration) * 1000;\r\n      setTimeout(() => this.isBlur=false, delay);\r\n    };\r\n    searchInput.addEventListener('focusout', focusOutListener);\r\n\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * closeSearchField\r\n   */\r\n  closeSearchField() {\r\n    const searchBtn = this.root.querySelector('.search__button');\r\n    const navItems = this.root.querySelector('.header__nav-items');\r\n    const searchRow = this.root.querySelector('.search__row');\r\n    console.log('{Header} searchField close');\r\n    navItems.style.pointerEvents = 'all';\r\n    searchBtn.classList.add('search-icon');\r\n    searchBtn.classList.remove('cross-icon');\r\n    searchRow.classList.add('search__row_close');\r\n    searchRow.classList.remove('search__row_open');\r\n    this.isOpen = false;\r\n  };\r\n\r\n  /**\r\n   * openSearchField\r\n   */\r\n  openSearchField() {\r\n    const searchBtn = this.root.querySelector('.search__button');\r\n    const navItems = this.root.querySelector('.header__nav-items');\r\n    const searchRow = this.root.querySelector('.search__row');\r\n    const searchInput = this.root.querySelector('.search__input');\r\n    console.log('{Header} searchField open');\r\n    navItems.style.pointerEvents = 'none';\r\n    searchBtn.classList.remove('search-icon');\r\n    searchBtn.classList.add('cross-icon');\r\n    searchRow.classList.remove('search__row_close');\r\n    searchRow.classList.add('search__row_open');\r\n    searchInput.focus();\r\n    searchInput.select();\r\n    this.isOpen = true;\r\n  };\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/header/header.js?");

/***/ }),

/***/ "./public/components/header/header.pug.js":
/*!************************************************!*\
  !*** ./public/components/header/header.pug.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ headerComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            headerComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;pug_html = pug_html + \"\\u003Cdiv class=\\\"header\\\"\\u003E\\u003Ca class=\\\"header__title-block\\\" href=\\\"\\u002F\\\"\\u003E\\u003Cdiv class=\\\"header__title\\\" data-router=\\\"ignore\\\"\\u003ESaberNews\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fa\\u003E\\u003Cdiv class=\\\"header__content\\\"\\u003E\\u003Cdiv class=\\\"header__nav-items\\\"\\u003E\\u003Ca class=\\\"header__nav-item\\\" data-test=\\\"test1\\\"\\u003EПопулярное\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"header__nav-item\\\" data-test=\\\"test2\\\"\\u003EНовое\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"header__nav-item\\\"\\u003EПодписки\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"header__nav-item\\\"\\u003EМероприятия\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"header__nav-item\\\"\\u003EГруппы\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"header__nav-item\\\"\\u003EТрансляции\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"search\\\"\\u003E\\u003Cdiv class=\\\"search__row search__row_close\\\" style=\\\"transition: all 0.5s;\\\"\\u003E\\u003Cinput class=\\\"search__input\\\" type=\\\"text\\\" placeholder=\\\"Найти\\\"\\u002F\\u003E\\u003Cdiv class=\\\"search__row_group_dropdown\\\"\\u003E\\u003Cinput\" + (\" class=\\\"search__row_group_bar\\\"\"+\" type=\\\"text\\\" placeholder=\\\"где?\\\"\"+pug_attr(\"readonly\", true, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"search__row_group_dropdown-content\\\"\\u003E\\u003Cdiv class=\\\"search__row_group_dropdown-item\\\" data-search=\\\"articles\\\"\\u003EСтатьи\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"search__row_group_dropdown-item\\\" data-search=\\\"author\\\"\\u003EПользователи\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"search__row_group_dropdown-item\\\" data-search=\\\"tags\\\"\\u003EТеги\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"search__row_btn\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"search__button search-icon\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/header/header.pug.js?");

/***/ }),

/***/ "./public/components/header/headerView.js":
/*!************************************************!*\
  !*** ./public/components/header/headerView.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HeaderView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _header_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./header.pug.js */ \"./public/components/header/header.pug.js\");\n\r\n\r\n\r\n/**\r\n * @class Header\r\n */\r\nclass HeaderView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n    * @return {HTMLElement}\r\n    */\r\n  render() {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_header_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\r\n    return wrapper.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/header/headerView.js?");

/***/ }),

/***/ "./public/components/imgPreloader.js":
/*!*******************************************!*\
  !*** ./public/components/imgPreloader.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst queue = [];\r\n/**\r\n * @class\r\n */\r\nconst ImgPreloader = {\r\n  /**\r\n   * @param {Array<string>} imgs url картинок\r\n   */\r\n  upload(imgs) {\r\n    queue.push(...imgs);\r\n    for (let i = 0; i < imgs.length; i++) {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        const index = queue.indexOf(img);\r\n        if (index !== -1) {\r\n          queue.splice(index, 1);\r\n        }\r\n      };\r\n      queue.push(img);\r\n      img.src = imgs[i];\r\n    }\r\n  },\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImgPreloader);\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/imgPreloader.js?");

/***/ }),

/***/ "./public/components/linksController.js":
/*!**********************************************!*\
  !*** ./public/components/linksController.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LinksController)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n// ///////////////////////////////// //\r\n//\r\n//     Определяет взаимодействие\r\n//     со ссылками, но не с\r\n//     переходами по страницам\r\n//\r\n// ///////////////////////////////// //\r\nconst configuration = {};\r\n//   template: {\r\n//     action: () => {\r\n\r\n//     },\r\n//     props: null,\r\n//   }\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//     Общий глобальный обработчик\r\n//     действует только на ссылки\r\n//\r\n// ///////////////////////////////// //\r\n\r\n\r\n\r\n/**\r\n * Общий глобальный обработчик. Действует только на ссылки.\r\n * Здесь можно задать любое поведение при клике на HTMLAnchorElement\r\n * @param {event} event\r\n */\r\nfunction linksControllerClickHandler(event) {\r\n  const {target} = event;\r\n\r\n  if (target.dataset.router === 'outer') {\r\n    return;\r\n  }\r\n\r\n  // ставим preventDefault, чтобы предотварить переход по ссылкам,\r\n  // в которых есть вложенные элементы, ведь их href равен href'у ссылки\r\n  // на всех вложенных элементах такой ссылки должен быть указан\r\n  // data=router='ignore'\r\n  // Нет гарантии, что сработает раньше: linkController или Router\r\n  if (target.dataset.router === 'ignore') {\r\n    event.preventDefault();\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.linkControllerDebug) {\r\n      console.log('[linkController]', {target}, 'ignored');\r\n    }\r\n  }\r\n\r\n  // проверям, что клик был по ссылке (anchor)\r\n  if (target instanceof HTMLAnchorElement) {\r\n    event.preventDefault();\r\n\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.linkControllerDebug) {\r\n      console.log({targeter: target.dataset.section});\r\n    }\r\n\r\n    const props = configuration[target.dataset.section]?.props;\r\n    const action = configuration[target.dataset.section]?.action;\r\n    if (typeof action === 'function') {\r\n      action.call(null, props);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Отвечает за поведение при клике на ссылку,\r\n * которое не ведет к переходу на другую страницу.\r\n * HTMLAnchot должен содержать атрибут data-section,\r\n * который указывается при регистрации\r\n * @class LinksController\r\n */\r\nclass LinksController {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    this.root = root;\r\n    this.enabled = false;\r\n  }\r\n\r\n  /**\r\n   * Регистрация элемента в контроллере.\r\n   * section - значение data-section соответствующего атрибута.\r\n   * action - действие, выполняемое при клике.\r\n   * props - параметры, передаваемые в action.\r\n   * @param {string} section\r\n   * @param {function} action\r\n   * @param {any} props\r\n   * @return {LinksController}\r\n   */\r\n  register(section, action = () => {}, props = null) {\r\n    configuration[section] = {\r\n      action,\r\n      props,\r\n    };\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Активирует обработчик кликов на элементе root\r\n   */\r\n  enable() {\r\n    if (!this.enabled) {\r\n      this.enabled = true;\r\n      this.root.addEventListener('click', linksControllerClickHandler);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Дизактивирует обработчик кликов на элементе root\r\n   */\r\n  disable() {\r\n    if (this.enabled) {\r\n      this.enabled = false;\r\n      this.root.removeEventListener('click', linksControllerClickHandler);\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/linksController.js?");

/***/ }),

/***/ "./public/components/loading/loading.pug.js":
/*!**************************************************!*\
  !*** ./public/components/loading/loading.pug.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ loadingComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            loadingComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (progressValue) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"loading-page\\\"\\u003E\\u003Cdiv class=\\\"loading-page__title\\\"\\u003EЗагрузка\\u003C\\u002Fdiv\\u003E\\u003Cprogress\" + (\" class=\\\"progress__loading\\\"\"+pug_attr(\"value\", `${progressValue}`, true, false)+\" max=\\\"100\\\"\") + \"\\u003E\\u003C\\u002Fprogress\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"progressValue\" in locals_for_with ?\n        locals_for_with.progressValue :\n        typeof progressValue !== 'undefined' ? progressValue : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/loading/loading.pug.js?");

/***/ }),

/***/ "./public/components/modal/modal.js":
/*!******************************************!*\
  !*** ./public/components/modal/modal.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _modal_pug_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.pug.js */ \"./public/components/modal/modal.pug.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst animationTime = 200;\r\nconst informationWindowOpenTime = 2000;\r\n\r\nlet inClosing = false;\r\nlet isDestroyed = false;\r\nlet okBtnDispay = true;\r\nlet cancelBtnDispay = true;\r\nlet docTitle = '';\r\nlet clearOkListener = () => {};\r\nlet clearCancelListener= () => {};\r\n\r\n/**\r\n * @param {object} props\r\n * @property {string} title\r\n * @property {string} content\r\n * @property {string?} btnOkSign      - надпись на кнопке подтверждения\r\n * @property {string?} btnCancelSign  - надпись на кнопке отмены\r\n * @property {bolean} isEnteractive   - true - кнопки на футере отображаются\r\n * @property {bolean} isCancelable    - true - кнопка отмены\r\n *                                      на футере отображается\r\n * @property {callback} onConfirm     - обработчик кнопки ОК\r\n * @property {callback} onDecline     - обработчик кнопки CANCEL\r\n * @return {string}\r\n */\r\nfunction fillDefaultModal(props) {\r\n  if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n    console.log('[Modal] modal filling: ' + JSON.stringify(props));\r\n  }\r\n  const modal = (0,_modal_pug_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\r\n    title: props.title || '',\r\n    content: props.content || '',\r\n    ok_sign: props.btnOkSign || 'Понятно',\r\n    cancel_sign: props.btnCancelSign || 'Отмена',\r\n  });\r\n  return modal;\r\n}\r\n\r\n/**\r\n * @param {object} props\r\n * @property {string} title\r\n * @property {string} content\r\n * @property {string?} btnOkSign      - надпись на кнопке подтверждения\r\n * @property {string?} btnCancelSign  - надпись на кнопке отмены\r\n * @property {bolean} isEnteractive   - true - кнопки на футере отображаются\r\n * @property {bolean} isCancelable    - true - кнопка отмены\r\n *                                      на футере отображается\r\n * @property {callback} onConfirm     - обработчик кнопки ОК\r\n * @property {callback} onDecline     - обработчик кнопки CANCEL\r\n * @return {HTMLDivElement}\r\n */\r\nfunction _createModal(props) {\r\n  const modalDiv = document.getElementById('modalroot');\r\n  modalDiv.innerHTML = fillDefaultModal(props);\r\n\r\n  const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n  const activeOkEventListener = (e) => {\r\n    e.preventDefault();\r\n    if (typeof props.onConfirm === 'function') {\r\n      props.onConfirm();\r\n    } else {\r\n      console.log('[Modal] confirm');\r\n    }\r\n  };\r\n\r\n  okBtn.addEventListener('click', activeOkEventListener);\r\n  clearOkListener = () => {\r\n    okBtn.removeEventListener('click', activeOkEventListener);\r\n  };\r\n\r\n  const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n  const activeCancelEventListener = (e) => {\r\n    e.preventDefault();\r\n    if (typeof props.onDecline === 'function') {\r\n      props.onDecline();\r\n    } else {\r\n      console.log('[Modal] decline');\r\n    }\r\n  };\r\n  cancelBtn.addEventListener('click', activeCancelEventListener);\r\n  clearCancelListener = () => {\r\n    cancelBtn.removeEventListener('click', activeCancelEventListener);\r\n  };\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_2__.modalTypes.MODAL_CLOSE, () => {\r\n    document.title = _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getState().page.docTitle;\r\n  });\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_2__.modalTypes.MODAL_OPEN, () => {\r\n    document.title = docTitle;\r\n  });\r\n\r\n  return modalDiv;\r\n}\r\n\r\nconst modalDiv = _createModal({\r\n  isEnteractive: true,\r\n  isCancelable: true,\r\n});\r\n\r\nconst Modal = {\r\n  animationTime,\r\n\r\n  setDocTitle(title) {\r\n    docTitle = title;\r\n  },\r\n\r\n  close() {\r\n    if (isDestroyed) {\r\n      if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n        console.warn('[Modal] close: modal has been destroyed');\r\n      }\r\n      return;\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.modalActions.modalClose());\r\n\r\n    inClosing = true;\r\n    const modalOverlay = modalDiv.querySelector('.modal__overlay');\r\n    modalOverlay.classList.add('modal_close');\r\n    modalOverlay.classList.remove('modal_open');\r\n    setTimeout(() => {\r\n      inClosing = false;\r\n    }, animationTime);\r\n  },\r\n\r\n  open(isEnteractive = true) {\r\n    if (isDestroyed) {\r\n      if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n        console.warn('[[Modal] open: modal has been destroyed');\r\n      }\r\n      return;\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.modalActions.modalOpen());\r\n    // во время анимации закрытия не сетим анимацию закрытия\r\n    if (inClosing) {\r\n      console.warn('[Modal] open: modal is in closing process');\r\n      return;\r\n    }\r\n\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    okBtn.className = 'modal__btn-ok';\r\n    okBtn.classList.add('modal__btn');\r\n    cancelBtn.className = 'modal__btn-cancel';\r\n    cancelBtn.classList.add('modal__btn');\r\n\r\n    if (!isEnteractive) {\r\n      okBtn.style.display = 'none';\r\n      cancelBtn.style.display = 'none';\r\n    }\r\n\r\n    const modalOverlay = modalDiv.querySelector('.modal__overlay');\r\n    modalOverlay.classList.remove('modal_close');\r\n    modalOverlay.classList.add('modal_open');\r\n\r\n    // временное выплывающее окно\r\n    if (!isEnteractive) {\r\n      setTimeout(() => {\r\n        this.close();\r\n        setTimeout(() => {\r\n          if (okBtnDispay) {\r\n            okBtn.style.display = 'block';\r\n          }\r\n          if (cancelBtnDispay) {\r\n            cancelBtn.style.display = 'block';\r\n          }\r\n        }, animationTime);\r\n      }, informationWindowOpenTime);\r\n    }\r\n  },\r\n\r\n  getContent() {\r\n    const contentDiv = modalDiv.querySelector('.modal__content');\r\n    if (!contentDiv) {\r\n      console.warn('[Modal] no .modal__content found');\r\n    }\r\n    return contentDiv;\r\n  },\r\n\r\n  setContent(content) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n      console.log('[Modal]: setContent to ', content);\r\n    }\r\n    const contentDiv = modalDiv.querySelector('.modal__content');\r\n    if (typeof content === 'string') {\r\n      contentDiv.innerHTML = content;\r\n    }\r\n    if (content instanceof HTMLElement) {\r\n      contentDiv.innerHTML = '';\r\n      contentDiv.appendChild(content);\r\n    }\r\n  },\r\n\r\n  appendContent(content) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n      console.log('[Modal]: appendContent:', content);\r\n    }\r\n    const contentDiv = modalDiv.querySelector('.modal__content');\r\n    if (typeof content === 'string') {\r\n      contentDiv.innerHTML += content;\r\n    }\r\n    if (content instanceof HTMLElement) {\r\n      contentDiv.appendChild(content);\r\n    }\r\n  },\r\n\r\n  setTitle(title) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_4__.modalsDebug) {\r\n      console.log('[Modal]: setTitle to ', title);\r\n    }\r\n    let titleDiv = modalDiv.querySelector('.modal__header');\r\n    if (typeof title === 'string') {\r\n      titleDiv.innerHTML = title;\r\n    }\r\n    if (title instanceof HTMLElement) {\r\n      const newTitleDiv = document.createElement('div');\r\n      titleDiv.className = 'modal__header';\r\n      newTitleDiv.appendChild(title);\r\n      titleDiv = newTitleDiv;\r\n    }\r\n  },\r\n\r\n  // при работе с этой функцией сбиваются анимации !\r\n  /**\r\n   * @param {object} props\r\n   * @property {string} title\r\n   * @property {string} content\r\n   * @property {string?} btnOkSign      - надпись на кнопке подтверждения\r\n   * @property {string?} btnCancelSign  - надпись на кнопке отмены\r\n   * @property {bolean} isEnteractive   - true - кнопки на футере отображаются\r\n   * @property {bolean} isCancelable    - true - кнопка отмены\r\n   *                                      на футере отображается\r\n   * @property {callback} onConfirm     - обработчик кнопки ОК\r\n   * @property {callback} onDecline     - обработчик кнопки CANCEL\r\n   */\r\n  configurate(props) {\r\n    modalDiv.innerHTML = fillDefaultModal(props);\r\n\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    const activeOkEventListener = (e) => {\r\n      e.preventDefault();\r\n      if (typeof props.onConfirm === 'function') {\r\n        props.onConfirm();\r\n      } else {\r\n        console.log('[Modal] confirm');\r\n      }\r\n    };\r\n\r\n    okBtn.addEventListener('click', activeOkEventListener);\r\n    clearOkListener = () => {\r\n      okBtn.removeEventListener('click', activeOkEventListener);\r\n    };\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    const activeCancelEventListener = (e) => {\r\n      e.preventDefault();\r\n      if (typeof props.onDecline === 'function') {\r\n        props.onDecline();\r\n      } else {\r\n        console.log('[Modal] decline');\r\n      }\r\n    };\r\n    cancelBtn.addEventListener('click', activeCancelEventListener);\r\n\r\n    clearCancelListener = () => {\r\n      console.log('[Modal] clear Cancel Listener', {activeCancelEventListener});\r\n      cancelBtn.removeEventListener('click', activeCancelEventListener);\r\n    };\r\n\r\n    if (!props.isEnteractive) {\r\n      okBtn.style.display = 'none';\r\n      cancelBtn.style.display = 'none';\r\n    }\r\n    if (!props.isCancelable) {\r\n      cancelBtn.style.display = 'none';\r\n    }\r\n  },\r\n\r\n  enableOkBtn() {\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    okBtn.style.display = 'block';\r\n    okBtnDispay = true;\r\n  },\r\n\r\n  disableOkBtn() {\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    okBtn.style.display = 'none';\r\n    okBtnDispay = false;\r\n  },\r\n\r\n  enableCancelBtn() {\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    cancelBtn.style.display = 'block';\r\n    cancelBtnDispay = true;\r\n  },\r\n\r\n  disableCancelBtn() {\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    cancelBtn.style.display = 'none';\r\n    cancelBtnDispay = false;\r\n  },\r\n\r\n  changeBtnOkSign(text) {\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    okBtn.innerText = text;\r\n  },\r\n\r\n  changeBtnCancelSign(text) {\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    cancelBtn.innerText = text;\r\n  },\r\n\r\n  setOkBtnAction(onConfirm) {\r\n    clearOkListener();\r\n    const okBtn = modalDiv.querySelector('#modal__btn-ok');\r\n    const activeOkEventListener = (e) => {\r\n      e.preventDefault();\r\n      if (typeof onConfirm === 'function') {\r\n        onConfirm();\r\n      } else {\r\n        console.log('[Modal] confirm');\r\n      }\r\n    };\r\n\r\n    okBtn.addEventListener('click', activeOkEventListener);\r\n    clearOkListener = () => {\r\n      okBtn.removeEventListener('click', activeOkEventListener);\r\n    };\r\n  },\r\n\r\n  setCancelBtnAction(onDecline) {\r\n    clearCancelListener();\r\n    const cancelBtn = modalDiv.querySelector('#modal__btn-cancel');\r\n    const activeCancelEventListener = (e) => {\r\n      e.preventDefault();\r\n      if (typeof onDecline === 'function') {\r\n        onDecline();\r\n      } else {\r\n        console.log('[Modal] confirm');\r\n      }\r\n    };\r\n    cancelBtn.addEventListener('click', activeCancelEventListener);\r\n\r\n    clearCancelListener = () => {\r\n      cancelBtn.removeEventListener('click', activeCancelEventListener);\r\n    };\r\n  },\r\n};\r\n\r\n/**\r\n * Обработчик элементов закрытия окна\r\n * @param {event} e;\r\n */\r\nfunction modalCloseListener(e) {\r\n  const target = e.target;\r\n  if (target.dataset['modalClose']) {\r\n    Modal.close();\r\n  }\r\n}\r\n\r\nmodalDiv.addEventListener('click', modalCloseListener);\r\n\r\nObject.assign(Modal, {\r\n  // removes event listeners\r\n  destroy() {\r\n    this.close();\r\n    modalDiv.removeEventListener('click', modalCloseListener);\r\n    modalDiv.innerHTML = '';\r\n    isDestroyed = true;\r\n  },\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Modal);\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/modal.js?");

/***/ }),

/***/ "./public/components/modal/modal.pug.js":
/*!**********************************************!*\
  !*** ./public/components/modal/modal.pug.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ modalComponent)\n/* harmony export */ });\nfunction x(){};\n\nfunction \n            modalComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (cancel_sign, content, ok_sign) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"modal__overlay\\\" data-modal-close=\\\"true\\\"\\u003E\\u003Cdiv class=\\\"modal__window\\\"\\u003E\\u003Cdiv class=\\\"modal__content-block\\\"\\u003E\\u003Cdiv class=\\\"modal__header\\\"\\u003E\\u003Ca class=\\\"modal__close-btn icon__img\\\" data-modal-close=\\\"true\\\"\\u003E\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"modal__content\\\"\\u003E\" + (null == (pug_interp = content) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"modal__footer\\\"\\u003E\\u003Cbutton class=\\\"modal__btn\\\" id=\\\"modal__btn-ok\\\" type=\\\"button\\\" data-modal-close=\\\"true\\\"\\u003E\" + (null == (pug_interp = ok_sign) ? \"\" : pug_interp) + \"\\u003C\\u002Fbutton\\u003E\\u003Cbutton class=\\\"modal__btn\\\" id=\\\"modal__btn-cancel\\\" type=\\\"button\\\" data-modal-close=\\\"true\\\"\\u003E\" + (null == (pug_interp = cancel_sign) ? \"\" : pug_interp) + \"\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"cancel_sign\" in locals_for_with ?\n        locals_for_with.cancel_sign :\n        typeof cancel_sign !== 'undefined' ? cancel_sign : undefined, \"content\" in locals_for_with ?\n        locals_for_with.content :\n        typeof content !== 'undefined' ? content : undefined, \"ok_sign\" in locals_for_with ?\n        locals_for_with.ok_sign :\n        typeof ok_sign !== 'undefined' ? ok_sign : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/modal/modal.pug.js?");

/***/ }),

/***/ "./public/components/modal/modalTemplates.js":
/*!***************************************************!*\
  !*** ./public/components/modal/modalTemplates.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showModalInformative\": () => (/* binding */ showModalInformative),\n/* harmony export */   \"showModalNetOrServerError\": () => (/* binding */ showModalNetOrServerError),\n/* harmony export */   \"showModalWarn\": () => (/* binding */ showModalWarn),\n/* harmony export */   \"modalTest\": () => (/* binding */ modalTest),\n/* harmony export */   \"showModalConfirm\": () => (/* binding */ showModalConfirm),\n/* harmony export */   \"default\": () => (/* binding */ ModalTemplates)\n/* harmony export */ });\n/* harmony import */ var _modal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _signupModal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signupModal.js */ \"./public/components/modal/signupModal.js\");\n\r\n\r\n\r\n/**\r\n * Информационное окно\r\n * @param {string} header\r\n * @param {string | HTMLElement} content\r\n */\r\nfunction showModalInformative(header = '', content = '') {\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(header);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(content);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open(false);\r\n}\r\n\r\n/**\r\n * Информационное окно об HTTP ошибках 400 и 500\r\n * @param {number} status\r\n * @param {string} msg\r\n */\r\nfunction showModalNetOrServerError(status, msg) {\r\n  if ((status / 100 + '')[0] === '5') {\r\n    _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(`Сервис временно не доступен: ${status}`);\r\n  }\r\n  if ((status / 100 + '')[0] === '4') {\r\n    _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(/* пользовательская */`Ошибка ${status}`);\r\n  }\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(msg);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open(false);\r\n}\r\n\r\n/**\r\n * Информационное окно, требующее подтверждения\r\n * @param {string} header\r\n * @param {string | HTMLElement} content\r\n * @param {function} onConfirm\r\n */\r\nfunction showModalWarn(header, content, onConfirm = () => {}) {\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(header);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(content);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].enableOkBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].changeBtnOkSign('Понятно');\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setOkBtnAction(onConfirm);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].disableCancelBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open(true);\r\n}\r\n\r\n/**\r\n * Информационное окно, требующее подтверждения\r\n * @param {string} header\r\n * @param {string | HTMLElement} content\r\n * @param {function} onConfirm\r\n */\r\nfunction modalTest(header, content, onConfirm = () => {}) {\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(header);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(content);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].enableOkBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].changeBtnOkSign('Понятно');\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setOkBtnAction(onConfirm);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].disableCancelBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open(true);\r\n}\r\n\r\n/**\r\n * Информационное окно, требующее подтверждения\r\n * @param {string} header\r\n * @param {string | HTMLElement} content\r\n * @param {function} onConfirm\r\n * @param {function} onDecline\r\n */\r\nfunction showModalConfirm(\r\n    header, content, onConfirm, onDecline = () => {},\r\n) {\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(header);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(content);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].changeBtnOkSign('Да');\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].enableOkBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setOkBtnAction(onConfirm);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].changeBtnCancelSign('Отмена');\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].enableCancelBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setCancelBtnAction(onDecline);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open(true);\r\n}\r\n\r\n/**\r\n * Сборник полезных модальных окон\r\n * Все функции включают полную настройку модального окна\r\n * @class ModalTemplates\r\n */\r\nclass ModalTemplates {\r\n  /**\r\n * Страница содержит главный компонент - форму регистрации\r\n * @param {boolean} showRegister\r\n * true, если нужно отобразить форму\r\n * для регистрации, false - для входа\r\n */\r\n  static signup(showRegister) {\r\n    _signupModal_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].show(showRegister);\r\n  }\r\n\r\n  /**\r\n * Информационное окно об HTTP ошибках 400 и 500\r\n * @param {number} status\r\n * @param {string} msg\r\n */\r\n  static netOrServerError(status, msg) {\r\n    showModalNetOrServerError(status, msg);\r\n  }\r\n\r\n  /**\r\n   * Информационное окно\r\n   * @param {string} header\r\n   * @param {string | HTMLElement} content\r\n   */\r\n  static informativeMsg(header = '', content = '') {\r\n    showModalInformative(header, content);\r\n  }\r\n\r\n  /**\r\n   * Информационное окно, требующее подтверждения\r\n   * @param {string} header\r\n   * @param {string | HTMLElement} content\r\n   * @param {function} onConfirm\r\n   * @param {function} onDecline\r\n   */\r\n  static confirm(header, content, onConfirm, onDecline) {\r\n    showModalConfirm(header, content, onConfirm, onDecline);\r\n  }\r\n\r\n  /**\r\n   * Информационное окно, требующее подтверждения\r\n   * @param {string} header\r\n   * @param {string | HTMLElement} content\r\n   * @param {function} onConfirm\r\n   */\r\n  static warn(header, content, onConfirm) {\r\n    showModalWarn(header, content, onConfirm);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/modalTemplates.js?");

/***/ }),

/***/ "./public/components/modal/serviceWarning.js":
/*!***************************************************!*\
  !*** ./public/components/modal/serviceWarning.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _serviceWarning_serviceWarning_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serviceWarning/serviceWarning.js */ \"./public/components/modal/serviceWarning/serviceWarning.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n\r\n\r\n\r\n\r\n\r\nconst serviceWarning = new _serviceWarning_serviceWarning_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\ndocument.getElementById('warningroot').appendChild(serviceWarning.render());\r\n\r\nconst Warning = {\r\n  show(msg) {\r\n    serviceWarning.show(msg);\r\n  },\r\n  hide() {\r\n    serviceWarning.hide();\r\n  },\r\n  setMessage(msg) {\r\n    serviceWarning.setMessage(msg);\r\n  },\r\n  getMessage() {\r\n    return serviceWarning.getMessage();\r\n  },\r\n  init() {\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribe(\r\n        _flux_types_js__WEBPACK_IMPORTED_MODULE_2__.apiTypes.SET_UNAVAILABLE,\r\n        () => Warning.show('Сервис недоступен'),\r\n    );\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribe(\r\n        _flux_types_js__WEBPACK_IMPORTED_MODULE_2__.apiTypes.SET_AVAILABLE,\r\n        () => {\r\n          if (Warning.getMessage() === 'Сервис недоступен') {\r\n            Warning.setMessage('');\r\n            Warning.hide();\r\n          }\r\n        },\r\n    );\r\n  },\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Warning);\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/serviceWarning.js?");

/***/ }),

/***/ "./public/components/modal/serviceWarning/serviceWarning.js":
/*!******************************************************************!*\
  !*** ./public/components/modal/serviceWarning/serviceWarning.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ServiceWarning)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _serviceWarningView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./serviceWarningView.js */ \"./public/components/modal/serviceWarning/serviceWarningView.js\");\n\r\n\r\n\r\n/**\r\n * @class ServiceWarning\r\n */\r\nclass ServiceWarning extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Окошко сообщений о состоянии сервиса\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _serviceWarningView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n  }\r\n\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render();\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * @param {string} msg\r\n   */\r\n  setMessage(msg) {\r\n    this.root.innerHTML = msg;\r\n  }\r\n\r\n  /**\r\n   * Возврат отображаемого сообщения\r\n   * @return {string}\r\n   */\r\n  getMessage() {\r\n    return this.root.innerHTML;\r\n  }\r\n\r\n  /**\r\n   * @param {string} msg\r\n   */\r\n  show(msg) {\r\n    this.root.style.display = 'block';\r\n    if (msg) {\r\n      this.root.innerHTML = msg;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * спрятать\r\n   */\r\n  hide() {\r\n    this.root.style.display = 'none';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/serviceWarning/serviceWarning.js?");

/***/ }),

/***/ "./public/components/modal/serviceWarning/serviceWarningView.js":
/*!**********************************************************************!*\
  !*** ./public/components/modal/serviceWarning/serviceWarningView.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ serviceWarningView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n\r\n/**\r\n * @class serviceWarningView\r\n */\r\nclass serviceWarningView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n    * @return {HTMLElement}\r\n    */\r\n  render() {\r\n    const box = document.createElement('div');\r\n    box.style = `\r\n    display: none;\r\n\r\n    position:fixed; \r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    top: 105px;\r\n    left: 20px;\r\n    background-color: #dee4ea;\r\n    color: red;\r\n    font-weight: bold;\r\n    `;\r\n    return box;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/serviceWarning/serviceWarningView.js?");

/***/ }),

/***/ "./public/components/modal/signupModal.js":
/*!************************************************!*\
  !*** ./public/components/modal/signupModal.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"signupModal\": () => (/* binding */ signupModal),\n/* harmony export */   \"default\": () => (/* binding */ SignupModal)\n/* harmony export */ });\n/* harmony import */ var _modal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _signupForm_signupForm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../signupForm/signupForm.js */ \"./public/components/signupForm/signupForm.js\");\n\r\n\r\n\r\n/**\r\n * Страница содержит главный компонент - форму регистрации\r\n * @param {boolean} showRegister\r\n * true, если нужно отобразить форму\r\n * для регистрации, false - для входа\r\n */\r\nfunction signupModal(showRegister) {\r\n  // Элементы навигации\r\n  const changeFormTypeBtn = document.createElement('a');\r\n  changeFormTypeBtn.textContent =\r\n    showRegister ? 'У меня уже есть аккаунт' : 'Создать аккаунт';\r\n  changeFormTypeBtn.href = showRegister ? '/login' : '/register';\r\n  changeFormTypeBtn.classList.add('link');\r\n  changeFormTypeBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n\r\n    _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].close();\r\n    setTimeout(() => {\r\n      signupModal(!showRegister);\r\n    }, _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].animationTime);\r\n  });\r\n\r\n  // форма\r\n  const signupForm = new _signupForm_signupForm_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](showRegister);\r\n  const form = signupForm.render();\r\n\r\n  const contentDiv = document.createElement('div');\r\n  contentDiv.appendChild(form);\r\n  contentDiv.appendChild(changeFormTypeBtn);\r\n\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setDocTitle(`SaberProject | ${showRegister ? 'Sign Up' : 'Login'}`);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setTitle(showRegister ? 'Регистрация' : 'Вход');\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setContent(contentDiv);\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].disableCancelBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].disableOkBtn();\r\n  _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].open();\r\n}\r\n\r\n/**\r\n * @class SignupModal\r\n */\r\nclass SignupModal {\r\n  /**\r\n   * @param {boolean} showRegister\r\n   * true, если нужно отобразить форму\r\n   * для регистрации, false - для входа\r\n   * По умолчанию false\r\n   */\r\n  static show(showRegister = false) {\r\n    signupModal(showRegister);\r\n  }\r\n\r\n  /**\r\n   * показать ошибку принудительно\r\n   * @param {string} msg\r\n   */\r\n  static appendWarning(msg) {\r\n    const contentDiv = _modal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getContent();\r\n    if (!contentDiv) {\r\n      return;\r\n    }\r\n    contentDiv.innerHTML += msg;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/modal/signupModal.js?");

/***/ }),

/***/ "./public/components/profileCard/profileCard.js":
/*!******************************************************!*\
  !*** ./public/components/profileCard/profileCard.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfileCard)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _profileCardView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profileCardView.js */ \"./public/components/profileCard/profileCardView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class ProfileCard\r\n */\r\nclass ProfileCard extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Топ популярных новостей\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _profileCardView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_3__.profilePageTypes.SET_USER_LOADING, (user) => {\r\n          this.setUser(user);\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_3__.profilePageTypes.SET_USER_INFO, (user) => {\r\n          this.setUser(user);\r\n        }),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    const user = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage.user;\r\n    this.root = this.view.render(user);\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * @param {Object} user\r\n   * @property {string} login\r\n   * @property {string?} firstName\r\n   * @property {string?} lastName\r\n   * @property {email?} email\r\n   * @property {string?} avatarUrl\r\n   * @property {number?} score\r\n   */\r\n  setUser(user) {\r\n    this.root.innerHTML = '';\r\n    this.root.appendChild(this.view.render(user).firstChild);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/profileCard/profileCard.js?");

/***/ }),

/***/ "./public/components/profileCard/profileCard.pug.js":
/*!**********************************************************!*\
  !*** ./public/components/profileCard/profileCard.pug.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ profileCardComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            profileCardComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (avatarUrl, description, firstName, lastName, login) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"profile\\\"\\u003E\\u003Cdiv class=\\\"profile__info\\\"\\u003E\\u003Cimg\" + (\" class=\\\"profile__photo\\\"\"+pug_attr(\"src\", `${avatarUrl || 'static/img/users/user_icon_loading.svg'}`, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"profile__description\\\"\\u003E\\u003Cdiv class=\\\"profile__username\\\"\\u003E\" + (pug_escape(null == (pug_interp = firstName) ? \"\" : pug_interp)) + \" \" + (pug_escape(null == (pug_interp = lastName) ? \"\" : pug_interp)) + \" (\" + (pug_escape(null == (pug_interp = login) ? \"\" : pug_interp)) + \")\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"profile__aboutme\\\"\\u003EОбо мне:\\u003C\\u002Fdiv\\u003E\" + (pug_escape(null == (pug_interp = description) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"profile__articles-title\\\"\\u003EСтатьи\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"avatarUrl\" in locals_for_with ?\n        locals_for_with.avatarUrl :\n        typeof avatarUrl !== 'undefined' ? avatarUrl : undefined, \"description\" in locals_for_with ?\n        locals_for_with.description :\n        typeof description !== 'undefined' ? description : undefined, \"firstName\" in locals_for_with ?\n        locals_for_with.firstName :\n        typeof firstName !== 'undefined' ? firstName : undefined, \"lastName\" in locals_for_with ?\n        locals_for_with.lastName :\n        typeof lastName !== 'undefined' ? lastName : undefined, \"login\" in locals_for_with ?\n        locals_for_with.login :\n        typeof login !== 'undefined' ? login : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/profileCard/profileCard.pug.js?");

/***/ }),

/***/ "./public/components/profileCard/profileCardView.js":
/*!**********************************************************!*\
  !*** ./public/components/profileCard/profileCardView.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ profileCardView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _profileCard_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profileCard.pug.js */ \"./public/components/profileCard/profileCard.pug.js\");\n\r\n\r\n\r\n/**\r\n * @class profileCard\r\n */\r\nclass profileCardView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n  * Хранит состояние - загруженные статьи автора\r\n  * @param {string} preview\r\n  */\r\n  constructor() {\r\n    super();\r\n    this.root = document.createElement('div');\r\n    this.root.innerHTML = 'компонент profileCard';\r\n  }\r\n\r\n  /**\r\n   * @param {Object} user\r\n   * @property {string} login\r\n   * @property {string?} firstName\r\n   * @property {string?} lastName\r\n   * @property {string?} avatarUrl\r\n   * @property {number?} score\r\n   * @return {HTMLElement}\r\n   */\r\n  render(user) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_profileCard_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(user);\r\n    this.root = wrapper.firstChild;\r\n    return wrapper.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/profileCard/profileCardView.js?");

/***/ }),

/***/ "./public/components/reader/articleReader.pug.js":
/*!*******************************************************!*\
  !*** ./public/components/reader/articleReader.pug.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ articleReaderComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            articleReaderComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (Array, author, comments, commentsContent, datetime, likes, previewUrl, tags, text, title) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"article-view\\\"\\u003E\\u003Cdiv class=\\\"article-view__content\\\"\\u003E\\u003Cdiv class=\\\"article-view__top\\\"\\u003E\\u003Ca class=\\\"article-view__back-btn\\\" id=\\\"article-change-btn\\\" style=\\\"display:none\\\"\\u003EИзменить\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"article-view__back-btn\\\" data-section=\\\"back\\\"\\u003EНазад\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-view__author-time\\\"\\u003E\";\nif (typeof author === \"object\") {\npug_html = pug_html + \"\\u003Cdiv class=\\\"article-view__author\\\"\\u003E \\u003Ca\" + (pug_attr(\"href\", `/user/${author.avatarUrl}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = author.login) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"article-view__author\\\"\\u003EОшибка\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003Cdiv class=\\\"article-view__time\\\"\\u003E\" + (pug_escape(null == (pug_interp = datetime) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-view__title\\\"\\u003E\" + (pug_escape(null == (pug_interp = title) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-view__info\\\"\\u003E\\u003Cdiv class=\\\"article-view__tags\\\"\\u003E\";\nif (Array.isArray(tags)) {\n// iterate tags.length ? tags : ['']\n;(function(){\n  var $$obj = tags.length ? tags : [''];\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var tag = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Ca class=\\\"article-view__tag\\\"\\u003E\" + (pug_escape(null == (pug_interp = tag) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var tag = $$obj[pug_index0];\npug_html = pug_html + \"\\u003Ca class=\\\"article-view__tag\\\"\\u003E\" + (pug_escape(null == (pug_interp = tag) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\";\n    }\n  }\n}).call(this);\n\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"action-btns\\\"\\u003E\\u003Cdiv class=\\\"icon action-btns_m-right\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = likes || '') ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"action-btns__likes-icon icon__img\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"icon action-btns_m-right\\\"\\u003E\\u003Cdiv class=\\\"icon__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = comments || '') ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"action-btns__comments-icon icon__img\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"icon\\\"\\u003E\\u003Cdiv class=\\\"action-btns__share-icon icon__img\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cimg\" + (\" class=\\\"article-view__main-picture\\\"\"+pug_attr(\"src\", `${previewUrl}`, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"article-view__content\\\"\\u003E\\u003Cdiv class=\\\"article-view__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = text) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"article-view__add-comment\\\"\\u003E\\u003Cinput class=\\\"article-view__comment-input\\\" type=\\\"text\\\" name=\\\"comment\\\" placeholder=\\\"Написать комментарий\\\"\\u002F\\u003E\\u003Cbutton class=\\\"action-btns__send-icon icon__img article-view__send-comment-btn\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"comments-show\\\"\\u003E\\u003Cbutton class=\\\"action-btns__arrow-icon icon-small__img comments-show__btn rotate-180\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003Cdiv class=\\\"comments-show__text\\\"\\u003EСкрыть комментарии\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"comments\\\" id=\\\"comments\\\"\\u003E\" + (null == (pug_interp = commentsContent) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"Array\" in locals_for_with ?\n        locals_for_with.Array :\n        typeof Array !== 'undefined' ? Array : undefined, \"author\" in locals_for_with ?\n        locals_for_with.author :\n        typeof author !== 'undefined' ? author : undefined, \"comments\" in locals_for_with ?\n        locals_for_with.comments :\n        typeof comments !== 'undefined' ? comments : undefined, \"commentsContent\" in locals_for_with ?\n        locals_for_with.commentsContent :\n        typeof commentsContent !== 'undefined' ? commentsContent : undefined, \"datetime\" in locals_for_with ?\n        locals_for_with.datetime :\n        typeof datetime !== 'undefined' ? datetime : undefined, \"likes\" in locals_for_with ?\n        locals_for_with.likes :\n        typeof likes !== 'undefined' ? likes : undefined, \"previewUrl\" in locals_for_with ?\n        locals_for_with.previewUrl :\n        typeof previewUrl !== 'undefined' ? previewUrl : undefined, \"tags\" in locals_for_with ?\n        locals_for_with.tags :\n        typeof tags !== 'undefined' ? tags : undefined, \"text\" in locals_for_with ?\n        locals_for_with.text :\n        typeof text !== 'undefined' ? text : undefined, \"title\" in locals_for_with ?\n        locals_for_with.title :\n        typeof title !== 'undefined' ? title : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/reader/articleReader.pug.js?");

/***/ }),

/***/ "./public/components/reader/comment.pug.js":
/*!*************************************************!*\
  !*** ./public/components/reader/comment.pug.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ commentComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            commentComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (answers, author, datetime, isEdited, likes, text) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"comment\\\"\\u003E\\u003Cdiv class=\\\"comment__content\\\"\\u003E\\u003Cimg\" + (\" class=\\\"comment__author-photo\\\"\"+pug_attr(\"src\", `${author.avatarUrl}`, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"comment__description\\\"\\u003E\\u003Cdiv class=\\\"comment__author-name\\\"\\u003E\" + (pug_escape(null == (pug_interp = author.lastName) ? \"\" : pug_interp)) + \" \" + (pug_escape(null == (pug_interp = author.firstName) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"comment__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = text) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"comment__bottom\\\"\\u003E\\u003Cdiv class=\\\"action-btns\\\"\\u003E\";\nif (isEdited) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"comment__time\\\"\\u003Eизменено \" + (pug_escape(null == (pug_interp = datetime) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"comment__time\\\"\\u003E\" + (pug_escape(null == (pug_interp = datetime) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003Cbutton class=\\\"comment__edit-btn\\\" style=\\\"display: none\\\"\\u003EИзменить\\u003C\\u002Fbutton\\u003E\\u003Cbutton class=\\\"comment__answer-btn\\\"\\u003EОтветить\\u003C\\u002Fbutton\\u003E\\u003Cdiv class=\\\"icon-small action-btns_m-right\\\"\\u003E\\u003Cdiv class=\\\"icon-small__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = likes) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"action-btns__likes-icon icon-small__img\\\"\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"comment__answers\\\"\\u003E\" + (null == (pug_interp = answers) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"answers\" in locals_for_with ?\n        locals_for_with.answers :\n        typeof answers !== 'undefined' ? answers : undefined, \"author\" in locals_for_with ?\n        locals_for_with.author :\n        typeof author !== 'undefined' ? author : undefined, \"datetime\" in locals_for_with ?\n        locals_for_with.datetime :\n        typeof datetime !== 'undefined' ? datetime : undefined, \"isEdited\" in locals_for_with ?\n        locals_for_with.isEdited :\n        typeof isEdited !== 'undefined' ? isEdited : undefined, \"likes\" in locals_for_with ?\n        locals_for_with.likes :\n        typeof likes !== 'undefined' ? likes : undefined, \"text\" in locals_for_with ?\n        locals_for_with.text :\n        typeof text !== 'undefined' ? text : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/reader/comment.pug.js?");

/***/ }),

/***/ "./public/components/reader/reader.js":
/*!********************************************!*\
  !*** ./public/components/reader/reader.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Reader)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _readerView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readerView.js */ \"./public/components/reader/readerView.js\");\n/* harmony import */ var _comment_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./comment.pug.js */ \"./public/components/reader/comment.pug.js\");\n/* harmony import */ var _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../flux/actions/editorActions.js */ \"./public/flux/actions/editorActions.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// TODO:\r\n// import articleAddCommentComponent from './articleAddComment.pug.js';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst changeBtnClickListener = (e) => {\r\n  e.preventDefault();\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().reader;\r\n  const article = state[state.currentId];\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].editArticle(article.id, article));\r\n};\r\n\r\n/**\r\n * Компонент для чтения статей\r\n * @class Reader\r\n */\r\nclass Reader extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Окошко сообщений о состоянии сервиса\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _readerView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.readerTypes.OPEN_ARTICLE, (id) => {\r\n          const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().reader;\r\n          this.openArticle(state[id]);\r\n        }),\r\n\r\n        // Если подгрузили комментарии к текущей статье - отрисовать\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.readerTypes.SAVE_ARTICLE_COMMENTS, ({id, comments}) => {\r\n          if (_flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().reader.currentId === id) {\r\n            this.setComments(comments);\r\n          }\r\n        }),\r\n\r\n        // даем возможность редактирования если статья принадлежит пользователю\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.authorizationTypes.LOGIN, () => {\r\n          const articleChangeBtn =\r\n            this.root.querySelector('#article-change-btn');\r\n          if (!articleChangeBtn) {\r\n            console.warn('{READER} component hasn\\'t been rendered yet');\r\n            return;\r\n          }\r\n          // Берем автора статьи по полю логина в верстке\r\n          const author =\r\n            this.root.querySelector('div.article-view__author > a').textContent;\r\n          if (author === _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization.login) {\r\n            articleChangeBtn.style.display = 'block';\r\n            articleChangeBtn.href = '/editor';\r\n            articleChangeBtn.addEventListener('click', changeBtnClickListener);\r\n          }\r\n        }),\r\n\r\n        // забираем возможность изменения статьи, если пропадает авторизация\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.authorizationTypes.LOGOUT, () => {\r\n          const articleChangeBtn =\r\n            this.root.querySelector('#article-change-btn');\r\n          if (!articleChangeBtn) {\r\n            console.warn('{READER} component hasn\\'t been rendered yet');\r\n            return;\r\n          }\r\n          articleChangeBtn.style.display = 'none';\r\n          articleChangeBtn.href = undefined;\r\n          articleChangeBtn.removeEventListener('click', changeBtnClickListener);\r\n        }),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n\r\n    const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().reader;\r\n    this.root = this.view.render(state[state.currentId]);\r\n    this.root.querySelectorAll('.article-view__tag').forEach((tag) => {\r\n      tag.href = '/categories';\r\n    });\r\n\r\n    addEventListenersToReader(this.root);\r\n\r\n    // пока контент статьи не прогрузился, изменять статью не даем\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n    * Задать содержание статьи\r\n    * @param {Object} article\r\n    * @property {string} title\r\n    * @property {string} text\r\n    * @property {Array<string>} tags\r\n    * @property {string} datetime\r\n    * @property {Object} author\r\n    * @property {number} likes\r\n    * @property {number} comments\r\n    */\r\n  openArticle(article) {\r\n    this.root.innerHTML = '';\r\n    this.view.render(article).childNodes.forEach((node) => {\r\n      this.root.appendChild(node.cloneNode(true));\r\n    });\r\n\r\n    addEventListenersToReader(this.root);\r\n\r\n    this.root.querySelector('#article-change-btn').href =\r\n      '/user/' + article.author.login;\r\n    this.root.querySelectorAll('.article-view__tag').forEach((tag) => {\r\n      tag.href = '/categories';\r\n    });\r\n    const authLogin = _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization.login;\r\n    if (article.author.login === authLogin) {\r\n      const articleChangeBtn = this.root.querySelector('#article-change-btn');\r\n      articleChangeBtn.style.display = 'block';\r\n      articleChangeBtn.href = '/editor';\r\n      articleChangeBtn.addEventListener('click', changeBtnClickListener);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @typedef {Object} Comment\r\n   * @property {string} text\r\n   * @property {string} articleId\r\n   * @property {string} id\r\n   * @property {string} dateTime\r\n   * @property {boolean} isEdited\r\n   * @property {User} author\r\n   */\r\n\r\n  /**\r\n   * @param {Array<Comment>} comments\r\n   */\r\n  setComments(comments) {\r\n    const commentsDiv = this.root.querySelector('#comments');\r\n    comments.forEach((comment) => {\r\n      const commentWrapper = document.createElement('div');\r\n      commentWrapper.innerHTML = (0,_comment_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(comment);\r\n      const commentDiv = commentWrapper.firstChild;\r\n      commentsDiv.appendChild(commentDiv);\r\n\r\n      // активируем кнопку изменения у комментариев, принадлежащих\r\n      // текущему юзеру});\r\n      if (_flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization.login === comment.author.login) {\r\n        const changeBtn = commentDiv.querySelector('.comment__edit-btn');\r\n        changeBtn.style.display = 'block';\r\n        changeBtn.addEventListener('click', (e) => {\r\n          e.preventDefault();\r\n          // рисуем текстовое поле\r\n          const textarea = document.createElement('textarea');\r\n          // TODO: class\r\n          textarea.value = comment.text;\r\n          const changeConfirmBtn = document.createElement('button');\r\n          changeConfirmBtn.textContent = 'Сохранить';\r\n\r\n          changeConfirmBtn.addEventListener('click', (e) => {\r\n            if (textarea.value.trim() === comment.text ||\r\n                textarea.value.trim() === '') {\r\n              return;\r\n            }\r\n            const body = {\r\n              text: textarea.value.trim(),\r\n              // TODO: проверить совместимость типа с сервером\r\n              id: comment.id,  // number\r\n            };\r\n\r\n            let responseStatus = 0;\r\n            _modules_ajax_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].post({url: '/comments/update', body})\r\n                .then(({status, response}) => new Promise((resolve, reject) => {\r\n                  if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].STATUS.ok) {\r\n                    resolve(response.data);\r\n                  } else {\r\n                    responseStatus = status;\r\n                    reject(new Error(response.msg));\r\n                  }\r\n                }))\r\n                .then((newComment) => {\r\n                  commentDiv.innerHTML = (0,_comment_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n                    ...newComment,\r\n                    author: _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization,\r\n                    datetime: (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.getRusDateTime)(\r\n                        (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.translateServerDateToMS)(newComment.dateTime),\r\n                    ),\r\n                  });\r\n                  commentDiv.removeChild(textarea);\r\n                  commentDiv.removeChild(changeConfirmBtn);\r\n                })\r\n                .catch((err) => {\r\n                  if (responseStatus !== 0) {\r\n                    _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].netOrServerError(responseStatus, err.message);\r\n                  } else {\r\n                    console.warn(err.message);\r\n                  }\r\n                });\r\n          });\r\n\r\n          commentDiv.appendChild(textarea);\r\n          commentDiv.appendChild(changeConfirmBtn);\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// TODO: вынести сетевые обработчики на страницу\r\n/**\r\n * Добавление обработчиков\r\n * @param {HTMLDivElement} root\r\n */\r\nfunction addEventListenersToReader(root) {\r\n  // обработчик: добавление комментария\r\n  const commentBtn = root\r\n      .querySelector('.article-view__send-comment-btn');\r\n  commentBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    const comments = root.querySelector('#comments');\r\n    commentAdd(comments);\r\n  });\r\n\r\n  // обработчик: показать комментарии\r\n  const btnShow = root\r\n      .querySelector('.comments-show');\r\n  btnShow.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    commentsShow();\r\n  });\r\n\r\n  // обработчик: ответить на комментарий\r\n  const comments = root\r\n      .querySelectorAll('.comments__comment');\r\n  for (const comment of comments) {\r\n    answerOnComment(comment);\r\n  }\r\n}\r\n\r\n/**\r\n * Добавление комментария\r\n * @param {Element} parent\r\n */\r\nfunction commentAdd(parent) {\r\n  if (!_flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization.isAuthenticated) {\r\n    _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warn(\r\n        'Сначала авторизируйтесь',\r\n        'Чтобы оставить комментарий, выполните вход',\r\n    );\r\n    return;\r\n  }\r\n\r\n  const input = document.querySelector('.article-view__comment-input');\r\n  if (input.value.trim() != '') {\r\n    let responseStatus = 0;\r\n    _modules_ajax_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].post({url: '/comments/create', body: {\r\n      // TODO: поправить чтобы апи возвращал строку\r\n      articleId: parseInt(_flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().reader.currentId, 10),\r\n      parentId: 0,\r\n      text: input.value.trim(),\r\n    }})\r\n        .then(({status, response}) => new Promise((resolve, reject) => {\r\n          if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].STATUS.ok) {\r\n            resolve(response.data);\r\n          } else {\r\n            responseStatus = status;\r\n            reject(new Error(response.msg));\r\n          }\r\n        }))\r\n        .then((newComment) => {\r\n          const comment = (0,_comment_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n            ...newComment,\r\n            author: _flux_store_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getState().authorization,\r\n            datetime: (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.getRusDateTime)(\r\n                (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.translateServerDateToMS)(newComment.dateTime),\r\n            ),\r\n          });\r\n          const commentDiv = document.createElement('div');\r\n          commentDiv.className = 'comments__comment';\r\n          commentDiv.classList.add('comment');\r\n          commentDiv.innerHTML = comment;\r\n          answerOnComment(commentDiv);\r\n          parent.appendChild(commentDiv);\r\n        })\r\n        .catch((err) => {\r\n          if (responseStatus !== 0) {\r\n            _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].netOrServerError(responseStatus, err.message);\r\n          } else {\r\n            console.warn(err.message);\r\n          }\r\n        });\r\n  }\r\n}\r\n\r\n/**\r\n * Показать комментарии\r\n */\r\nfunction commentsShow() {\r\n  let hide = true;\r\n  const comments = document.querySelector('.comments');\r\n  const showBtnText = document.querySelector('.comments-show__text');\r\n  const arrow = document.querySelector('.comments-show__btn');\r\n\r\n  if (arrow.classList.contains('rotate-180')) {\r\n    showBtnText.innerText = 'Показать комментарии';\r\n    arrow.classList.remove('rotate-180');\r\n    hide = true;\r\n  } else {\r\n    showBtnText.innerText = 'Скрыть комментарии';\r\n    arrow.classList.add('rotate-180');\r\n    hide = false;\r\n  }\r\n\r\n  if (hide) {\r\n    comments.classList.add('hide');\r\n  } else {\r\n    comments.classList.remove('hide');\r\n  }\r\n}\r\n\r\n\r\n// TODO:\r\n/**\r\n * Ответить на комментарий\r\n * @param {string} comment\r\n */\r\nfunction answerOnComment(comment) {\r\n  // const answerBtn = comment.querySelector('.comment__answer-btn');\r\n  // answerBtn.addEventListener('click', (e) => {\r\n  //   e.preventDefault();\r\n  //   const answerFieldExist = comment\r\n  //       .querySelector('.article-view__add-comment');\r\n\r\n  //   if (!answerFieldExist) {\r\n  //     const answerField = document.createElement('div');\r\n  //     answerField.innerHTML = articleAddCommentComponent({});\r\n  //     const answerBtn = answerField\r\n  //         .querySelector('.article-view__send-comment-btn');\r\n  //     answerBtn.addEventListener('click', (e) => {\r\n  //       e.preventDefault();\r\n  //       const answers = document.querySelector('.comment__answers');\r\n  //       commentAdd(answers);\r\n  //     });\r\n\r\n  //     comment.appendChild(answerField);\r\n  //   }\r\n  // });\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/reader/reader.js?");

/***/ }),

/***/ "./public/components/reader/readerView.js":
/*!************************************************!*\
  !*** ./public/components/reader/readerView.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ReaderView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _articleReader_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./articleReader.pug.js */ \"./public/components/reader/articleReader.pug.js\");\n\r\n\r\n\r\n/**\r\n * @class ReaderView\r\n */\r\nclass ReaderView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Компонент редактора\r\n   */\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Задать содержание статьи\r\n   * @param {Object} article\r\n   * @property {string} title\r\n   * @property {string} text\r\n   * @property {Array<string>} tags\r\n   * @property {string} datetime\r\n   * @property {Object} author\r\n   * @property {number} likes\r\n   * @property {number} comments\r\n   * @return {HTMLElement}\r\n   */\r\n  render(article) {\r\n    const reader = document.createElement('div');\r\n    reader.innerHTML = (0,_articleReader_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(article);\r\n\r\n    return reader.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/reader/readerView.js?");

/***/ }),

/***/ "./public/components/router.js":
/*!*************************************!*\
  !*** ./public/components/router.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Router)\n/* harmony export */ });\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @class Router\r\n * @module Router\r\n */\r\nclass Router {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    this.routes = {};\r\n    this.routesPatterned = [];\r\n    this.root = root;\r\n    // this.routes.filter = (predicate) =>\r\n    //   Object.keys(this.routes)\r\n    //       .filter( (key) => predicate(this.routes[key]) )\r\n    //       .reduce( (res, key) => (res[key] = this.routes[key], res), {} );\r\n    // this.pageInstances = [];\r\n  }\r\n\r\n  /**\r\n   * @param {string} path\r\n   * @param {BasePageMV} PageClass\r\n   * @return {Router}\r\n   */\r\n  register(path, PageClass) {\r\n    for (const registredPath in this.routes) {\r\n      // Этот инстанс уже был зарегистрирован по другим путем\r\n      if (this.routes[registredPath].PageClass === PageClass) {\r\n        console.warn(`[ROUTER] paths ${registredPath} and ${path} point to ` +\r\n            `the same ${PageClass.name}`);\r\n        // чтобы объект по path и registredPath был одним и тем же\r\n        this.routes[path] = this.routes[registredPath];\r\n        return this;\r\n      }\r\n    }\r\n\r\n    this.routes[path] = {\r\n      PageClass,\r\n      page: null,\r\n      root: null,\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Для url параметров .../path/<param>\r\n   * @param {string} path\r\n   * текст url внутри знаков <> вида <param> не будет проверяться\r\n   * на точное равенство\r\n   * @param {BasePageMV} PageClass\r\n   * @return {Router}\r\n   */\r\n  registerPattern(path, PageClass) {\r\n    path = path.slice(0, path.indexOf('<'));\r\n    this.routesPatterned.push(path);\r\n\r\n    for (const registredPath in this.routes) {\r\n      // Этот инстанс уже был зарегистрирован по другим путем\r\n      if (this.routes[registredPath].PageClass === PageClass) {\r\n        console.warn(`[ROUTER] paths ${registredPath} and ${path} point to ` +\r\n            `the same ${PageClass.name}`);\r\n        // чтобы объект по path и registredPath был одним и тем же\r\n        this.routes[path] = this.routes[registredPath];\r\n        return this;\r\n      }\r\n    }\r\n\r\n    this.routes[path] = {\r\n      PageClass,\r\n      page: null,\r\n      root: null,\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {string} link\r\n   */\r\n  open(link) {\r\n    let path = link;\r\n    // Проверяем, является ли путь шаблонным\r\n    this.routesPatterned.forEach((pattern) => {\r\n      if (path.startsWith(pattern)) {\r\n        console.log(`[ROUTER] ${path} matched pattern ${pattern}`);\r\n        path = pattern;\r\n      }\r\n    });\r\n\r\n    const route = this.routes[path];\r\n\r\n    if (!route) {\r\n      console.warn('[ROUTER] путь', path, 'не зарегистрирован');\r\n      this.open('/');\r\n      return;\r\n    }\r\n\r\n    let {PageClass, page, root} = route;\r\n\r\n    if (!root) {\r\n      root = document.createElement('section');\r\n      root.className = 'view';\r\n      this.root.appendChild(root);\r\n    }\r\n\r\n    if (!page) {\r\n      page = new PageClass(root);\r\n      console.warn('[ROUTER] создал вьюху', page);\r\n    }\r\n\r\n    const redirectRoute = page.redirect(window.location.pathname);\r\n    if (redirectRoute !== '') {\r\n      console.warn('[ROUTER]', page.constructor.name + ' | redirectRoute: ' +\r\n      redirectRoute);\r\n      this.open(redirectRoute);\r\n      this.routes[path] = {PageClass, page, root};\r\n      return;\r\n    }\r\n    if (window.location.pathname !== link) {\r\n      window.history.pushState(\r\n          null,\r\n          '',\r\n          link,\r\n      );\r\n    }\r\n\r\n    console.log('[ROUTER] !page.isActive():', !page.isActive());\r\n    if (!page.isActive()) {\r\n      Object.values(this.routes).forEach(({page}) => {\r\n        if (page && page.isActive()) {\r\n          page.hide();\r\n        }\r\n      });\r\n\r\n      page.show();\r\n    }\r\n\r\n    // сохраняем изменения в объекте не разрушая объекте\r\n    // это важно для сохранения ссылок нескольких\r\n    // путей на одну страницу\r\n    this.routes[path].page = page;\r\n    this.routes[path].root = root;\r\n  }\r\n\r\n  /**\r\n   * Запуск ротуера. Отображение первого элемента, указанного в register()\r\n   */\r\n  start() {\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_1__.routerTypes.REDIRECT, (to) => {\r\n      this.open(to);\r\n    });\r\n\r\n    this.root.addEventListener('click', (event) => {\r\n      const target = event.target;\r\n\r\n      // ставим preventDefault, чтобы предотварить переход по ссылкам,\r\n      // в которых есть вложенные элементы, ведь их href равен href'у ссылки\r\n      // на всех вложенных элементах такой ссылки должен быть указан\r\n      // data=router='ignore'\r\n      // Нет гарантии, что сработает раньше: linkController или Router\r\n      if (!(target instanceof HTMLAnchorElement ||\r\n          target.dataset.router === 'ignore') ||\r\n          target.dataset.router === 'outer') {\r\n        return;\r\n      }\r\n      if (_globals_js__WEBPACK_IMPORTED_MODULE_2__.routerDebug) {\r\n        console.warn('[ROUTER]', {target});\r\n      }\r\n\r\n      event.preventDefault();\r\n      const link = target.pathname || target.parentElement.pathname;\r\n      console.warn('link:', link);\r\n\r\n      if (_globals_js__WEBPACK_IMPORTED_MODULE_2__.routerDebug) {\r\n        console.log({pathname: link || '[ROUTER] empty path (ignored)'});\r\n      }\r\n\r\n      if (!link) {\r\n        return;\r\n      }\r\n\r\n      this.open(link);\r\n    });\r\n\r\n    window.addEventListener('popstate', () => {\r\n      const currentPath = window.location.pathname;\r\n      this.open(currentPath);\r\n    });\r\n\r\n    const currentPath = window.location.pathname;\r\n    console.log('[ROUTER] start page:', currentPath);\r\n    this.open(currentPath);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/router.js?");

/***/ }),

/***/ "./public/components/settings/formSettingsRow.pug.js":
/*!***********************************************************!*\
  !*** ./public/components/settings/formSettingsRow.pug.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ formSettingsRowComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            formSettingsRowComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (label, name, pattern, placeholder, required, type) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"settings__row\\\"\\u003E\\u003Cdiv class=\\\"settings__label\\\"\\u003E\" + (pug_escape(null == (pug_interp = label) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"settings__field\\\"\\u003E\";\nif (placeholder != undefined && pattern != undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern != undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern == undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern == undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern != undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern != undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern == undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern == undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"label\" in locals_for_with ?\n        locals_for_with.label :\n        typeof label !== 'undefined' ? label : undefined, \"name\" in locals_for_with ?\n        locals_for_with.name :\n        typeof name !== 'undefined' ? name : undefined, \"pattern\" in locals_for_with ?\n        locals_for_with.pattern :\n        typeof pattern !== 'undefined' ? pattern : undefined, \"placeholder\" in locals_for_with ?\n        locals_for_with.placeholder :\n        typeof placeholder !== 'undefined' ? placeholder : undefined, \"required\" in locals_for_with ?\n        locals_for_with.required :\n        typeof required !== 'undefined' ? required : undefined, \"type\" in locals_for_with ?\n        locals_for_with.type :\n        typeof type !== 'undefined' ? type : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/settings/formSettingsRow.pug.js?");

/***/ }),

/***/ "./public/components/settings/formSettingsTextarea.pug.js":
/*!****************************************************************!*\
  !*** ./public/components/settings/formSettingsTextarea.pug.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ formSettingsTextareaComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            formSettingsTextareaComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (label, name, placeholder) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"settings__row\\\"\\u003E\\u003Cdiv class=\\\"settings__label\\\"\\u003E\" + (pug_escape(null == (pug_interp = label) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"settings__field\\\"\\u003E\\u003Ctextarea\" + (\" class=\\\"settings__input\\\"\"+pug_attr(\"name\", `${name}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = placeholder || '') ? \"\" : pug_interp)) + \"\\u003C\\u002Ftextarea\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"label\" in locals_for_with ?\n        locals_for_with.label :\n        typeof label !== 'undefined' ? label : undefined, \"name\" in locals_for_with ?\n        locals_for_with.name :\n        typeof name !== 'undefined' ? name : undefined, \"placeholder\" in locals_for_with ?\n        locals_for_with.placeholder :\n        typeof placeholder !== 'undefined' ? placeholder : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/settings/formSettingsTextarea.pug.js?");

/***/ }),

/***/ "./public/components/settings/settings.pug.js":
/*!****************************************************!*\
  !*** ./public/components/settings/settings.pug.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ settingsComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            settingsComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (form_rows, other_page_href, other_page_name) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"settings\\\"\\u003E\\u003Cdiv class=\\\"settings__links\\\"\\u003E\\u003Ca\" + (\" class=\\\"settings__other-page\\\"\"+pug_attr(\"href\", `${other_page_href}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = other_page_name) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cform class=\\\"settings__form\\\"\\u003E\\u003Cdiv class=\\\"settings__rows\\\"\\u003E\" + (null == (pug_interp = form_rows) ? \"\" : pug_interp) + \"\\u003Cdiv class=\\\"settings__row\\\"\\u003E\\u003Cdiv class=\\\"settings__label\\\" id=\\\"settings-warning-label\\\" style=\\\"color: transparent;\\\"\\u003E|\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"settings__field\\\"\\u003E\\u003Cdiv class=\\\"settings__input settings__warning\\\"\\u003EПоля заполнены неверно\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"settings__footer\\\"\\u003E\\u003Cinput class=\\\"btn_color-elementary\\\" type=\\\"submit\\\" name=\\\"btn-submit\\\" value=\\\"Сохранить\\\"\\u002F\\u003E\\u003Ca href=\\\"\\u002F\\\"\\u003E\\u003Cinput class=\\\"btn_color-elementary\\\" data-router=\\\"ignore\\\" type=\\\"button\\\" value=\\\"Назад\\\"\\u002F\\u003E\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fform\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"form_rows\" in locals_for_with ?\n        locals_for_with.form_rows :\n        typeof form_rows !== 'undefined' ? form_rows : undefined, \"other_page_href\" in locals_for_with ?\n        locals_for_with.other_page_href :\n        typeof other_page_href !== 'undefined' ? other_page_href : undefined, \"other_page_name\" in locals_for_with ?\n        locals_for_with.other_page_name :\n        typeof other_page_name !== 'undefined' ? other_page_name : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/settings/settings.pug.js?");

/***/ }),

/***/ "./public/components/settings/settingsForm.js":
/*!****************************************************!*\
  !*** ./public/components/settings/settingsForm.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SettingsForm)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _settingsFormView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settingsFormView.js */ \"./public/components/settings/settingsFormView.js\");\n\r\n\r\n\r\n/**\r\n * @class SettingsForm\r\n */\r\nclass SettingsForm extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент заголовка\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _settingsFormView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n\r\n    this.root = this.view.render();\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * Показать предупреждение в окне ошибок\r\n   * @param {string} msg\r\n   */\r\n  appendWarning(msg) {\r\n    const formWarning = this.root.querySelector('.settings__warning');\r\n    if (!formWarning) {\r\n      console.warn(`[SignupFormView]\r\n        appendWarning call while SignupForm was not rendered`);\r\n    }\r\n    formWarning.style.display = 'block';\r\n    formWarning.textContent = msg;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/settings/settingsForm.js?");

/***/ }),

/***/ "./public/components/settings/settingsFormView.js":
/*!********************************************************!*\
  !*** ./public/components/settings/settingsFormView.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SettingsFormView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _settings_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings.pug.js */ \"./public/components/settings/settings.pug.js\");\n/* harmony import */ var _formSettingsTextarea_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formSettingsTextarea.pug.js */ \"./public/components/settings/formSettingsTextarea.pug.js\");\n/* harmony import */ var _formSettingsRow_pug_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./formSettingsRow.pug.js */ \"./public/components/settings/formSettingsRow.pug.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class SettingsFormView\r\n */\r\nclass SettingsFormView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n    * @return {HTMLElement}\r\n    */\r\n  render() {\r\n    let settingsRows = '';\r\n    const username = (0,_formSettingsRow_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      label: 'Имя',\r\n      type: 'text',\r\n      name: 'username',\r\n    });\r\n    settingsRows += username;\r\n    const surname = (0,_formSettingsRow_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      label: 'Фамилия',\r\n      type: 'text',\r\n      name: 'surname',\r\n    });\r\n    settingsRows += surname;\r\n    const description = (0,_formSettingsTextarea_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n      label: 'О себе',\r\n      name: 'description',\r\n    });\r\n    settingsRows += description;\r\n    const photo = (0,_formSettingsRow_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      label: 'Фото',\r\n      type: 'file',\r\n      name: 'photo',\r\n      placeholder: 'Загрузите фото',\r\n    });\r\n    settingsRows += photo;\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_settings_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n      other_page_name: 'сменить пароль',\r\n      other_page_href: '',\r\n      form_rows: settingsRows,\r\n    });\r\n    return wrapper.firstChild;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/settings/settingsFormView.js?");

/***/ }),

/***/ "./public/components/sidebar/buttonNav.pug.js":
/*!****************************************************!*\
  !*** ./public/components/sidebar/buttonNav.pug.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ buttonNavComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            buttonNavComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (data, data_section, href, name, section) {\n      if ((href != undefined && data-section != undefined)) {\npug_html = pug_html + \"\\u003Ca\" + (\" class=\\\"sidebar__nav-item\\\"\"+pug_attr(\"href\", `${href}`, true, false)+pug_attr(\"data-section\", `${data_section}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = name) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\";\n}\nif ((href == undefined && data-section != undefined)) {\npug_html = pug_html + \"\\u003Ca\" + (\" class=\\\"sidebar__nav-item\\\"\"+pug_attr(\"data-section\", `${data_section}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = name) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\";\n}\nif ((href != undefined && data-section == undefined)) {\npug_html = pug_html + \"\\u003Ca\" + (\" class=\\\"sidebar__nav-item\\\"\"+pug_attr(\"href\", `${href}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = name) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\";\n}\n    }.call(this, \"data\" in locals_for_with ?\n        locals_for_with.data :\n        typeof data !== 'undefined' ? data : undefined, \"data_section\" in locals_for_with ?\n        locals_for_with.data_section :\n        typeof data_section !== 'undefined' ? data_section : undefined, \"href\" in locals_for_with ?\n        locals_for_with.href :\n        typeof href !== 'undefined' ? href : undefined, \"name\" in locals_for_with ?\n        locals_for_with.name :\n        typeof name !== 'undefined' ? name : undefined, \"section\" in locals_for_with ?\n        locals_for_with.section :\n        typeof section !== 'undefined' ? section : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/buttonNav.pug.js?");

/***/ }),

/***/ "./public/components/sidebar/sidebar.js":
/*!**********************************************!*\
  !*** ./public/components/sidebar/sidebar.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Sidebar)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _sidebarView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sidebarView.js */ \"./public/components/sidebar/sidebarView.js\");\n/* harmony import */ var _userPreview_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./userPreview.pug.js */ \"./public/components/sidebar/userPreview.pug.js\");\n/* harmony import */ var _buttonNav_pug_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buttonNav.pug.js */ \"./public/components/sidebar/buttonNav.pug.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../flux/actions/editorActions.js */ \"./public/flux/actions/editorActions.js\");\n/* harmony import */ var _common_categoriesList_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/categoriesList.js */ \"./public/common/categoriesList.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst displayedDefaultLimit = 6;\r\n\r\n/**\r\n * ViewModel-компонент соответсвующего View\r\n * @class Sidebar\r\n */\r\nclass Sidebar extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент заголовка\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.view = new _sidebarView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.authorizationTypes.LOGIN, () => {\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].dispatch(\r\n              (dispatch, getState) => dispatch(\r\n                  _flux_actions_js__WEBPACK_IMPORTED_MODULE_5__.mainPageActions.toggleLogin(true,\r\n                      getState().authorization.login),\r\n              ));\r\n          this.setSidebarUserPreview();\r\n        }),\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.authorizationTypes.LOGOUT, () => {\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_5__.mainPageActions.toggleLogin(false, ''));\r\n          this.setSidebarSignupButtons();\r\n        }));\r\n\r\n    this.unsubscribes.push(\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_6__.streamTypes.SAVE_NEW_COMMENTS, (comments) => {\r\n          this.addComments(comments);\r\n        }),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getState().authorization;\r\n\r\n    let topBlockContent = '';\r\n    if (!state.isAuthenticated) {\r\n      topBlockContent += (0,_buttonNav_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n        data_section: 'loginModal',\r\n        name: 'Логин',\r\n      });\r\n      topBlockContent += (0,_buttonNav_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n        data_section: 'signupModal',\r\n        name: 'Регистрация',\r\n      });\r\n    } else {\r\n      topBlockContent = (0,_userPreview_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n        login: state.login,\r\n        avatarUrl: state.avatarUrl,\r\n      });\r\n    }\r\n    const comments = [..._flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getState().stream.comments].reverse();\r\n    this.root = this.view.render(\r\n        topBlockContent,\r\n        _common_categoriesList_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\r\n        displayedDefaultLimit,\r\n        comments,\r\n    );\r\n    this.view.root.querySelector('a.sidebar__nav-item').addEventListener(\r\n        'click',\r\n        () => _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].dispatch(_flux_actions_editorActions_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createArticle()),\r\n    );\r\n\r\n    const categoryItems = this.view.root\r\n        .querySelectorAll('.sidebar__categories-item');\r\n    const categoryMore = this.view.root\r\n        .querySelector('.sidebar__categories-more-btn');\r\n    const moreText = this.view.root\r\n        .querySelector('.sidebar__categories-more-text');\r\n\r\n    categoriesMore(categoryItems, categoryMore, moreText);\r\n\r\n    this.view.root.querySelector('.sidebar__categories-more')\r\n        .addEventListener('click', (e) => {\r\n          e.preventDefault();\r\n          categoriesMore(categoryItems, categoryMore, moreText);\r\n        });\r\n\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * Заполнить верхний блок сайдбара именем и\r\n   * аватаркой пользователя, кнопкой \"новая запись\"\r\n   */\r\n  setSidebarUserPreview() {\r\n    const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getState().authorization;\r\n    this.view.setTopBlockContent((0,_userPreview_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(state));\r\n  }\r\n\r\n  /**\r\n   * Заполнить верхний блок сайдбара кнопками \"войти / зарегистрироваться\"\r\n   */\r\n  setSidebarSignupButtons() {\r\n    let topBlockContent = (0,_buttonNav_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      data_section: 'loginModal',\r\n      name: 'Логин',\r\n    });\r\n    topBlockContent += (0,_buttonNav_pug_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\r\n      data_section: 'signupModal',\r\n      name: 'Регистрация',\r\n    });\r\n    this.view.setTopBlockContent(topBlockContent);\r\n  }\r\n\r\n  /**\r\n   * @param {Array<Comment>} comments\r\n   */\r\n  addComments(comments) {\r\n    this.view.addComments(comments);\r\n  }\r\n}\r\n\r\n/**\r\n * Показать больше категорий\r\n * @param {string} categoryItems\r\n * @param {string} arrow\r\n * @param {string} moreBtn\r\n */\r\nfunction categoriesMore(categoryItems, arrow, moreBtn) {\r\n  let hide = true;\r\n\r\n  if (arrow.classList.contains('rotate-180')) {\r\n    moreBtn.innerText = 'Показать ещё';\r\n    arrow.classList.remove('rotate-180');\r\n    hide = true;\r\n  } else {\r\n    moreBtn.innerText = 'Скрыть';\r\n    arrow.classList.add('rotate-180');\r\n    hide = false;\r\n  }\r\n\r\n  for (let i = displayedDefaultLimit; i < categoryItems.length; ++i) {\r\n    if (!hide) {\r\n      categoryItems[i].style.display = 'block';\r\n    } else {\r\n      categoryItems[i].style.display = 'none';\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/sidebar.js?");

/***/ }),

/***/ "./public/components/sidebar/sidebar.pug.js":
/*!**************************************************!*\
  !*** ./public/components/sidebar/sidebar.pug.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ sidebarComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            sidebarComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (Array, categoriesList, limit, streams, topBlockContent) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar\\\"\\u003E\\u003Cdiv class=\\\"sidebar__nav-links\\\"\\u003E\\u003Ca class=\\\"sidebar__nav-item\\\" href=\\\"\\u002Feditor\\\"\\u003EДобавить  \\u003Cbr\\u002F\\u003Eзапись\\u003C\\u002Fa\\u003E\\u003Cdiv class=\\\"sidebar__nav-buttons\\\" id=\\\"sidebarTopBlockContent\\\"\\u003E\" + (null == (pug_interp = topBlockContent) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"sidebar__content\\\"\\u003E\\u003Cdiv class=\\\"sidebar__categories\\\"\\u003E\\u003Cdiv class=\\\"sidebar__categories-title sidebar__item\\\"\\u003EКомментарии\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"sidebar__streams\\\"\\u003E\" + (null == (pug_interp = streams) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"sidebar__categories-title sidebar__item\\\"\\u003E\\u003Ca href=\\\"\\u002Fcategories\\\"\\u003EКатегории\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\nif (Array.isArray(categoriesList)) {\n// iterate categoriesList\n;(function(){\n  var $$obj = categoriesList;\n  if ('number' == typeof $$obj.length) {\n      for (var idx = 0, $$l = $$obj.length; idx < $$l; idx++) {\n        var category = $$obj[idx];\nif ((idx < limit)) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar__categories-item sidebar__item\\\"\\u003E\\u003Ca\" + (pug_attr(\"href\", `/categories/${category}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar__categories-item sidebar__item\\\" style=\\\"display: none\\\"\\u003E\\u003Ca\" + (pug_attr(\"href\", `/categories/${category}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\n      }\n  } else {\n    var $$l = 0;\n    for (var idx in $$obj) {\n      $$l++;\n      var category = $$obj[idx];\nif ((idx < limit)) {\npug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar__categories-item sidebar__item\\\"\\u003E\\u003Ca\" + (pug_attr(\"href\", `/categories/${category}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\nelse {\npug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar__categories-item sidebar__item\\\" style=\\\"display: none\\\"\\u003E\\u003Ca\" + (pug_attr(\"href\", `/categories/${category}`, true, false)) + \"\\u003E\" + (pug_escape(null == (pug_interp = category) ? \"\" : pug_interp)) + \"\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003Cdiv class=\\\"sidebar__categories-more sidebar__item\\\"\\u003E\\u003Cdiv class=\\\"sidebar__categories-more-text\\\"\\u003EПоказать ещё\\u003C\\u002Fdiv\\u003E\\u003Cbutton class=\\\"action-btns__arrow-icon icon-small__img sidebar__categories-more-btn rotate-180\\\"\\u003E\\u003C\\u002Fbutton\\u003E\\u003C\\u002Fdiv\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"sidebar-bottom_right\\\"\\u003E\\u003Cdiv class=\\\"contacts\\\"\\u003E\\u003Cdiv class=\\\"contacts__title\\\"\\u003EКонтакты\\u003C\\u002Fdiv\\u003E\\u003Ca class=\\\"contacts__developer\\\" data-router=\\\"outer\\\" target=\\\"_blank\\\" href=\\\"https:\\u002F\\u002Fgithub.com\\u002Fyurij-lyubskij\\\"\\u003EЮра\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"contacts__developer\\\" data-router=\\\"outer\\\" target=\\\"_blank\\\" href=\\\"https:\\u002F\\u002Fgithub.com\\u002FSvetlanlka\\\"\\u003EСвета\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"contacts__developer\\\" data-router=\\\"outer\\\" target=\\\"_blank\\\" href=\\\"https:\\u002F\\u002Fgithub.com\\u002FDenactive\\\"\\u003EДенис\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"contacts__developer\\\" data-router=\\\"outer\\\" target=\\\"_blank\\\" href=\\\"https:\\u002F\\u002Fgithub.com\\u002FMollenAR\\\"\\u003EЛёша\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"Array\" in locals_for_with ?\n        locals_for_with.Array :\n        typeof Array !== 'undefined' ? Array : undefined, \"categoriesList\" in locals_for_with ?\n        locals_for_with.categoriesList :\n        typeof categoriesList !== 'undefined' ? categoriesList : undefined, \"limit\" in locals_for_with ?\n        locals_for_with.limit :\n        typeof limit !== 'undefined' ? limit : undefined, \"streams\" in locals_for_with ?\n        locals_for_with.streams :\n        typeof streams !== 'undefined' ? streams : undefined, \"topBlockContent\" in locals_for_with ?\n        locals_for_with.topBlockContent :\n        typeof topBlockContent !== 'undefined' ? topBlockContent : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/sidebar.pug.js?");

/***/ }),

/***/ "./public/components/sidebar/sidebarView.js":
/*!**************************************************!*\
  !*** ./public/components/sidebar/sidebarView.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SidebarView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _sidebar_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sidebar.pug.js */ \"./public/components/sidebar/sidebar.pug.js\");\n/* harmony import */ var _streamComment_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./streamComment.pug.js */ \"./public/components/sidebar/streamComment.pug.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @class sidebarView\r\n */\r\nclass SidebarView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Полоса интерфейса справа от основного контента страницы\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.root = document.createElement('div');\r\n  }\r\n\r\n  /**\r\n    * @param {string} topBlockContent - вид верхнего блока\r\n    * @param {string} categoriesList\r\n    * @param {string} limit\r\n    * @param {Array<Comment>} comments\r\n    * @return {HTMLElement}\r\n    */\r\n  render(topBlockContent, categoriesList, limit, comments) {\r\n    let streams = '';\r\n    comments.forEach((element) => {\r\n      const streamComment = (0,_streamComment_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\r\n      streams += streamComment;\r\n    });\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = (0,_sidebar_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n      topBlockContent,\r\n      categoriesList,\r\n      limit,\r\n      streams,\r\n    });\r\n\r\n    this.root = wrapper.firstChild;\r\n    return this.root;\r\n  }\r\n\r\n  /**\r\n   * Заполнить верхний блок сайдбара произвольным HTML\r\n   * @param {string} topBlockContent - вид верхнего блока\r\n   */\r\n  setTopBlockContent(topBlockContent) {\r\n    const contentDiv = this.root.querySelector('#sidebarTopBlockContent');\r\n    if (contentDiv) {\r\n      contentDiv.innerHTML = topBlockContent;\r\n    } else {\r\n      this.render(topBlockContent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Array<Comment>} comments\r\n   */\r\n  addComments(comments) {\r\n    const streamComments = this.root.querySelector('.sidebar__streams');\r\n    comments.forEach((element) => {\r\n      const streamComment = (0,_streamComment_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\r\n      streamComments.insertAdjacentHTML('afterbegin', streamComment);\r\n    });\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/sidebarView.js?");

/***/ }),

/***/ "./public/components/sidebar/streamComment.pug.js":
/*!********************************************************!*\
  !*** ./public/components/sidebar/streamComment.pug.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ streamCommentComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            streamCommentComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (author, id, text) {\n      pug_html = pug_html + \"\\u003Cdiv\" + (\" class=\\\"stream-comment\\\"\"+pug_attr(\"id\", `${id}`, true, false)) + \"\\u003E\\u003Cdiv class=\\\"stream-comment__author\\\"\\u003E\\u003Cimg\" + (\" class=\\\"stream-comment__author-photo\\\"\"+pug_attr(\"src\", `${author.avatarUrl}`, true, false)) + \"\\u002F\\u003E\\u003Cdiv class=\\\"stream-comment__author-name\\\"\\u003E\" + (pug_escape(null == (pug_interp = author.firstName) ? \"\" : pug_interp)) + \" \" + (pug_escape(null == (pug_interp = author.lastName) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"stream-comment__text\\\"\\u003E\" + (pug_escape(null == (pug_interp = text) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"author\" in locals_for_with ?\n        locals_for_with.author :\n        typeof author !== 'undefined' ? author : undefined, \"id\" in locals_for_with ?\n        locals_for_with.id :\n        typeof id !== 'undefined' ? id : undefined, \"text\" in locals_for_with ?\n        locals_for_with.text :\n        typeof text !== 'undefined' ? text : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/streamComment.pug.js?");

/***/ }),

/***/ "./public/components/sidebar/userPreview.pug.js":
/*!******************************************************!*\
  !*** ./public/components/sidebar/userPreview.pug.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ userPreviewComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            userPreviewComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (avatarUrl, login) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"user-preview\\\"\\u003E\\u003Ca class=\\\"user-preview__links\\\" href=\\\"\\u002Fprofile\\\"\\u003E\\u003Cdiv class=\\\"sidebar__nav-item\\\" data-router=\\\"ignore\\\"\\u003E\" + (pug_escape(null == (pug_interp = login) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cimg\" + (\" class=\\\"user-img user-preview__user-img\\\"\"+pug_attr(\"src\", `${avatarUrl}`, true, false)+\" data-router=\\\"ignore\\\"\") + \"\\u002F\\u003E\\u003C\\u002Fa\\u003E\\u003Cdiv class=\\\"profile-menu\\\"\\u003E\\u003Ca class=\\\"profile-menu__item\\\" href=\\\"\\u002Fprofile\\u002Fsettings\\\"\\u003EНастройки\\u003C\\u002Fa\\u003E\\u003Ca class=\\\"profile-menu__item\\\" data-section=\\\"logout\\\"\\u003EВыйти\\u003C\\u002Fa\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"avatarUrl\" in locals_for_with ?\n        locals_for_with.avatarUrl :\n        typeof avatarUrl !== 'undefined' ? avatarUrl : undefined, \"login\" in locals_for_with ?\n        locals_for_with.login :\n        typeof login !== 'undefined' ? login : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/sidebar/userPreview.pug.js?");

/***/ }),

/***/ "./public/components/signupForm/formRow.pug.js":
/*!*****************************************************!*\
  !*** ./public/components/signupForm/formRow.pug.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ formRowComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            formRowComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (eye, label, name, pattern, placeholder, required, type) {\n      pug_html = pug_html + \"\\u003Cdiv class=\\\"form__row\\\"\\u003E\\u003Cdiv class=\\\"form__label\\\"\\u003E\" + (pug_escape(null == (pug_interp = label) ? \"\" : pug_interp)) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"form__field\\\"\\u003E\";\nif (placeholder != undefined && pattern != undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern != undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern == undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"placeholder\", `${placeholder}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder != undefined && pattern == undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern != undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern != undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"pattern\", `${pattern}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern == undefined && required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+pug_attr(\"required\", `${required}`, true, false)) + \"\\u002F\\u003E\";\n}\nif (placeholder == undefined && pattern == undefined && !required) {\npug_html = pug_html + \"\\u003Cinput\" + (\" class=\\\"form__input\\\"\"+pug_attr(\"type\", `${type}`, true, false)+pug_attr(\"name\", `${name}`, true, false)+\"\") + \"\\u002F\\u003E\";\n}\nif (eye == true) {\npug_html = pug_html + \"\\u003Ca class=\\\"password__control-btn control-password\\\"\\u003E\\u003C\\u002Fa\\u003E\";\n}\npug_html = pug_html + \"\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\";\n    }.call(this, \"eye\" in locals_for_with ?\n        locals_for_with.eye :\n        typeof eye !== 'undefined' ? eye : undefined, \"label\" in locals_for_with ?\n        locals_for_with.label :\n        typeof label !== 'undefined' ? label : undefined, \"name\" in locals_for_with ?\n        locals_for_with.name :\n        typeof name !== 'undefined' ? name : undefined, \"pattern\" in locals_for_with ?\n        locals_for_with.pattern :\n        typeof pattern !== 'undefined' ? pattern : undefined, \"placeholder\" in locals_for_with ?\n        locals_for_with.placeholder :\n        typeof placeholder !== 'undefined' ? placeholder : undefined, \"required\" in locals_for_with ?\n        locals_for_with.required :\n        typeof required !== 'undefined' ? required : undefined, \"type\" in locals_for_with ?\n        locals_for_with.type :\n        typeof type !== 'undefined' ? type : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/signupForm/formRow.pug.js?");

/***/ }),

/***/ "./public/components/signupForm/signupForm.js":
/*!****************************************************!*\
  !*** ./public/components/signupForm/signupForm.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignupForm)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _signupFormView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signupFormView.js */ \"./public/components/signupForm/signupFormView.js\");\n/* harmony import */ var _modal_modal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modal/modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/actions.js */ \"./public/flux/actions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Возвращает метод отправки звпроса на вход или регистрацию\r\n * В случае неудачи, вызывается renderError\r\n * @param {Function} renderError\r\n * @return {Function}\r\n */\r\nfunction wrapSubmitHandler(renderError) {\r\n  return function(showRegister, login, password, email) {\r\n    _modules_ajax_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post({\r\n      url: showRegister ? '/user/signup' : '/user/login',\r\n      // TODO: encryption\r\n      body: {\r\n        login,\r\n        email: email || '',\r\n        password,\r\n      },\r\n    })\r\n        .then(\r\n            ({status, response}) => {\r\n              if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].STATUS.ok) {\r\n                _flux_store_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_5__.authorizationActions.login(response.data));\r\n                _modal_modal_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].close();\r\n                return;\r\n              }\r\n\r\n              renderError(response.msg);\r\n            });\r\n  };\r\n}\r\n\r\n/**\r\n * ViewModel-компонент соответсвующего View\r\n * @class SignupForm\r\n */\r\nclass SignupForm extends _basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Универсальный компонент заголовка\r\n   * @param {boolean} showRegister форма регистрации / форма входа\r\n   */\r\n  constructor(showRegister) {\r\n    super();\r\n    this.view = new _signupFormView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n    this.showRegister = showRegister;\r\n  }\r\n\r\n  /**\r\n   * Перерисовка подконтрольного элемента\r\n   * @return {HTMLElement}\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root = this.view.render(\r\n        this.showRegister,\r\n        wrapSubmitHandler(this.view.appendWarning),\r\n    );\r\n    return this.root;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/signupForm/signupForm.js?");

/***/ }),

/***/ "./public/components/signupForm/signupForm.pug.js":
/*!********************************************************!*\
  !*** ./public/components/signupForm/signupForm.pug.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ signupFormComponent)\n/* harmony export */ });\nfunction pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_match_html=/[\"&<>]/;function x(){};\n\nfunction \n            signupFormComponent(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;;\n    var locals_for_with = (locals || {});\n    \n    (function (form_rows, submit_btn_placeholder) {\n      pug_html = pug_html + \"\\u003Cform class=\\\"modal__form form\\\"\\u003E\\u003Cdiv class=\\\"form__rows\\\"\\u003E\" + (null == (pug_interp = form_rows) ? \"\" : pug_interp) + \"\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"form__row\\\"\\u003E\\u003Cdiv class=\\\"form__label\\\" id=\\\"form-warning-label\\\" style=\\\"display: none; color: transparent;\\\"\\u003E|\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"form__input form__warning\\\"\\u003EПоля заполнены неверно\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fdiv\\u003E\\u003Cdiv class=\\\"form__row\\\"\\u003E\\u003Cdiv class=\\\"form__label\\\" style=\\\"color: transparent;\\\"\\u003E|\\u003C\\u002Fdiv\\u003E\\u003Cinput\" + (\" class=\\\"form__input form__submit-btn\\\"\"+\" type=\\\"submit\\\" name=\\\"btn-submit\\\"\"+pug_attr(\"value\", `${submit_btn_placeholder}`, true, false)) + \"\\u002F\\u003E\\u003C\\u002Fdiv\\u003E\\u003C\\u002Fform\\u003E\";\n    }.call(this, \"form_rows\" in locals_for_with ?\n        locals_for_with.form_rows :\n        typeof form_rows !== 'undefined' ? form_rows : undefined, \"submit_btn_placeholder\" in locals_for_with ?\n        locals_for_with.submit_btn_placeholder :\n        typeof submit_btn_placeholder !== 'undefined' ? submit_btn_placeholder : undefined));\n    ;;return pug_html;}\n\n//# sourceURL=webpack://saber_project/./public/components/signupForm/signupForm.pug.js?");

/***/ }),

/***/ "./public/components/signupForm/signupFormView.js":
/*!********************************************************!*\
  !*** ./public/components/signupForm/signupFormView.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignupFormView)\n/* harmony export */ });\n/* harmony import */ var _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_basic/baseComponentView.js */ \"./public/components/_basic/baseComponentView.js\");\n/* harmony import */ var _signupForm_pug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signupForm.pug.js */ \"./public/components/signupForm/signupForm.pug.js\");\n/* harmony import */ var _formRow_pug_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formRow.pug.js */ \"./public/components/signupForm/formRow.pug.js\");\n/* harmony import */ var _common_regexp_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/regexp.js */ \"./public/common/regexp.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class SignupFormView\r\n */\r\nclass SignupFormView extends _basic_baseComponentView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * Изменяемый элемент\r\n   */\r\n  constructor() {\r\n    super();\r\n    this.root = document.createElement('div');\r\n    this.appendWarning = (msg) => {\r\n      const formWarning = this.root.querySelector('.form__warning');\r\n      const formWarningLabel = this.root.querySelector('#form-warning-label');\r\n      if (!formWarning) {\r\n        console.warn(`[SignupFormView]\r\n          appendWarning call while SignupForm was not rendered`);\r\n      }\r\n      formWarningLabel.style.display = 'block';\r\n      formWarning.style.display = 'block';\r\n      formWarning.textContent = msg;\r\n    };\r\n  }\r\n\r\n\r\n  /**\r\n   * Содает форму регистрации\r\n   * @param {boolean} showRegister - true, если нужно отобразить\r\n   * форму для регистрации, false - для входа\r\n   * @param {Function} submitHandler\r\n   * @return {HTMLFormElement}\r\n   */\r\n  render(showRegister, submitHandler) {\r\n    let formRows = '';\r\n\r\n    const loginRow = (0,_formRow_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n      label: 'Логин',\r\n      type: 'text',\r\n      name: 'login',\r\n      required: true,\r\n    });\r\n    formRows += loginRow;\r\n\r\n    if (showRegister) {\r\n      const emailRow = (0,_formRow_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n        label: 'e-mail',\r\n        type: 'email',\r\n        name: 'email',\r\n        required: true,\r\n      });\r\n      formRows += emailRow;\r\n    }\r\n\r\n    const passwordRow = (0,_formRow_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n      label: 'Пароль',\r\n      type: 'password',\r\n      name: 'password',\r\n      required: true,\r\n      eye: true,\r\n    });\r\n    formRows += passwordRow;\r\n\r\n    if (showRegister) {\r\n      const passwordRepeatRow = (0,_formRow_pug_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\r\n        label: 'Повтор пароля',\r\n        type: 'password',\r\n        name: 'password-repeat',\r\n        required: true,\r\n        eye: false,\r\n      });\r\n      formRows += passwordRepeatRow;\r\n    }\r\n\r\n    const formWrapper = document.createElement('div');\r\n    formWrapper.innerHTML = (0,_signupForm_pug_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\r\n      title: showRegister ? 'Регистрация' : 'Вход',\r\n      form_rows: formRows,\r\n      submit_btn_placeholder: showRegister ? 'Зарегистрироваться' : 'Войти',\r\n    });\r\n    const form = formWrapper.firstChild;\r\n\r\n    form.querySelector('.control-password').addEventListener('click',\r\n        ({target}) => {\r\n          const passwordInput = form.querySelector('input[name=\"password\"]');\r\n          if (passwordInput.getAttribute('type') === 'password') {\r\n            target.classList.add('password__show');\r\n            passwordInput.type = 'text';\r\n          } else {\r\n            target.classList.remove('password__show');\r\n            passwordInput.type ='password';\r\n          }\r\n        });\r\n\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      // убираем сообщения об ошибках от предыдущих попыток\r\n      const formWarning = form.querySelector('.form__warning');\r\n      const formWarningLabel = this.root.querySelector('#form-warning-label');\r\n      formWarning.style.display = 'none';\r\n      formWarning.textContent = '';\r\n      formWarningLabel.style.display = 'none';\r\n\r\n      const login = form.querySelector('input[name=\"login\"]').value;\r\n      const password = form.querySelector('input[name=\"password\"]').value;\r\n      const emailInput = form.querySelector('input[name=\"email\"]');\r\n      const email = emailInput?.value;\r\n      const passRepInput = form.querySelector('input[name=\"password-repeat\"]');\r\n      const passwordRepeated = passRepInput?.value;\r\n\r\n      if (!_common_regexp_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].login.test(login)) {\r\n        formWarning.style.display = 'block';\r\n        formWarningLabel.style.display = 'block';\r\n        formWarning.textContent = 'Логин - это латинские буквы, цифры и' +\r\n            'нижнее подчеркивание (_). Длина логина - от 4 до 20 символов';\r\n        return;\r\n      }\r\n\r\n      if (!_common_regexp_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].password.test(password)) {\r\n        formWarning.style.display = 'block';\r\n        formWarningLabel.style.display = 'block';\r\n        formWarning.textContent = 'В качестве пароля используйте любую ' +\r\n            'комбинацию непробельных символы длиной более 8';\r\n        return;\r\n      }\r\n\r\n      // если пароли не совпадают\r\n      if (showRegister && passwordRepeated !== password) {\r\n        formWarning.style.display = 'block';\r\n        formWarningLabel.style.display = 'block';\r\n        formWarning.textContent = 'Удостоверьтесь, что пароли совпадают';\r\n        return;\r\n      }\r\n      // Пустые значения не пропускаются благодаря свойству required\r\n      submitHandler(showRegister, login, password, email);\r\n    });\r\n\r\n    this.root = form;\r\n    return form;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/components/signupForm/signupFormView.js?");

/***/ }),

/***/ "./public/flux/actions.js":
/*!********************************!*\
  !*** ./public/flux/actions.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authorizationActions\": () => (/* binding */ authorizationActions),\n/* harmony export */   \"changePageActions\": () => (/* binding */ changePageActions),\n/* harmony export */   \"signupFormActions\": () => (/* binding */ signupFormActions),\n/* harmony export */   \"modalActions\": () => (/* binding */ modalActions),\n/* harmony export */   \"mainPageActions\": () => (/* binding */ mainPageActions),\n/* harmony export */   \"profilePageActions\": () => (/* binding */ profilePageActions),\n/* harmony export */   \"apiActions\": () => (/* binding */ apiActions),\n/* harmony export */   \"articleEditActions\": () => (/* binding */ articleEditActions)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n// ////////////////\r\n// authorizationActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {Object} userData\r\n * @return {Action}\r\n */\r\nfunction login(userData) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(userData);\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.authorizationTypes.LOGIN,\r\n    payload: userData,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction logout() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.authorizationTypes.LOGOUT,\r\n  };\r\n}\r\n\r\nconst authorizationActions = {\r\n  login,\r\n  logout,\r\n};\r\n\r\n\r\n// ////////////////\r\n// changePageActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {string} page\r\n * @param {string} docTitle\r\n * @return {Action}\r\n */\r\nfunction changePage(page, docTitle) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.changePageTypes.CHANGE_PAGE,\r\n    payload: {\r\n      page,\r\n      docTitle,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} docTitle\r\n * @return {Action}\r\n */\r\nfunction changeDocTitle(docTitle) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.changePageTypes.CHANGE_DOC_TITLE,\r\n    payload: {\r\n      docTitle,\r\n    },\r\n  };\r\n}\r\n\r\nconst changePageActions = {\r\n  changePage,\r\n  changeDocTitle,\r\n};\r\n\r\n\r\n// ////////////////\r\n// signupFormActions\r\n// ////////////////\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction toggleToSignupForm() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.signupFormTypes.SWITCH_FORM_TYPE,\r\n    payload: true,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction toggleToSigninForm() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.signupFormTypes.SWITCH_FORM_TYPE,\r\n    payload: false,\r\n  };\r\n}\r\n\r\nconst signupFormActions = {\r\n  toggleToSignupForm,\r\n  toggleToSigninForm,\r\n};\r\n\r\n\r\n// ////////////////\r\n// modalctions\r\n// ////////////////\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction modalClose() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.modalTypes.MODAL_CLOSE,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction modalOpen() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.modalTypes.MODAL_OPEN,\r\n  };\r\n}\r\n\r\nconst modalActions = {\r\n  modalOpen,\r\n  modalClose,\r\n};\r\n\r\n\r\n// ////////////////\r\n// mainPageActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {string} idLastLoaded\r\n * @param {Array<Object>} cards\r\n * @return {Action}\r\n */\r\nfunction saveNewCards(idLastLoaded, cards) {\r\n  cards.forEach((card) => {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card);\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card.author);\r\n  });\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.SAVE_NEW_CARDS,\r\n    payload: {idLastLoaded, cards},\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.SET_LOADING_FLAG,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction unsetLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.UNSET_LOADING_FLAG,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction forbidCardsLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.FORBID_CARDS_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction allowCardsLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.ALLOW_CARDS_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearCards() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.CLEAR_CARDS,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {boolean} isAuthenticated\r\n * @param {string} login\r\n * @return {Action}\r\n */\r\nfunction toggleLogin(isAuthenticated, login) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.TOGGLE_AUTH,\r\n    payload: {\r\n      isAuthenticated,\r\n      login,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction askNewCards() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.ASK_NEW_CARDS,\r\n  };\r\n}\r\n\r\nconst mainPageActions = {\r\n  askNewCards,\r\n  saveNewCards,\r\n  clearCards,\r\n  setLoadingFlag,\r\n  unsetLoadingFlag,\r\n  forbidCardsLoading,\r\n  allowCardsLoading,\r\n  toggleLogin,\r\n};\r\n\r\n// ////////////////\r\n//  profilePageActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {string} idLastLoaded\r\n * @param {Array<Card>} cards\r\n * @return {Action}\r\n */\r\nfunction saveNewArticles(idLastLoaded, cards) {\r\n  cards.forEach((card) => {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card);\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card.author);\r\n  });\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SAVE_NEW_USER_ARTICLES,\r\n    payload: {idLastLoaded, cards},\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearArticles() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.CLEAR_USER_ARTICLES,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setArticlesLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_ARTICLES_LOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction unsetArticlesLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.UNSET_USER_ARTICLES_LOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction forbidArticlesLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.FORBID_USER_ARTICLES_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction allowArticlesLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.ALLOW_USER_ARTICLES_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction askNewArticles() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.ASK_NEW_USER_ARTICLES,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {Object} user\r\n * @property {string} login\r\n * @property {string?} firstName\r\n * @property {string?} lastName\r\n * @property {string?} avatarUrl\r\n * @property {number?} score\r\n * @return {Action}\r\n */\r\nfunction setUserLoading(user) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_LOADING,\r\n    payload: {\r\n      firstName: 'загрузка',\r\n      lastName: 'загрузка',\r\n      avatarUrl: '',\r\n      score: 0,\r\n      ...user,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * @param {Object} user\r\n * @property {string} login\r\n * @property {string?} firstName\r\n * @property {string?} lastName\r\n * @property {email?} email\r\n * @property {string?} avatarUrl\r\n * @property {number?} score\r\n * @return {Action}\r\n */\r\nfunction setUserInfo(user) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(user);\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_INFO,\r\n    payload: user,\r\n  };\r\n}\r\n\r\nconst profilePageActions = {\r\n  setUserLoading,\r\n  setUserInfo,\r\n  askNewArticles,\r\n  saveNewArticles,\r\n  clearArticles,\r\n  setArticlesLoadingFlag,\r\n  unsetArticlesLoadingFlag,\r\n  forbidArticlesLoading,\r\n  allowArticlesLoading,\r\n};\r\n\r\n// ////////////////\r\n//    apiActions\r\n// ////////////////\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setUnavailable() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.apiTypes.SET_UNAVAILABLE,\r\n  };\r\n}\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setAvailable() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.apiTypes.SET_AVAILABLE,\r\n  };\r\n}\r\nconst apiActions = {\r\n  setAvailable,\r\n  setUnavailable,\r\n};\r\n\r\n// ////////////////\r\n//    articleEditActions\r\n// ////////////////\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction appendTag() {\r\n  return {\r\n    type: articleEditTypes.APPEND_TAG,\r\n  };\r\n}\r\n/**\r\n * @return {Action}\r\n */\r\nfunction removeTag() {\r\n  return {\r\n    type: articleEditTypes.REMOVE_TAG,\r\n  };\r\n}\r\n/**\r\n * @param {Article} article Object<id, text, login>\r\n * @return {Action}\r\n */\r\nfunction editExistingArticle(article) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article.author);\r\n  return {\r\n    type: articleEditTypes.EDIT_EXISTING_ARTICLE,\r\n    payload: article,\r\n  };\r\n}\r\n/**\r\n * @return {Action}\r\n */\r\nfunction createArticle() {\r\n  return {\r\n    type: articleEditTypes.CREATE_ARTICLE,\r\n  };\r\n}\r\n/**\r\n * @param {String} title\r\n * @param {String} text\r\n * @return {Action}\r\n */\r\nfunction saveText(title, text) {\r\n  return {\r\n    type: articleEditTypes.SAVE_TEXT,\r\n    payload: {title, text},\r\n  };\r\n}\r\n\r\nconst articleEditActions = {\r\n  appendTag,\r\n  removeTag,\r\n  editExistingArticle,\r\n  createArticle,\r\n  saveText,\r\n};\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions.js?");

/***/ }),

/***/ "./public/flux/actions/categoryPageActions.js":
/*!****************************************************!*\
  !*** ./public/flux/actions/categoryPageActions.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// ////////////////\r\n//  CategoryPageActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {string} idLastLoaded\r\n * @param {Array<Card>} cards\r\n * @return {Action}\r\n */\r\nfunction saveNewCategoryArticles(idLastLoaded, cards) {\r\n  cards.forEach((card) => {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card);\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card.author);\r\n  });\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SAVE_NEW_CATEGORY_ARTICLES,\r\n    payload: {idLastLoaded, cards},\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearCategoryArticles() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.CLEAR_CATEGORY_ARTICLES,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setCategoryArticlesLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SET_CATEGORY_ARTICLES_LOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction unsetCategoryArticlesLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.UNSET_CATEGORY_ARTICLES_LOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction forbidCategoryArticlesLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.FORBID_CATEGORY_ARTICLES_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction allowCategoryArticlesLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.ALLOW_CATEGORY_ARTICLES_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction askNewCategoryArticles() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.ASK_NEW_CATEGORY_ARTICLES,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} category\r\n * @return {Action}\r\n */\r\nfunction selectCategory(category) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SELECT_CATEGORY,\r\n    payload: category,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearSelectedCategory() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SELECT_CATEGORY,\r\n    payload: '',\r\n  };\r\n}\r\n\r\nconst categoryPageActions = {\r\n  setCategoryArticlesLoadingFlag,\r\n  unsetCategoryArticlesLoadingFlag,\r\n  forbidCategoryArticlesLoading,\r\n  allowCategoryArticlesLoading,\r\n  askNewCategoryArticles,\r\n  saveNewCategoryArticles,\r\n  clearCategoryArticles,\r\n  selectCategory,\r\n  clearSelectedCategory,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (categoryPageActions);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions/categoryPageActions.js?");

/***/ }),

/***/ "./public/flux/actions/editorActions.js":
/*!**********************************************!*\
  !*** ./public/flux/actions/editorActions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// ////////////////\r\n//  EditorActions\r\n// ////////////////\r\n\r\n// /**\r\n//  * @return {Action}\r\n//  */\r\n// function template() {\r\n//   return {\r\n//     type: editorTypes,\r\n//   };\r\n// }\r\n\r\n/**\r\n * @param {string} id\r\n * @return {Action}\r\n */\r\nfunction clearArticle(id) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.CLEAR_ARTICLE,\r\n    payload: id,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction createArticle() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.CREATE_ARTICLE,\r\n  };\r\n}\r\n\r\n/**\r\n * img кладешь опционально, если менял картинку.\r\n * @param {number} id\r\n * @param {Object?} article\r\n * @property {string} title\r\n * @property {string} text\r\n * @property {Array<string>} tags\r\n * @property {string}  category\r\n * @property {string}  img\r\n * @property {string?} dateTime\r\n * @property {string?} author\r\n * @property {number?} likes\r\n * @property {number?} comments\r\n * @return {Action}\r\n */\r\nfunction editArticle(id, article) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article);\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article.author);\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.EDIT_EXISTING_ARTICLE,\r\n    payload: {\r\n      id,\r\n      ...article,\r\n      tags: Array.isArray(article.tags) ? article.tags : [],\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * @param {number} id - id, присвоенный записи на сервере\r\n * @return {Action}\r\n */\r\nfunction publishArticle(id) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.PUBLISH_ARTICLE,\r\n    payload: {id},\r\n  };\r\n}\r\n\r\n/**\r\n * @param {number} id - id, присвоенный записи на сервере\r\n * @return {Action}\r\n */\r\nfunction deleteArticle(id) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.DELETE_ARTICLE,\r\n    payload: {id},\r\n  };\r\n}\r\n\r\n/**\r\n * @param {number} id - id, полученный с сервера,\r\n *                      либо 0, если запись только создается\r\n * @param {Object?} article\r\n * @property {string} title\r\n * @property {string} text\r\n * @property {Array<string>?} tags\r\n * @property {number?} dateTime\r\n * @property {string}  category\r\n * @property {string}  img\r\n * @property {string?} author\r\n * @property {number?} likes\r\n * @property {number?} comments\r\n * @return {Action}\r\n */\r\nfunction saveArticle(id, article) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article);\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_ARTICLE,\r\n    payload: {\r\n      id,\r\n      title: article.title,\r\n      text: article.text,\r\n      tags: Array.isArray(article.tags) ? article.tags : [],\r\n      img: article.img || '',\r\n      category: article.category || '',\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} tag\r\n * @return {Action}\r\n */\r\nfunction removeTag(tag) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.REMOVE_TAG,\r\n    payload: tag,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} tag\r\n * @return {Action}\r\n */\r\nfunction appendTag(tag) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.APPEND_TAG,\r\n    payload: tag,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} url присвоенный записи в браузере\r\n * @return {Action}\r\n */\r\nfunction saveImg(url) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_PREVIEW,\r\n    payload: url,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearImg() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_PREVIEW,\r\n    payload: '',\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} category\r\n * @return {Action}\r\n */\r\nfunction saveCategory(category) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_CATEGORY,\r\n    payload: category,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearCategory() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_CATEGORY,\r\n    payload: '',\r\n  };\r\n}\r\n\r\nconst editorActions = {\r\n  createArticle,\r\n  clearArticle,\r\n  editArticle,\r\n  publishArticle,\r\n  saveArticle,\r\n  deleteArticle,\r\n  appendTag,\r\n  removeTag,\r\n  saveImg,\r\n  clearImg,\r\n  saveCategory,\r\n  clearCategory,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (editorActions);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions/editorActions.js?");

/***/ }),

/***/ "./public/flux/actions/readerActions.js":
/*!**********************************************!*\
  !*** ./public/flux/actions/readerActions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// ////////////////\r\n//  ReaderActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {Object} article\r\n * @property {string} id\r\n * @property {string} title\r\n * @property {string} text\r\n * @property {Array<string>} tags\r\n * @property {number} datetime\r\n * @property {Object} author\r\n * @property {number} likes\r\n * @property {number} comments\r\n * @property {string} previewUrl\r\n * @return {Action}\r\n */\r\nfunction saveArticle(article) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article);\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article.author);\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SAVE_ARTICLE,\r\n    payload: article,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {Object} article\r\n * @property {string} id\r\n * @property {string?} title\r\n * @property {Array<string>?} tags\r\n * @property {number?} datetime\r\n * @property {Object?} author\r\n * @property {number?} likes\r\n * @property {number?} comments\r\n * @property {string?} previewUrl\r\n * @return {Action}\r\n */\r\nfunction setArticleLoading(article) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article);\r\n  if ('avatar' in article) {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(article.author);\r\n  }\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SET_ARTICLE_LOADING,\r\n    payload: article,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {number} id - id, присвоенный записи на сервере\r\n * @return {Action}\r\n */\r\nfunction openArticle(id) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.OPEN_ARTICLE,\r\n    payload: id,\r\n  };\r\n}\r\n\r\n/**\r\n * @param {number} id - id, присвоенный записи на сервере\r\n * @param {Array<Comment>} comments\r\n * @return {Action}\r\n */\r\nfunction saveArticleComments(id, comments) {\r\n  if (!Array.isArray(comments)) {\r\n    console.warn('API error. Server returned ', typeof comments,\r\n        'instead of comments');\r\n    comments = [];\r\n  }\r\n  if (!comments) {\r\n    comments = [];\r\n  }\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SAVE_ARTICLE_COMMENTS,\r\n    payload: {id, comments},\r\n  };\r\n}\r\n\r\nconst readerActions = {\r\n  saveArticle,\r\n  openArticle,\r\n  setArticleLoading,\r\n  saveArticleComments,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (readerActions);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions/readerActions.js?");

/***/ }),

/***/ "./public/flux/actions/searchActions.js":
/*!**********************************************!*\
  !*** ./public/flux/actions/searchActions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// ////////////////\r\n// searchPageActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {string} idLastLoaded\r\n * @param {Array<Object>} cards\r\n * @return {Action}\r\n */\r\nfunction saveNewCards(idLastLoaded, cards) {\r\n  cards.forEach((card) => {\r\n    // только для статей\r\n    if (!'login' in card) {\r\n      (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card.author);\r\n    }\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(card);\r\n  });\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SAVE_NEW_CARDS,\r\n    payload: {idLastLoaded, cards},\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} group\r\n * @param {string} description\r\n * @return {Action}\r\n */\r\nfunction setSearchGroup(group, description = '') {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_SEARCH_GROUP,\r\n    payload: {group, description},\r\n  };\r\n}\r\n\r\n/**\r\n * @param {string} value\r\n * @return {Action}\r\n */\r\nfunction setSearchValue(value) {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_SEARCH_VALUE,\r\n    payload: value,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction setLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_LOADING_FLAG,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction unsetLoadingFlag() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.UNSET_LOADING_FLAG,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction forbidCardsLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.FORBID_CARDS_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction allowCardsLoading() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.ALLOW_CARDS_UPLOADING,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearCards() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.CLEAR_CARDS,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction askNewCards() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.ASK_NEW_CARDS,\r\n  };\r\n}\r\n\r\nconst searchActions = {\r\n  askNewCards,\r\n  saveNewCards,\r\n  clearCards,\r\n  setLoadingFlag,\r\n  unsetLoadingFlag,\r\n  forbidCardsLoading,\r\n  allowCardsLoading,\r\n  setSearchGroup,\r\n  setSearchValue,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (searchActions);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions/searchActions.js?");

/***/ }),

/***/ "./public/flux/actions/streamActions.js":
/*!**********************************************!*\
  !*** ./public/flux/actions/streamActions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n// ////////////////\r\n// streamActions\r\n// ////////////////\r\n\r\n/**\r\n * @param {Array<Object>} comments\r\n * @return {Action}\r\n */\r\nfunction saveNewComments(comments) {\r\n  comments.forEach((comment) => {\r\n    (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.appendApiImg)(comment.author);\r\n  });\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.SAVE_NEW_COMMENTS,\r\n    payload: comments,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction clearComments() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.CLEAR_COMMENTS,\r\n  };\r\n}\r\n\r\n/**\r\n * @return {Action}\r\n */\r\nfunction askNewComments() {\r\n  return {\r\n    type: _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.ASK_NEW_COMMENTS,\r\n  };\r\n}\r\n\r\nconst streamActions = {\r\n  askNewComments,\r\n  saveNewComments,\r\n  clearComments,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (streamActions);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/actions/streamActions.js?");

/***/ }),

/***/ "./public/flux/applyMiddleware.js":
/*!****************************************!*\
  !*** ./public/flux/applyMiddleware.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ applyMiddleware)\n/* harmony export */ });\n/**\r\n * @param  {...Function} funcs\r\n * @return {Function}\r\n */\r\nfunction compose(...funcs) {\r\n  if (funcs.length === 0) {\r\n    return arg;\r\n  }\r\n\r\n  if (funcs.length === 1) {\r\n    return funcs[0];\r\n  }\r\n\r\n  return funcs.reduce(\r\n      (a, b) =>\r\n        a(b(...args)),\r\n  );\r\n}\r\n\r\n/**\r\n * extends (wraps) default store\r\n * @param  {...any} middlewares\r\n * @return {any}\r\n */\r\nfunction applyMiddleware(...middlewares) {\r\n  return function(createStore) {\r\n    return function(reducer, preloadedState) {\r\n      const store = createStore(reducer, preloadedState);\r\n      let dispatch = () => {\r\n        console.error(\r\n            'Dispatching while constructing your middleware is not allowed. ' +\r\n            'Other middleware would not be applied to this dispatch.',\r\n        );\r\n      };\r\n\r\n      const middlewareAPI = {\r\n        getState: store.getState,\r\n        dispatch: (action, ...args) => dispatch(action, ...args),\r\n      };\r\n      const chain = middlewares.map((middleware) => middleware(middlewareAPI));\r\n      dispatch = compose(...chain)(store.dispatch);\r\n\r\n      return {\r\n        ...store,\r\n        dispatch,\r\n      };\r\n    };\r\n  };\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/applyMiddleware.js?");

/***/ }),

/***/ "./public/flux/createStore.js":
/*!************************************!*\
  !*** ./public/flux/createStore.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ createStore)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _applyMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./applyMiddleware.js */ \"./public/flux/applyMiddleware.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n/**\r\n * @param {function(StateObject, Action)} rootReducer\r\n * @param {StateObject} initialState\r\n * @param {Array.Function} middlewares\r\n * @return {Object} store\r\n */\r\nfunction createStore(rootReducer, initialState, ...middlewares) {\r\n  console.log('[STORE] createStore: ', middlewares.map((el) => el.name));\r\n  let state = rootReducer(initialState, {type: _types_js__WEBPACK_IMPORTED_MODULE_0__.SYSTYPES.INIT});\r\n  const subscribers = {};\r\n\r\n  if (middlewares.length !== 0) {\r\n    return (0,_applyMiddleware_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(...middlewares)(createStore)(\r\n        rootReducer, initialState,\r\n    );\r\n  }\r\n\r\n  return {\r\n    /**\r\n     * Сначала вызывается соответсвующий reducer,\r\n     * затем выполняются подписки.\r\n     * В колбеки подписок передается payload\r\n     * @param {Action} action\r\n     */\r\n    dispatch(action) {\r\n      state = rootReducer(state, action);\r\n      subscribers[action.type] = subscribers[action.type] || [];\r\n      subscribers[action.type].forEach((subscriber) => {\r\n        if (_globals_js__WEBPACK_IMPORTED_MODULE_2__.fluxDebug) {\r\n          console.log('subscribe trigger on', action.type);\r\n        }\r\n        subscriber(action.payload);\r\n      });\r\n    },\r\n\r\n    /**\r\n     * оформить подписку на событие стора\r\n     * @param {Action} actionType событие\r\n     * @param {Function.Payload?} callback реакция на событие\r\n     * @return {Function} метод function() для отмены подписки\r\n     */\r\n    subscribe(actionType, callback) {\r\n      if (_globals_js__WEBPACK_IMPORTED_MODULE_2__.fluxDebug) {\r\n        console.log('create subscription to', actionType);\r\n      }\r\n      subscribers[actionType] = subscribers[actionType] || [];\r\n      subscribers[actionType].push(callback);\r\n      // return unsubscribe function\r\n      return function() {\r\n        subscribers[actionType]\r\n            .splice(subscribers[actionType].indexOf(callback));\r\n      };\r\n    },\r\n    getState() {\r\n      return state;\r\n    },\r\n  };\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/createStore.js?");

/***/ }),

/***/ "./public/flux/middleWares/asyncHandleThunk.js":
/*!*****************************************************!*\
  !*** ./public/flux/middleWares/asyncHandleThunk.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ thunk)\n/* harmony export */ });\n/**\r\n * @param {Object} Объект, удовлетворяющий Redux Middleware API\r\n * @property {Function} getState\r\n * @property {Function} dispatch\r\n * @return {Function} next\r\n */\r\nfunction thunk({getState, dispatch}) {\r\n  return function(next) {\r\n    return function(action) {\r\n      if (typeof action === 'function') {\r\n        return action(dispatch, getState);\r\n      }\r\n      return next(action);\r\n    };\r\n  };\r\n};\r\n\r\n// This is an action creator that returns a thunk:\r\n// function netWalker(forPerson) {\r\n//   // We can invert control here by returning a function - the \"thunk\".\r\n//   // When this function is passed to `dispatch`,\r\n// the thunk middleware will intercept it,\r\n//   // and call it with `dispatch` and `getState` as arguments.\r\n//   // This gives the thunk function the ability to run some logic,\r\n// and still interact with the store.\r\n//   return function(dispatch) {\r\n//     return fetchSecretSauce().then(\r\n//       (sauce) => dispatch(makeASandwich(forPerson, sauce)),\r\n//       (error) => dispatch(apologize('The Sandwich Shop', forPerson, error)),\r\n//     );\r\n//   };\r\n// }\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/middleWares/asyncHandleThunk.js?");

/***/ }),

/***/ "./public/flux/reducers/apiReducer.js":
/*!********************************************!*\
  !*** ./public/flux/reducers/apiReducer.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ apiReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialAPIState = {\r\n  isAvailable: true,\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {State}\r\n */\r\nfunction apiReducer(state = InitialAPIState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.apiTypes.SET_AVAILABLE:\r\n      return {\r\n        ...state,\r\n        isAvailable: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.apiTypes.SET_UNAVAILABLE:\r\n      return {\r\n        ...state,\r\n        isAvailable: false,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/apiReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/authorizeReducer.js":
/*!**************************************************!*\
  !*** ./public/flux/reducers/authorizeReducer.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ authorizeReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialUserState = {\r\n  isAuthenticated: false,\r\n  login: '',\r\n  avatarUrl: ``,\r\n  firstName: 'UNAUTHORIZED',\r\n  lastName: 'UNAUTHORIZED',\r\n  email: 'UNAUTHORIZED',\r\n  score: 0,\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction authorizeReducer(state = InitialUserState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.authorizationTypes.LOGIN:\r\n      if (action.payload.login === '') {\r\n        console.warn('Trying to set an empty login. LOGIN action ignored');\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isAuthenticated: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.authorizationTypes.LOGOUT:\r\n      return InitialUserState;\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/authorizeReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/categoryPageReducer.js":
/*!*****************************************************!*\
  !*** ./public/flux/reducers/categoryPageReducer.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ categoryPageReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst endOfFeedMarkerID = 'end';\r\n\r\n/**\r\n * Объект состояния на главной странице\r\n * @typedef {Object} CategoryPageState\r\n *                                    вызовет подгрузку новостей\r\n * @property {string} idLastLoaded  - ID последней загруженной карточки\r\n * @property {boolean} isLoading    - Идет ли загрузка сейчас. true запрещает\r\n *                                    отправку запросов на обновлении ленты,\r\n *                                    чтобы не спамить сервер\r\n * @property {number} lastScrollPos - Позиция скролла при покидании mainPage\r\n * @property {boolean} isEndFound  - Запрещает загрузку при обнаружении конца\r\n *                                    ленты, чтобы не спамить сервер.\r\n *                                    Сбразывется через resetDoNotUploadTime мс\r\n * @property {Array.NewsCard} cards - Массив загруженных карточек для\r\n *                                    восстановления состояния при возвращении\r\n *                                    на MainPage\r\n */\r\nconst InitialCategoryPageState = {\r\n  currentCategory: '',            // категория, по которой фильтруются записи\r\n  isLoading: false,              // отправлен ли запрос на сервер\r\n  idLastLoaded: '',              // запоминаем последнюю загруженную запись\r\n  lastScrollPos: 0,              // скрол для возврата к той же записи\r\n  cards: [],                     // массив загруженных новостей\r\n  isEndFound: false,\r\n  tags: {\r\n    // category: {\r\n    //  tag1: false,\r\n    //  tag2: true,\r\n    // }\r\n  },\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction categoryPageReducer(\r\n    state = InitialCategoryPageState,\r\n    action,\r\n) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SET_CATEGORY_ARTICLES_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.UNSET_CATEGORY_ARTICLES_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.FORBID_CATEGORY_ARTICLES_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.ALLOW_CATEGORY_ARTICLES_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SAVE_NEW_CATEGORY_ARTICLES:\r\n      const cards = action.payload.cards;\r\n      if (cards.length === 0) {\r\n        return {\r\n          ...state,\r\n          isLoading: false,\r\n        };\r\n      }\r\n      // запрещаем загрузку карточек, чтобы не спамить сервер\r\n      const isEndFound = cards[cards.length - 1].id === endOfFeedMarkerID;\r\n      if (isEndFound) {\r\n        // Удаляем последнюю запись с end'ом\r\n        cards.splice(cards.length - 1, 1);\r\n      }\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        idLastLoaded: cards[cards.length - 1]?.id || state.idLastLoaded,\r\n        cards: state.cards.concat(cards),\r\n        isEndFound,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.CLEAR_CATEGORY_ARTICLES:\r\n      return {\r\n        ...state,\r\n        cards: [],\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        lastScrollPos: 0,\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.categoryPageTypes.SELECT_CATEGORY:\r\n      return {\r\n        ...state,\r\n        currentCategory: action.payload,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/categoryPageReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/changePageReducer.js":
/*!***************************************************!*\
  !*** ./public/flux/reducers/changePageReducer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ changePageReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialPageState = {\r\n  page: 'main',\r\n  docTitle: 'SaberProject',\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction changePageReducer(state = InitialPageState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.changePageTypes.CHANGE_PAGE:\r\n      document.title = action.payload.docTitle;\r\n      return {\r\n        ...state,\r\n        page: action.payload.page,\r\n        docTitle: action.payload.docTitle,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.changePageTypes.CHANGE_DOC_TITLE:\r\n      document.title = action.payload.docTitle;\r\n      return {\r\n        ...state,\r\n        docTitle: action.payload.docTitle,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/changePageReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/combineReducers.js":
/*!*************************************************!*\
  !*** ./public/flux/reducers/combineReducers.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ combineReducers)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../globals */ \"./public/globals.js\");\n\r\n\r\n/**\r\n * @param {function(StateObject, Action)} reducers\r\n * @return {function(StateObject, Action)}\r\n */\r\nfunction combineReducers(reducers) {\r\n  for (const reducer in reducers) {\r\n    if (typeof(reducers[reducer]) !== 'function') {\r\n      console.warn(\r\n          `Reducers Combiner: ${reducer} is not a function.\r\n          It will not be called. It is a ${typeof(reducers[reducer])}.`,\r\n      );\r\n      delete reducers[reducer.name];\r\n    }\r\n  }\r\n  return function(state, action) {\r\n    if (!state) {\r\n      state = {};\r\n    }\r\n\r\n    for (const reducer in reducers) {\r\n      const newState = reducers[reducer](state[reducer], action);\r\n      if (newState !== state[reducer]) {\r\n        let printState = state[reducer];\r\n        let printNewState = newState;\r\n        // Игнор логов поля cards в этих редьюсерах\r\n        if (_globals__WEBPACK_IMPORTED_MODULE_0__.fluxDebug) {\r\n          if (reducer === 'mainPage' ||\r\n              reducer === 'profilePage' ||\r\n              reducer === 'search' ||\r\n              reducer === 'categoryPage') {\r\n            printState = {};\r\n            Object.assign(printState, state[reducer]);\r\n            delete printState.cards;\r\n            printNewState = {};\r\n            Object.assign(printNewState, newState);\r\n            delete printNewState.cards;\r\n          }\r\n          if (reducer === 'editor') {\r\n            printState = {};\r\n            for (const id in state[reducer]) {\r\n              printState[id] = {};\r\n              Object.assign(printState[id], state[reducer][id]);\r\n              if (printState[id].img && printState[id].img !== '') {\r\n                printState[id].img =\r\n                    'data:image/png;base64,(контент картинки)';\r\n              }\r\n            }\r\n            printNewState = {};\r\n            for (const id in newState) {\r\n              printNewState[id] = {};\r\n              Object.assign(printNewState[id], newState[id]);\r\n              if (printNewState[id].img && printNewState[id].img !== '') {\r\n                printNewState[id].img =\r\n                    'data:image/png;base64,(контент картинки)';\r\n              }\r\n            }\r\n          }\r\n          console.log(`${reducer} | action: , ${action.type}\r\n          \\t| prev state:\\n${JSON.stringify(printState)}\r\n          \\t| new state:\\n${JSON.stringify(printNewState)}\r\n          `);\r\n        }\r\n        state[reducer] = newState;\r\n      }\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/combineReducers.js?");

/***/ }),

/***/ "./public/flux/reducers/editorReducer.js":
/*!***********************************************!*\
  !*** ./public/flux/reducers/editorReducer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ editorReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialEditorState = {\r\n  currentId: 0,\r\n  // создание статьи\r\n  // 0: {\r\n  //   title: string,\r\n  //   text: string,\r\n  //   tags: [string],\r\n  //   category: string,\r\n  //   img: string,\r\n  // }\r\n  // Изменение статьи\r\n  // id: {\r\n  //   title: string,\r\n  //   text: string,\r\n  //   tags: [string...],\r\n  //   category: string,\r\n  //   img: string\r\n  // }\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {State}\r\n */\r\nfunction editorReducer(state = InitialEditorState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.EDIT_EXISTING_ARTICLE:\r\n      return {\r\n        ...state,\r\n        [action.payload.id]: {\r\n          title: action.payload.title,\r\n          text: action.payload.text,\r\n          tags: action.payload.tags,\r\n          category: action.payload.category,\r\n          img: action.payload.img,\r\n        },\r\n        currentId: action.payload.id,\r\n      };\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.CLEAR_ARTICLE:\r\n      return {\r\n        ...state,\r\n        [action.payload.id]: {\r\n          title: '',\r\n          text: '',\r\n          tags: [],\r\n          category: '',\r\n          img: '',\r\n        },\r\n      };\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.DELETE_ARTICLE:\r\n      const stateCopyDel = {};\r\n      Object.assign(stateCopyDel, state);\r\n      delete stateCopyDel[action.payload.id];\r\n      stateCopyDel.currentId = 0;\r\n      return stateCopyDel;\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.CREATE_ARTICLE:\r\n      const stateCopy = Object.assign({}, state);\r\n      // обнуление только если до этого не создавали статью\r\n      // иначе данные, введенные ранее должны быть сохранены\r\n      if (!(0 in stateCopy)) {\r\n        stateCopy[0] = {\r\n          title: '',\r\n          text: '',\r\n          tags: [],\r\n          category: '',\r\n          img: '',\r\n        };\r\n      }\r\n      stateCopy.currentId = 0;\r\n      return stateCopy;\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_ARTICLE:\r\n      let currentStateCopySaveArticle = {};\r\n      if (action.payload.id in state) {\r\n        Object.assign(currentStateCopySaveArticle, state[action.payload.id]);\r\n      } else {\r\n        currentStateCopySaveArticle = {\r\n          title: '',\r\n          text: '',\r\n          tags: [],\r\n          category: '',\r\n          img: '',\r\n        };\r\n      }\r\n      currentStateCopySaveArticle = {\r\n        ...currentStateCopySaveArticle,\r\n        ...action.payload,\r\n      };\r\n      delete currentStateCopySaveArticle.id;\r\n      return {\r\n        ...state,\r\n        [action.payload.id]: currentStateCopySaveArticle,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.PUBLISH_ARTICLE:\r\n      return {\r\n        ...state,\r\n        // сохраняем только что созданную запись\r\n        [action.payload.id]: Object.assign({}, state[0]),\r\n        0: {\r\n          title: '',\r\n          text: '',\r\n          tags: [],\r\n          category: '',\r\n          img: '',\r\n        },\r\n        currentId: 0,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.APPEND_TAG:\r\n      const currentIdStateCopy = Object.assign({}, state[state.currentId]);\r\n      currentIdStateCopy.tags.push(action.payload);\r\n      return {\r\n        ...state,\r\n        [state.currentId]: currentIdStateCopy,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.REMOVE_TAG:\r\n      const currentStateCopyRemove = Object.assign({}, state[state.currentId]);\r\n      currentStateCopyRemove.tags =\r\n          currentStateCopyRemove.tags.filter((el) => el != action.payload);\r\n      return {\r\n        ...state,\r\n        [state.currentId]: currentStateCopyRemove,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_PREVIEW:\r\n      const currentStateCopySavePreview = {...state[state.currentId]};\r\n      currentStateCopySavePreview.img = action.payload;\r\n      return {\r\n        ...state,\r\n        [state.currentId]: currentStateCopySavePreview,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.editorTypes.SAVE_CATEGORY:\r\n      const currentStateCopySaveCategory = {...state[state.currentId]};\r\n      currentStateCopySaveCategory.category = action.payload;\r\n      return {\r\n        ...state,\r\n        [state.currentId]: currentStateCopySaveCategory,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/editorReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/mainPageReducer.js":
/*!*************************************************!*\
  !*** ./public/flux/reducers/mainPageReducer.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ mainPageReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst endOfFeedMarkerID = 'end';\r\n\r\n/**\r\n * Объект состояния на главной странице\r\n * @typedef {Object} MainCardState\r\n * @property {string} idLastLoaded  - ID последней загруженной карточки\r\n * @property {string} login         - пользователь, для которого запрашивается\r\n *                                    подборка новостей\r\n * @property {boolean} isLoading    - Идет ли загрузка сейчас. true запрещает\r\n *                                    отправку запросов на обновлении ленты,\r\n *                                    чтобы не спамить сервер\r\n * @property {number} lastScrollPos - Позиция скролла при покидании mainPage\r\n * @property {boolean} isEndFound   - Запрещает загрузку при обнаружении конца\r\n *                                    ленты, чтобы не спамить сервер.\r\n *                                    Сбразывется через resetDoNotUploadTime мс\r\n * @property {Array.Card} cards     - Массив загруженных карточек для\r\n *                                    восстановления состояния при возвращении\r\n *                                    на MainPage\r\n */\r\nconst InitialMainPageState = {\r\n  isAuthenticated: false,\r\n  isLoading: false,              // отправлен ли запрос на сервер\r\n  idLastLoaded: '',              // запоминаем последнюю загруженную запись\r\n  lastScrollPos: 0,              // скрол для возврата к той же записи\r\n  cards: [],                     // массив загруженных новостей\r\n  isEndFound: false,\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction mainPageReducer(state = InitialMainPageState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.SET_LOADING_FLAG:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.FORBID_CARDS_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.ALLOW_CARDS_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.SAVE_NEW_CARDS:\r\n      const cards = action.payload.cards;\r\n      if (cards.length === 0) {\r\n        return {\r\n          ...state,\r\n          isLoading: false,\r\n        };\r\n      }\r\n      // запрещаем загрузку карточек, чтобы не спамить сервер\r\n      const isEndFound = cards[cards.length - 1].id === endOfFeedMarkerID;\r\n      if (isEndFound) {\r\n        // Удаляем последнюю запись с end'ом\r\n        cards.splice(cards.length - 1, 1);\r\n      }\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        idLastLoaded: cards[cards.length - 1]?.id || state.idLastLoaded,\r\n        cards: state.cards.concat(cards),\r\n        isEndFound,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.mainPageTypes.CLEAR_CARDS:\r\n      return {\r\n        ...state,\r\n        cards: [],\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        lastScrollPos: 0,\r\n        isEndFound: false,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/mainPageReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/profilePageReducer.js":
/*!****************************************************!*\
  !*** ./public/flux/reducers/profilePageReducer.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ profilePageReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst endOfFeedMarkerID = 'end';\r\n\r\n/**\r\n * Объект состояния для ленты\r\n * @typedef {Object} MainCardState\r\n * @property {boolean} isLoading    - Идет ли загрузка сейчас. true запрещает\r\n *                                    отправку запросов на обновлении ленты,\r\n *                                    чтобы не спамить сервер\r\n * @property {boolean} isEndFound  - Запрещает загрузку при обнаружении конца\r\n *                                    ленты, чтобы не спамить сервер.\r\n *                                    Сбразывется через resetDoNotUploadTime мс\r\n * @property {Array.NewsCard} cards - Массив загруженных карточек для\r\n *                                    восстановления состояния при возвращении\r\n *                                    на MainPage\r\n */\r\nconst InitialProfilePageState = {\r\n  user: {\r\n    login: '',\r\n  },\r\n  isLoading: false,              // отправлен ли запрос на сервер\r\n  idLastLoaded: '',              // запоминаем последнюю загруженную запись\r\n  cards: [],                     // массив загруженных новостей\r\n  isEndFound: false,\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction profilePageReducer(\r\n    state = InitialProfilePageState,\r\n    action,\r\n) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_ARTICLES_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.FORBID_USER_ARTICLES_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.ALLOW_USER_ARTICLES_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SAVE_NEW_USER_ARTICLES:\r\n      const cards = action.payload.cards;\r\n      if (cards.length === 0) {\r\n        return {\r\n          ...state,\r\n          isLoading: false,\r\n        };\r\n      }\r\n      // запрещаем загрузку карточек, чтобы не спамить сервер\r\n      const isEndFound = cards[cards.length - 1].id === endOfFeedMarkerID;\r\n      if (isEndFound) {\r\n        // Удаляем последнюю запись с end'ом\r\n        cards.splice(cards.length - 1, 1);\r\n      }\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        idLastLoaded: cards[cards.length - 1]?.id || state.idLastLoaded,\r\n        cards: state.cards.concat(cards),\r\n        isEndFound,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.CLEAR_USER_ARTICLES:\r\n      return {\r\n        ...state,\r\n        cards: [],\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_INFO: // смена пользователя\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        // Сброс загруженных карточек\r\n        // TODO: сделать кеширование для кажлого юзера\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        cards: [],\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.profilePageTypes.SET_USER_LOADING: // смена пользователя\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        cards: [],\r\n        isEndFound: false,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/profilePageReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/readerReducer.js":
/*!***********************************************!*\
  !*** ./public/flux/reducers/readerReducer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ readerReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialReaderState = {\r\n  currentId: 0,\r\n  // загруженные статьи храняться в следующем виде для\r\n  // качественных офлайн возможностей\r\n  // id: {\r\n  //   \"previewUrl\": \"string\",\r\n  //   \"title\": \"string\",\r\n  //   \"text\": \"string\",\r\n  //   \"author\": {\r\n  //     \"login\": \"string\",\r\n  //     \"firstName\": \"string\",\r\n  //     \"lastName\": \"string\",\r\n  //     \"avatarUrl\": \"string\",\r\n  //     \"score\": 0\r\n  //   },\r\n  //    \"datetime\": \"string\"\r\n  //   \"comments\": 0,\r\n  //   \"likes\": 0,\r\n  //   \"tags\": [\r\n  //     \"string\"\r\n  //   ]\r\n  //   commentsContent: \"nul\" || [\r\n  //     {\r\n  //       answers: [\r\n  //         Comment,\r\n  //         ...\r\n  //       ],\r\n  //       \"text\": \"string\",\r\n  //       \"articleId\": number,\r\n  //       \"parentId\": number,\r\n  //       \"id\": number,\r\n  //       \"datetime\": string,\r\n  //       \"datetimeMS\": number,\r\n  //        \"isEdited\": true,\r\n  //         \"author\": {\r\n  //            \"login\": \"string\",\r\n  //            \"firstName\": \"string\",\r\n  //            \"lastName\": \"string\",\r\n  //            \"avatarUrl\": \"string\",\r\n  //            \"score\": 0\r\n  //        }\r\n  //      }\r\n  //   ]\r\n  // }\r\n};\r\n\r\n/**\r\n * @typedef {Object} Comment\r\n * @property {string} text\r\n * @property {string} articleId\r\n * @property {string} id\r\n * @property {string} dateTime\r\n * @property {boolean} isEdited\r\n * @property {User} author\r\n */\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {State}\r\n */\r\nfunction readerReducer(state = InitialReaderState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SAVE_ARTICLE:\r\n      return {\r\n        ...state,\r\n        [action.payload.id]: {\r\n          id: action.payload.id,\r\n          title: action.payload.title,\r\n          text: action.payload.text,\r\n          tags: action.payload.tags,\r\n          datetime: action.payload.datetime,\r\n          author: action.payload.author,\r\n          likes: action.payload.likes,\r\n          comments: action.payload.comments,\r\n          previewUrl: action.payload.previewUrl,\r\n        },\r\n      };\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SET_ARTICLE_LOADING:\r\n      // Загрузка не ставится, если по этому id уже\r\n      // есть хотя бы какие-то достоверные данные\r\n      if (action.payload.id in state &&\r\n        state[action.payload.id].title !== 'Загрузка') {\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        [action.payload.id]: {\r\n          title: 'Загрузка',\r\n          tags: [],\r\n          datetime: '',\r\n          author: {\r\n            login: '',\r\n            avatarUrl: '',\r\n            firstName: '',\r\n            lastName: 'Загрузка',\r\n            score: 0,\r\n          },\r\n          likes: 0,\r\n          comments: 0,\r\n          commentsContent: null,\r\n          previewUrl: '',\r\n          ...action.payload,\r\n          text: 'Загрузка...',\r\n        },\r\n      };\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.OPEN_ARTICLE:\r\n      return {\r\n        ...state,\r\n        currentId: action.payload,\r\n      };\r\n\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.readerTypes.SAVE_ARTICLE_COMMENTS:\r\n      if (action.payload.id in state) {\r\n        return {\r\n          ...state,\r\n          [action.payload.id]: {\r\n            ...state[action.payload.id],\r\n            commentsContent: action.payload.comments,\r\n          },\r\n        };\r\n      } else {\r\n        return state;\r\n      }\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/readerReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/routerReducer.js":
/*!***********************************************!*\
  !*** ./public/flux/reducers/routerReducer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ routerReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialRouterState = {};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {State}\r\n */\r\nfunction routerReducer(state = InitialRouterState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.routerTypes.REDIRECT:\r\n      return {...state};\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/routerReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/searchPageReducer.js":
/*!***************************************************!*\
  !*** ./public/flux/reducers/searchPageReducer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ searchPageReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst endOfFeedMarkerID = 'end';\r\n\r\nconst InitialSearchState = {\r\n  isLoading: false,              // отправлен ли запрос на сервер\r\n  idLastLoaded: '',              // запоминаем последнюю загруженную запись\r\n  lastScrollPos: 0,              // скрол для возврата к той же записи\r\n  cards: [],                     // массив загруженных новостей\r\n  isEndFound: false,\r\n  value: '',\r\n  group: 'articles',\r\n  description: 'Статьи',\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction searchPageReducer(state = InitialSearchState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_SEARCH_GROUP:\r\n      return {\r\n        ...state,\r\n        group: action.payload.group,\r\n        description: action.payload.description,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_LOADING_FLAG:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SET_SEARCH_VALUE:\r\n      return {\r\n        ...state,\r\n        value: action.payload,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.FORBID_CARDS_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: true,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.ALLOW_CARDS_UPLOADING:\r\n      return {\r\n        ...state,\r\n        isEndFound: false,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.SAVE_NEW_CARDS:\r\n      const cards = action.payload.cards;\r\n      if (cards.length === 0) {\r\n        return {\r\n          ...state,\r\n          isLoading: false,\r\n        };\r\n      }\r\n      // запрещаем загрузку карточек, чтобы не спамить сервер\r\n      const isEndFound = cards[cards.length - 1].id === endOfFeedMarkerID;\r\n      if (isEndFound) {\r\n        // Удаляем последнюю запись с end'ом\r\n        cards.splice(cards.length - 1, 1);\r\n      }\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        idLastLoaded: cards[cards.length - 1]?.id || state.idLastLoaded,\r\n        cards: state.cards.concat(cards),\r\n        isEndFound,\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.searchTypes.CLEAR_CARDS:\r\n      return {\r\n        ...state,\r\n        cards: [],\r\n        isLoading: false,\r\n        idLastLoaded: '',\r\n        lastScrollPos: 0,\r\n        isEndFound: false,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/searchPageReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/signupFormReducer.js":
/*!***************************************************!*\
  !*** ./public/flux/reducers/signupFormReducer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ signupFormReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialSignupFormState = {showRegister: true};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction signupFormReducer(\r\n    state = InitialSignupFormState\r\n    , action,\r\n) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.signupFormTypes.SWITCH_FORM_TYPE:\r\n      return {\r\n        ...state,\r\n        showRegister: action.payload,\r\n      };\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/signupFormReducer.js?");

/***/ }),

/***/ "./public/flux/reducers/streamReducer.js":
/*!***********************************************!*\
  !*** ./public/flux/reducers/streamReducer.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ streamReducer)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"./public/flux/types.js\");\n\r\n\r\nconst InitialStreamState = {\r\n  comments: [],                     // массив загруженных новостей\r\n};\r\n\r\n/**\r\n * @param {Object} state\r\n * @param {Action} action\r\n * @return {Object}\r\n */\r\nfunction streamReducer(state = InitialStreamState, action) {\r\n  switch (action.type) {\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.SAVE_NEW_COMMENTS:\r\n      const comments = action.payload;\r\n      if (comments.length === 0) {\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        comments: state.comments.concat(comments),\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.CLEAR_COMMENTS:\r\n      return {\r\n        ...state,\r\n        comments: [],\r\n      };\r\n    case _types_js__WEBPACK_IMPORTED_MODULE_0__.streamTypes.ASK_NEW_COMMENTS:  // UNUSED\r\n      return state;\r\n  }\r\n  return state;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/reducers/streamReducer.js?");

/***/ }),

/***/ "./public/flux/store.js":
/*!******************************!*\
  !*** ./public/flux/store.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _createStore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createStore.js */ \"./public/flux/createStore.js\");\n/* harmony import */ var _reducers_authorizeReducer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./reducers/authorizeReducer.js */ \"./public/flux/reducers/authorizeReducer.js\");\n/* harmony import */ var _reducers_changePageReducer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./reducers/changePageReducer.js */ \"./public/flux/reducers/changePageReducer.js\");\n/* harmony import */ var _reducers_mainPageReducer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./reducers/mainPageReducer.js */ \"./public/flux/reducers/mainPageReducer.js\");\n/* harmony import */ var _reducers_profilePageReducer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./reducers/profilePageReducer.js */ \"./public/flux/reducers/profilePageReducer.js\");\n/* harmony import */ var _reducers_categoryPageReducer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./reducers/categoryPageReducer.js */ \"./public/flux/reducers/categoryPageReducer.js\");\n/* harmony import */ var _reducers_signupFormReducer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./reducers/signupFormReducer.js */ \"./public/flux/reducers/signupFormReducer.js\");\n/* harmony import */ var _reducers_apiReducer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./reducers/apiReducer.js */ \"./public/flux/reducers/apiReducer.js\");\n/* harmony import */ var _reducers_editorReducer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./reducers/editorReducer.js */ \"./public/flux/reducers/editorReducer.js\");\n/* harmony import */ var _reducers_readerReducer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./reducers/readerReducer.js */ \"./public/flux/reducers/readerReducer.js\");\n/* harmony import */ var _reducers_routerReducer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./reducers/routerReducer.js */ \"./public/flux/reducers/routerReducer.js\");\n/* harmony import */ var _reducers_streamReducer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./reducers/streamReducer.js */ \"./public/flux/reducers/streamReducer.js\");\n/* harmony import */ var _reducers_searchPageReducer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./reducers/searchPageReducer.js */ \"./public/flux/reducers/searchPageReducer.js\");\n/* harmony import */ var _reducers_combineReducers_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./reducers/combineReducers.js */ \"./public/flux/reducers/combineReducers.js\");\n/* harmony import */ var _middleWares_asyncHandleThunk_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./middleWares/asyncHandleThunk.js */ \"./public/flux/middleWares/asyncHandleThunk.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst store = (0,_createStore_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])((0,_reducers_combineReducers_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"])({\r\n  router: _reducers_routerReducer_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\r\n\r\n  authorization: _reducers_authorizeReducer_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\r\n  page: _reducers_changePageReducer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\r\n\r\n  mainPage: _reducers_mainPageReducer_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n  profilePage: _reducers_profilePageReducer_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\r\n  categoryPage: _reducers_categoryPageReducer_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\r\n  search: _reducers_searchPageReducer_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\r\n\r\n  signupForm: _reducers_signupFormReducer_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\r\n  api: _reducers_apiReducer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\r\n  editor: _reducers_editorReducer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\r\n  reader: _reducers_readerReducer_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\r\n  stream: _reducers_streamReducer_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\r\n}), {}, _middleWares_asyncHandleThunk_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]);\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (store);\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/store.js?");

/***/ }),

/***/ "./public/flux/types.js":
/*!******************************!*\
  !*** ./public/flux/types.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TYPE\": () => (/* binding */ TYPE),\n/* harmony export */   \"authorizationTypes\": () => (/* binding */ authorizationTypes),\n/* harmony export */   \"changePageTypes\": () => (/* binding */ changePageTypes),\n/* harmony export */   \"modalTypes\": () => (/* binding */ modalTypes),\n/* harmony export */   \"signupFormTypes\": () => (/* binding */ signupFormTypes),\n/* harmony export */   \"mainPageTypes\": () => (/* binding */ mainPageTypes),\n/* harmony export */   \"profilePageTypes\": () => (/* binding */ profilePageTypes),\n/* harmony export */   \"categoryPageTypes\": () => (/* binding */ categoryPageTypes),\n/* harmony export */   \"searchTypes\": () => (/* binding */ searchTypes),\n/* harmony export */   \"streamTypes\": () => (/* binding */ streamTypes),\n/* harmony export */   \"apiTypes\": () => (/* binding */ apiTypes),\n/* harmony export */   \"editorTypes\": () => (/* binding */ editorTypes),\n/* harmony export */   \"readerTypes\": () => (/* binding */ readerTypes),\n/* harmony export */   \"routerTypes\": () => (/* binding */ routerTypes),\n/* harmony export */   \"SYSTYPES\": () => (/* binding */ SYSTYPES)\n/* harmony export */ });\nconst TYPE = 'TYPE';\r\n\r\nconst LOGIN = 'LOGIN';\r\nconst LOGOUT = 'LOGOUT';\r\nconst authorizationTypes = {\r\n  LOGIN,\r\n  LOGOUT,\r\n};\r\n\r\nconst changePageTypes = {\r\n  CHANGE_PAGE: 'CHANGE_PAGE',\r\n  CHANGE_DOC_TITLE: 'CHANGE_DOC_TITLE',\r\n};\r\n\r\n\r\nconst modalTypes = {\r\n  MODAL_OPEN: 'MODAL_OPEN',\r\n  MODAL_CLOSE: 'MODAL_CLOSE',\r\n};\r\n\r\n\r\nconst signupFormTypes = {\r\n  SWITCH_FORM_TYPE: 'SWITCH_FORM_TYPE',\r\n};\r\n\r\n\r\nconst mainPageTypes = {\r\n  ASK_NEW_CARDS: 'ASK_NEW_CARDS',\r\n  SAVE_NEW_CARDS: 'SAVE_NEW_CARDS',\r\n  CLEAR_CARDS: 'CLEAR_CARDS',\r\n  FORBID_CARDS_UPLOADING: 'FORBID_CARDS_UPLOADING',\r\n  ALLOW_CARDS_UPLOADING: 'ALLOW_CARDS_UPLOADING',\r\n  SET_LOADING_FLAG: 'SET_LOADING_FLAG',\r\n  UNSET_LOADING_FLAG: 'UNSET_LOADING_FLAG',\r\n};\r\n\r\nconst profilePageTypes = {\r\n  ASK_NEW_USER_ARTICLES: 'ASK_NEW_USER_ARTICLES',\r\n  SAVE_NEW_USER_ARTICLES: 'SAVE_NEW_USER_ARTICLES',\r\n  CLEAR_USER_ARTICLES: 'CLEAR_USER_ARTICLES',\r\n  FORBID_USER_ARTICLES_UPLOADING: 'FORBID_USER_ARTICLES_UPLOADING',\r\n  ALLOW_USER_ARTICLES_UPLOADING: 'ALLOW_USER_ARTICLES_UPLOADING',\r\n  SET_USER_ARTICLES_LOADING: 'SET_USER_ARTICLES_LOADING',\r\n  UNSET_USER_ARTICLES_LOADING: 'UNSET_USER_ARTICLES_LOADING',\r\n  SET_USER_INFO: 'SET_USER_INFO',\r\n  SET_USER_LOADING: 'SET_USER_LOADING',\r\n};\r\n\r\nconst categoryPageTypes = {\r\n  ASK_NEW_CATEGORY_ARTICLES: 'ASK_NEW_CATEGORY_ARTICLES',\r\n  SAVE_NEW_CATEGORY_ARTICLES: 'SAVE_NEW_CATEGORY_ARTICLES',\r\n  CLEAR_CATEGORY_ARTICLES: 'CLEAR_CATEGORY_ARTICLES',\r\n  FORBID_CATEGORY_ARTICLES_UPLOADING: 'FORBID_CATEGORY_ARTICLES_UPLOADING',\r\n  ALLOW_CATEGORY_ARTICLES_UPLOADING: 'ALLOW_CATEGORY_ARTICLES_UPLOADING',\r\n  SET_CATEGORY_ARTICLES_LOADING: 'SET_CATEGORY_ARTICLES_LOADING',\r\n  UNSET_CATEGORY_ARTICLES_LOADING: 'UNSET_CATEGORY_ARTICLES_LOADING',\r\n  SELECT_CATEGORY: 'SELECT_CATEGORY',\r\n};\r\n\r\nconst searchTypes = {\r\n  ASK_NEW_CARDS: 'ASK_NEW_CARDS_SEARCH',\r\n  SAVE_NEW_CARDS: 'SAVE_NEW_CARDS_SEARCH',\r\n  CLEAR_CARDS: 'CLEAR_CARDS_SEARCH',\r\n  FORBID_CARDS_UPLOADING: 'FORBID_CARDS_UPLOADING_SEARCH',\r\n  ALLOW_CARDS_UPLOADING: 'ALLOW_CARDS_UPLOADING_SEARCH',\r\n  SET_LOADING_FLAG: 'SET_LOADING_FLAG_SEARCH',\r\n  UNSET_LOADING_FLAG: 'UNSET_LOADING_FLAG_SEARCH',\r\n  SET_SEARCH_GROUP: 'SET_SEARCH_GROUP_SEARCH',\r\n  SET_SEARCH_VALUE: 'SET_SEARCH_VALUE_SEARCH',\r\n};\r\n\r\nconst streamTypes = {\r\n  ASK_NEW_COMMENTS: 'ASK_NEW_COMMENTS_STREAM',  // UNUSED\r\n  SAVE_NEW_COMMENTS: 'SAVE_NEW_COMMENTS_STREAM',\r\n  CLEAR_COMMENTS: 'CLEAR_COMMENTS_STREAM',\r\n};\r\n\r\nconst apiTypes = {\r\n  SET_UNAVAILABLE: 'SET_UNAVAILABLE',\r\n  SET_AVAILABLE: 'SET_AVAILABLE',\r\n};\r\n\r\nconst editorTypes = {\r\n  APPEND_TAG: 'EDITOR_APPEND_TAG',\r\n  REMOVE_TAG: 'EDITOR_REMOVE_TAG',\r\n  EDIT_EXISTING_ARTICLE: 'EDITOR_EDIT_EXISTING_ARTICLE',\r\n  CREATE_ARTICLE: 'EDITOR_CREATE_ARTICLE',\r\n  SAVE_ARTICLE: 'EDITOR_SAVE_ARTICLE',\r\n  PUBLISH_ARTICLE: 'EDITOR_PUBLISH_ARTICLE',\r\n  CLEAR_ARTICLE: 'EDITOR_CLEAR_ARTICLE',\r\n  DELETE_ARTICLE: 'EDITOR_DELETE_ARTICLE',\r\n  SAVE_PREVIEW: 'EDITOR_SAVE_PREVIEW',\r\n  SAVE_CATEGORY: 'EDITOR_SAVE_CATEGORY',\r\n};\r\n\r\nconst readerTypes = {\r\n  SAVE_ARTICLE: 'READER_SAVE_ARTICLE',\r\n  OPEN_ARTICLE: 'READER_OPEN_ARTICLE',\r\n  SET_ARTICLE_LOADING: 'READER_SET_ARTICLE_LOADING',\r\n  SAVE_ARTICLE_COMMENTS: 'SAVE_ARTICLE_COMMENTS',\r\n};\r\n\r\nconst routerTypes = {\r\n  REDIRECT: 'REDIRECT',\r\n};\r\n\r\nconst SYSTYPES = {\r\n  INIT: '__INIT__',\r\n};\r\n\n\n//# sourceURL=webpack://saber_project/./public/flux/types.js?");

/***/ }),

/***/ "./public/globals.js":
/*!***************************!*\
  !*** ./public/globals.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"disableSW\": () => (/* binding */ disableSW),\n/* harmony export */   \"ajaxDebug\": () => (/* binding */ ajaxDebug),\n/* harmony export */   \"modalsDebug\": () => (/* binding */ modalsDebug),\n/* harmony export */   \"fluxDebug\": () => (/* binding */ fluxDebug),\n/* harmony export */   \"routerDebug\": () => (/* binding */ routerDebug),\n/* harmony export */   \"linkControllerDebug\": () => (/* binding */ linkControllerDebug),\n/* harmony export */   \"viewsDebug\": () => (/* binding */ viewsDebug),\n/* harmony export */   \"pageDebug\": () => (/* binding */ pageDebug),\n/* harmony export */   \"wsDebug\": () => (/* binding */ wsDebug)\n/* harmony export */ });\n// ///////////////////////////////// //\r\n//\r\n//          Globals\r\n//\r\n// ///////////////////////////////// //\r\n\r\n// const ajaxDebug = process && process.env.ajaxDebug === 'true';\r\nconst disableSW = true;\r\n\r\nconst ajaxDebug = true;\r\nconst modalsDebug = true;\r\nconst fluxDebug = true;\r\nconst routerDebug = true;\r\nconst linkControllerDebug = true;\r\nconst viewsDebug = true;\r\nconst pageDebug = true;\r\nconst wsDebug = true;\r\n\r\n\r\n\r\n// const ajaxDebug = false;\r\n// const modalsDebug = false;\r\n// const fluxDebug = false;\r\n// const routerDebug = false;\r\n// const linkControllerDebug = false;\r\n// const viewsDebug = false;\r\n// const pageDebug = false;\r\n// const wsDebug = false;\n\n//# sourceURL=webpack://saber_project/./public/globals.js?");

/***/ }),

/***/ "./public/main.js":
/*!************************!*\
  !*** ./public/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals.js */ \"./public/globals.js\");\n/* harmony import */ var _pages_mainPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pages/mainPage.js */ \"./public/pages/mainPage.js\");\n/* harmony import */ var _pages_profilePage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pages/profilePage.js */ \"./public/pages/profilePage.js\");\n/* harmony import */ var _pages_profileSettingsPage_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/profileSettingsPage.js */ \"./public/pages/profileSettingsPage.js\");\n/* harmony import */ var _pages_loadingScreen_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/loadingScreen.js */ \"./public/pages/loadingScreen.js\");\n/* harmony import */ var _pages_articleEditorPage_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/articleEditorPage.js */ \"./public/pages/articleEditorPage.js\");\n/* harmony import */ var _pages_articleReaderPage_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pages/articleReaderPage.js */ \"./public/pages/articleReaderPage.js\");\n/* harmony import */ var _pages_categoryPage_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pages/categoryPage.js */ \"./public/pages/categoryPage.js\");\n/* harmony import */ var _pages_signupPage_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./pages/signupPage.js */ \"./public/pages/signupPage.js\");\n/* harmony import */ var _pages_searchPage_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./pages/searchPage.js */ \"./public/pages/searchPage.js\");\n/* harmony import */ var _components_linksController_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/linksController.js */ \"./public/components/linksController.js\");\n/* harmony import */ var _components_router_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/router.js */ \"./public/components/router.js\");\n/* harmony import */ var _components_modal_signupModal_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/modal/signupModal.js */ \"./public/components/modal/signupModal.js\");\n/* harmony import */ var _components_modal_serviceWarning_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/modal/serviceWarning.js */ \"./public/components/modal/serviceWarning.js\");\n/* harmony import */ var _components_imgPreloader_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/imgPreloader.js */ \"./public/components/imgPreloader.js\");\n/* harmony import */ var _modules_ajaxRequests_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./modules/ajaxRequests.js */ \"./public/modules/ajaxRequests.js\");\n/* harmony import */ var _modules_webSocket_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules/webSocket.js */ \"./public/modules/webSocket.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./flux/store.js */ \"./public/flux/store.js\");\n\r\n\r\n\r\n\r\n// pages\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Controllers\r\n\r\n\r\n\r\n// components\r\n\r\n\r\n\r\n\r\n// network\r\n\r\n\r\n// eslint-disable-next-line no-unused-vars\r\n\r\n\r\n// flux store\r\n\r\n\r\n// Preload\r\n_components_imgPreloader_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"].upload([\r\n  'static/img/background-space.png',\r\n  'static/img/background.png',\r\n  'static/img/icons/cross.svg',\r\n  'static/img/icons/eye-closed.svg',\r\n  'static/img/icons/eye-open.svg',\r\n  'static/img/icons/key.svg',\r\n  'static/img/icons/mail.svg',\r\n  'static/img/icons/username.svg',\r\n  'static/img/icons/like.svg',\r\n  'static/img/icons/like_hover.svg',\r\n  'static/img/icons/comment.svg',\r\n  'static/img/icons/comment_hover.svg',\r\n  'static/img/icons/share.svg',\r\n  'static/img/icons/share_hover.svg',\r\n  'static/img/icons/trash.svg',\r\n  'static/img/icons/trash_hover.svg',\r\n  'static/img/icons/search.svg',\r\n  'static/img/icons/search_hover.svg',\r\n  'static/img/icons/send.svg',\r\n]);\r\n\r\n\r\n// ServiceWorker\r\nconst SWJSFile = 'serviceWorker.js';\r\n\r\nif ('serviceWorker' in navigator && !_globals_js__WEBPACK_IMPORTED_MODULE_0__.disableSW) {\r\n  navigator.serviceWorker.register(SWJSFile, {scope: '/'})\r\n      .then((registration) => {\r\n        console.warn('sw registration on scope:', registration.scope);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n} else {\r\n  console.warn('ServiceWorker is unable in navigator');\r\n}\r\n\r\nconst root = document.getElementById('root');\r\nconst router = new _components_router_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"](root);\r\nconst linksController = new _components_linksController_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"](root);\r\n// экран загрузки\r\nconst loadingScreen = new _pages_loadingScreen_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\r\n\r\n_components_modal_serviceWarning_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].init();\r\n// ///////////////////////////////// //\r\n//\r\n//        Настройки переходов\r\n//\r\n// ///////////////////////////////// //\r\nrouter\r\n    .register('/', _pages_mainPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\r\n    .register('/profile', _pages_profilePage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])\r\n    .registerPattern('/user/<login>', _pages_profilePage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])\r\n    .registerPattern('/article/<id>', _pages_articleReaderPage_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])\r\n    .register('/profile/settings', _pages_profileSettingsPage_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])\r\n    .register('/editor', _pages_articleEditorPage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])\r\n    .registerPattern('/categories/<сategory>', _pages_categoryPage_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])\r\n    .register('/categories', _pages_categoryPage_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])\r\n    .register('/login', _pages_signupPage_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])\r\n    .register('/search', _pages_searchPage_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\r\n\r\nlinksController\r\n    .register(\r\n        'signupModal',\r\n        _components_modal_signupModal_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"].show,\r\n        true,\r\n    )\r\n    .register(\r\n        'loginModal',\r\n        _components_modal_signupModal_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"].show,\r\n        false,\r\n    )\r\n    .register(\r\n        'logout',\r\n        () => {\r\n          if (_flux_store_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"].getState().authorization.isAuthenticated) {\r\n            (0,_modules_ajaxRequests_js__WEBPACK_IMPORTED_MODULE_15__.logoutRequest)();\r\n          }\r\n        },\r\n    )\r\n    .register(\r\n        'back',\r\n        () => window.history.back(),\r\n    );\r\n\r\nloadingScreen.start();\r\n(async function init() {\r\n  await (0,_modules_ajaxRequests_js__WEBPACK_IMPORTED_MODULE_15__.cookieLogin)();\r\n  await loadingScreen.end();\r\n  linksController.enable();\r\n  router.start();\r\n})();\r\n\n\n//# sourceURL=webpack://saber_project/./public/main.js?");

/***/ }),

/***/ "./public/modules/ajax.js":
/*!********************************!*\
  !*** ./public/modules/ajax.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n// Поменять тут, в server/server.js, server/server-api.js (не забыть CORS)\r\n// Тачка Алексея\r\n// const APIurl = 'http://87.228.2.178:8081/api/v1';\r\n// Тачка Дорофеева\r\nconst APIurl = 'http://89.208.197.247:8081/api/v1';\r\n// Локальная разработка\r\n// const APIurl = 'http://localhost:8081/api/v1';\r\n\r\n/**\r\n * Поддерживаемые методы: GET и POST\r\n * @typedef {Object} AjaxMethod\r\n * @property {string} post\r\n * @property {string} get\r\n */\r\nconst ajaxMethods = {\r\n  post: 'POST',\r\n  get: 'GET',\r\n};\r\n\r\n/**\r\n * Поддерживаемые http-статусы ответа: 200, 400, 404\r\n * @typedef {Object} AjaxStatus\r\n * @property {number} ok\r\n * @property {number} notFound\r\n * @property {number} badRequest\r\n */\r\nconst ajaxStatuses = {\r\n  ok: 200,\r\n  notFound: 404,\r\n  // redirect: 303,\r\n  badRequest: 400,\r\n  invalidSession: 424,\r\n};\r\n\r\n/**\r\n * Выполняет ajax-запрос на сервер. При успешном выполнении вызывает callback\r\n * @param {Object} requestParams\r\n * @property {AjaxMethod} [method = \"GET\"]\r\n * @property {Url} [url = '/']\r\n * @property {any} body\r\n * @return {Promise}\r\n */\r\nfunction ajax(requestParams) {\r\n  const url = APIurl + (requestParams.url || '/');\r\n  const fetchParams = {\r\n    body: JSON.stringify(requestParams.body),\r\n    mode: 'cors',\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: requestParams.method,\r\n  };\r\n\r\n  if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.ajaxDebug) {\r\n    console.log('ajax request', {url}, ': ' + JSON.stringify(fetchParams));\r\n  }\r\n\r\n  let status = 0;\r\n  return fetch(url, fetchParams)\r\n      .then((response) => {\r\n        status = response.status;\r\n        return response.json();\r\n      })\r\n      .then((response) => {\r\n        if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.ajaxDebug) {\r\n          console.log('ajax resolved ' + status + ': ');\r\n          console.log(response);\r\n        }\r\n        return {\r\n          status,\r\n          response,\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.warn(error);\r\n      });\r\n}\r\n\r\n/**\r\n * Выполняет отправку фото на сервер. При успешном выполнении вызывает callback\r\n * @param {Object} requestParams\r\n * @property {Url} [url = '/']\r\n * @property {any} body\r\n * @return {Promise}\r\n */\r\nfunction postFile(requestParams) {\r\n  const url = APIurl + (requestParams.url || '/');\r\n  const formData = new FormData();\r\n  formData.append('img', requestParams.body);\r\n  const fetchParams = {\r\n    body: formData,\r\n    mode: 'cors',\r\n    credentials: 'include',\r\n    // https://muffinman.io/blog/uploading-files-using-fetch-multipart-form-data/\r\n    // headers: {\r\n    //   'Content-Type': 'multipart/form-data',\r\n    // },\r\n    method: ajaxMethods.post,\r\n  };\r\n\r\n  if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.ajaxDebug) {\r\n    console.log('ajax file post request', {url},\r\n        ': ' + JSON.stringify(fetchParams));\r\n  }\r\n\r\n  let status = 0;\r\n  return fetch(url, fetchParams)\r\n      .then((response) => {\r\n        status = response.status;\r\n        return response.json();\r\n      })\r\n      .then((response) => {\r\n        if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.ajaxDebug) {\r\n          console.log('ajax resolved ' + status + ': ');\r\n          console.log(response);\r\n        }\r\n        return {\r\n          status,\r\n          response,\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.warn(error);\r\n      });\r\n}\r\n\r\n// Плагин для общения с API\r\nconst Ajax = {\r\n  AJAX_METHODS: ajaxMethods,\r\n  STATUS: ajaxStatuses,\r\n  get: (requestParams) => ajax({method: ajaxMethods.get, ...requestParams}),\r\n  post: (requestParams) => ajax({method: ajaxMethods.post, ...requestParams}),\r\n  postFile,\r\n  APIurl,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Ajax);\r\n\n\n//# sourceURL=webpack://saber_project/./public/modules/ajax.js?");

/***/ }),

/***/ "./public/modules/ajaxRequests.js":
/*!****************************************!*\
  !*** ./public/modules/ajaxRequests.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logoutRequest\": () => (/* binding */ logoutRequest),\n/* harmony export */   \"cookieLogin\": () => (/* binding */ cookieLogin),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _ajax_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst RETRY_DELAY = 30000;\r\n/**\r\n * Выполняет logout-запрос на сервер. При успешном выполнении вызывает\r\n * событие authorizationTypes.LOGOUT\r\n */\r\nfunction logoutRequest() {\r\n  _ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post({\r\n    url: '/user/logout',\r\n    body: {},\r\n  })\r\n      .then(() => _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_2__.authorizationActions.logout()));\r\n}\r\n\r\n/**\r\n * Попытка аутентификации пользователя\r\n * через куки, например, при загрузке приложения\r\n * При успешном выполнении вызывает\r\n * событие authorizationTypes.LOGIN\r\n * @return {Promise}\r\n */\r\nfunction cookieLogin() {\r\n  return _ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post({\r\n    url: '/',\r\n    body: {},\r\n  })\r\n      .then(\r\n          ({status, response}) => {\r\n            if (status === _ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].STATUS.ok) {\r\n              _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_2__.authorizationActions.login(response.data));\r\n            }\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_2__.apiActions.setAvailable());\r\n          })\r\n      .catch((error) => {\r\n        if (_globals_js__WEBPACK_IMPORTED_MODULE_3__.ajaxDebug) {\r\n          console.warn('[AJAX]', error.message);\r\n        }\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_2__.apiActions.setUnavailable());\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch((dispatch, getState) => {\r\n          setTimeout(cookieLogin, RETRY_DELAY);\r\n        });\r\n      });\r\n}\r\n\r\nconst ajaxRequests = {\r\n  cookieLogin,\r\n  logoutRequest,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ajaxRequests);\r\n\n\n//# sourceURL=webpack://saber_project/./public/modules/ajaxRequests.js?");

/***/ }),

/***/ "./public/modules/webSocket.js":
/*!*************************************!*\
  !*** ./public/modules/webSocket.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_streamActions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/actions/streamActions.js */ \"./public/flux/actions/streamActions.js\");\n\r\n\r\n\r\n\r\n\r\n// Тачка Дорофеева\r\nconst APIurl = 'ws://89.208.197.247:8081/api/v1/ws';\r\n// Локальная разработка (Запусти node server/serverWs.js)\r\n// const APIurl = 'ws://localhost:8082';\r\n\r\nconst webSocket = new WebSocket(APIurl);\r\n\r\nwebSocket.onopen = function(e) {\r\n  console.log('webSocket: Соединение установлено');\r\n};\r\n\r\nwebSocket.onmessage = function(event) {\r\n  console.log(`webSocket: Данные получены с сервера: ${event.data}`);\r\n\r\n  let data = '';\r\n  try {\r\n    data = JSON.parse(event.data);\r\n  } catch (e) {\r\n    console.warn(e.message);\r\n    return;\r\n  }\r\n\r\n  if (data.type = 'stream-comment') {\r\n    addStreamComment(data);\r\n  }\r\n};\r\n\r\nwebSocket.onclose = function(event) {\r\n  if (event.wasClean) {\r\n    console.log(`webSocket: Соединение закрыто чисто, \\\r\n      код=${event.code} причина=${event.reason}`);\r\n  } else {\r\n    console.warn('Соединение прервано');\r\n  }\r\n};\r\n\r\nwebSocket.onerror = function(error) {\r\n  console.warn(`webSocket: error: ${error.message}`);\r\n};\r\n\r\n/**\r\n * Добавляет стрим-комментарий\r\n * @param {Object} data\r\n */\r\nfunction addStreamComment(data) {\r\n  (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_0__.appendApiImg)(data.author);\r\n  // TODO: убрать костыль. Страница не успевает рендерится\r\n  // setTimeout(() => {\r\n  //   const streamComments = document.querySelector('.sidebar__streams');\r\n  //   appendApiImg(data.author);\r\n  //   const streamComment = streamCommentComponent({\r\n  //     id: data.id,\r\n  //     avatarUrl: data.author.avatarUrl,\r\n  //     firstName: data.author.firstName,\r\n  //     lastName: data.author.lastName,\r\n  //     text: data.text,\r\n  //   });\r\n\r\n  //   streamComments.insertAdjacentHTML('afterbegin', streamComment);\r\n  // }, 1500);\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].dispatch(_flux_actions_streamActions_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].saveNewComments([data]));\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (webSocket);\r\n\n\n//# sourceURL=webpack://saber_project/./public/modules/webSocket.js?");

/***/ }),

/***/ "./public/pages/_createPage.js":
/*!*************************************!*\
  !*** ./public/pages/_createPage.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ createPage)\n/* harmony export */ });\n/* harmony import */ var _components_basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/_basic/baseComponent.js */ \"./public/components/_basic/baseComponent.js\");\n/* harmony import */ var _components_header_header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/header/header.js */ \"./public/components/header/header.js\");\n/* harmony import */ var _components_sidebar_sidebar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/sidebar/sidebar.js */ \"./public/components/sidebar/sidebar.js\");\n\r\n\r\n\r\n\r\n// синглтоны\r\nlet header = null;\r\nlet sidebar = null;\r\n\r\n/**\r\n  * Генерирует HTML-страницу проекта\r\n  * Заполняет блок .content элементами elements в порядке следования\r\n  * @param  {string} title\r\n  * @param  {...BaseComponent} elements\r\n  * @return {HTMLElement}\r\n  */\r\nfunction createPage(title, ...elements) {\r\n  if (header === null || sidebar === null) {\r\n    header = new _components_header_header_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\r\n    sidebar = new _components_sidebar_sidebar_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\r\n  }\r\n  const bkgDiv = document.createElement('div');\r\n  bkgDiv.className = 'background';\r\n  const screenDiv = document.createElement('div');\r\n  screenDiv.className = 'screen';\r\n  const pageDiv = document.createElement('div');\r\n  pageDiv.className = 'page';\r\n  const pageTitleDiv = document.createElement('div');\r\n  pageTitleDiv.className = 'page_title';\r\n  pageTitleDiv.textContent = title;\r\n  const contentDiv = document.createElement('div');\r\n  contentDiv.className = 'content';\r\n\r\n  elements.forEach((element) => {\r\n    if (element instanceof _components_basic_baseComponent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\r\n      contentDiv.appendChild(element.render());\r\n    } else if (element instanceof HTMLElement) {\r\n      contentDiv.appendChild(element);\r\n    } else {\r\n      console.warn(element, 'is not BaseComponent nor HTMLElement');\r\n    }\r\n  });\r\n\r\n  pageDiv.appendChild(header.render());\r\n  pageDiv.appendChild(pageTitleDiv);\r\n  pageDiv.appendChild(contentDiv);\r\n  screenDiv.appendChild(pageDiv);\r\n  screenDiv.appendChild(sidebar.render());\r\n  bkgDiv.appendChild(screenDiv);\r\n  return bkgDiv;\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/_createPage.js?");

/***/ }),

/***/ "./public/pages/articleEditorPage.js":
/*!*******************************************!*\
  !*** ./public/pages/articleEditorPage.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditorPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _articleEditorView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./articleEditorView.js */ \"./public/pages/articleEditorView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n   * Проверяет состояние editor\r\n   * @return {boolean}\r\n   */\r\nfunction isUpdate() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().editor;\r\n  return typeof state.currentId === 'string' && state.currentId !== '0' ||\r\n         typeof state.currentId === 'number' && state.currentId !== 0;\r\n}\r\n\r\n/**\r\n * @class EditorPage\r\n */\r\nclass EditorPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _articleEditorView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_4__.authorizationTypes.LOGOUT, () => {\r\n      console.log('[ArticleEditorPage] Logout reaction');\r\n      if (this.isActive()) {\r\n        _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warn(\r\n            'Вы неавторизованы',\r\n            `Чтобы продолжить редактирование, выполните повторный вход.\r\n            Текущее состояние сохранено. Не перезагружайте страницу.`,\r\n            () => (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_6__.redirect)('/'),\r\n        );\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_5__.changePageActions.changePage(\r\n            'editor',\r\n            `SaberProject | ${isUpdate() ? 'Edit' : 'Create'} article`,\r\n        ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Вызывается в роутере. Если return не '', нужно выполнить переход\r\n   * по пути, возвращенному из функции\r\n   *\r\n   * Возможны редиректы на: /login\r\n   * @param {string} currentPath\r\n   * @return {string}\r\n   */\r\n  redirect(currentPath) {\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization.isAuthenticated) {\r\n      return '';\r\n    }\r\n    return '/login';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/articleEditorPage.js?");

/***/ }),

/***/ "./public/pages/articleEditorView.js":
/*!*******************************************!*\
  !*** ./public/pages/articleEditorView.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditorView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_editor_editor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/editor/editor.js */ \"./public/components/editor/editor.js\");\n\r\n\r\n\r\n\r\n// import {genRanHexColor} from '../common/utils.js';\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Article Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - редактор статьи.\r\n * @class EditorView\r\n */\r\nclass EditorView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.pageComponents = {\r\n      editor: new _components_editor_editor_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Отрисовка страницы\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\r\n        '',\r\n        this.pageComponents.editor,\r\n    ));\r\n  }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/articleEditorView.js?");

/***/ }),

/***/ "./public/pages/articleReaderPage.js":
/*!*******************************************!*\
  !*** ./public/pages/articleReaderPage.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ReaderPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _articleReaderPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./articleReaderPageView.js */ \"./public/pages/articleReaderPageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions/readerActions.js */ \"./public/flux/actions/readerActions.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @class ReaderPage\r\n */\r\nclass ReaderPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _articleReaderPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n  }\r\n\r\n  /**\r\n   * Страница содержит главный компонент - интерфейс просмотра статьи.\r\n   * Компонент управляется собственным StateObject Reader\r\n   */\r\n  show() {\r\n    super.show();\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.changePageActions.changePage(\r\n            'reader',\r\n            `SaberProject | Article View`,\r\n        ),\r\n    );\r\n    // берем id из урла\r\n    const idUrlParam = document.URL.slice(document.URL.indexOf('article/') + 8);\r\n    console.warn('[ArticleReaderPage] id from Url ', document.URL, idUrlParam);\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setArticleLoading({id: idUrlParam}));\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].openArticle(idUrlParam));\r\n\r\n    let responseStatus = 0;\r\n    _modules_ajax_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get({url: `/articles?id=${idUrlParam}`})\r\n        .then(({status, response}) => new Promise((resolve, reject) => {\r\n          if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].STATUS.ok) {\r\n            resolve(response.data);\r\n          } else {\r\n            responseStatus = status;\r\n            reject(new Error(response.msg));\r\n          }\r\n        }))\r\n        .then((article) => {\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].saveArticle(article));\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].openArticle(article.id));\r\n        })\r\n        .then(() => _modules_ajax_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get({url: `/comments?id=${idUrlParam}`}))\r\n        .then(({status, response}) => new Promise((resolve, reject) => {\r\n          if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].STATUS.ok) {\r\n            resolve(response.data);\r\n          } else {\r\n            responseStatus = status;\r\n            reject(new Error(`Комментарии загрузить не удалось\r\n            ${response.msg}`));\r\n          }\r\n        }))\r\n        // рисуем комменты\r\n        .then((comments) => {\r\n          // TODO: приходят не строки. Хорошо бы, чтоы Леша пофиксил\r\n          // здесь можно преобразовать типы при необходимости.\r\n          comments.forEach((element) => {\r\n            (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.appendApiImg)(element.author);\r\n            // привожу 2021/11/23 13:13 к ISO 8601\r\n            // https://ru.wikipedia.org/wiki/ISO_8601\r\n            element.datetimeMS = (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.translateServerDateToMS)(element.dateTime);\r\n            delete element.dateTime;\r\n            element.datetime = (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.getRusDateTime)(element.datetimeMS);\r\n          });\r\n          const baseComments = comments.filter((el) => el.parentId === 0);\r\n          baseComments.forEach((baseComment) => {\r\n            baseComment.answers = comments\r\n                .filter((el) => el.parentId === baseComment.id)\r\n                // TODO: проверить\r\n                .sort((a, b) => a.datetimeMS < b.datetimeMS ? -1 : 1);\r\n            // .sort((a, b) => {\r\n            //   if (a.datetime < b.datetime) {\r\n            //     return -1;\r\n            //   } else {\r\n            //     return 1;\r\n            //   }\r\n            // });\r\n          });\r\n          _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n              _flux_actions_readerActions_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].saveArticleComments(idUrlParam, comments),\r\n          );\r\n        })\r\n        // не удалось загрузить статью или произошла другая ошибка\r\n        .catch((err) => {\r\n          if (responseStatus !== 0) {\r\n            (0,_components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_6__.showModalNetOrServerError)(responseStatus, err.message);\r\n          } else {\r\n            console.warn(err.message);\r\n          }\r\n        });\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/articleReaderPage.js?");

/***/ }),

/***/ "./public/pages/articleReaderPageView.js":
/*!***********************************************!*\
  !*** ./public/pages/articleReaderPageView.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ReaderPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_reader_reader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/reader/reader.js */ \"./public/components/reader/reader.js\");\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Article Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - HTML-контент статьи.\r\n * @class ReaderView\r\n */\r\nclass ReaderPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.pageComponents = {\r\n      reader: new _components_reader_reader_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Отрисовка страницы\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\r\n        '',\r\n        this.pageComponents.reader,\r\n    ));\r\n  }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/articleReaderPageView.js?");

/***/ }),

/***/ "./public/pages/basePageMV.js":
/*!************************************!*\
  !*** ./public/pages/basePageMV.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BasePageMV)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n/**\r\n * ModalView-контроллер для соответсвующих страниц\r\n * @class BasePageMV\r\n */\r\nclass BasePageMV {\r\n  /**\r\n   * Страница содержит главный компонент - .\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.pageDebug) {\r\n      console.log(`[PAGE ${this.constructor.name}]\\tinit`);\r\n    }\r\n    this.view = new _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](root);\r\n  }\r\n\r\n  /**\r\n   * true - эдемент активен, его нежелательно перетирать\r\n   * @return {boolean}\r\n   */\r\n  isActive() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.pageDebug) {\r\n      console.log(`[PAGE ${this.constructor.name}]\\tisActive`);\r\n    }\r\n    return this.view.isActive();\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.pageDebug) {\r\n      console.log(`[PAGE ${this.constructor.name}]\\thide`);\r\n    }\r\n    this.view.hide();\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   * Должен быть вызван render() для обновления.\r\n   */\r\n  show() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_1__.pageDebug) {\r\n      console.log(`[PAGE ${this.constructor.name}]\\tshow`);\r\n    }\r\n    this.view.show();\r\n  }\r\n\r\n  /**\r\n   * Вызывается в роутере. Если return не '', нужно выполнить переход\r\n   * по пути, возвращенному из функции\r\n   * @param {string} currentPath\r\n   * @return {string}\r\n   */\r\n  redirect(currentPath) {\r\n    return '';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/basePageMV.js?");

/***/ }),

/***/ "./public/pages/basePageView.js":
/*!**************************************!*\
  !*** ./public/pages/basePageView.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BasePageView)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n/**\r\n * View для соответсвующих страниц\r\n * @class BasePageView\r\n */\r\nclass BasePageView {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    this.root = root;\r\n    this.root.dataset.view = this.constructor.name;\r\n    this.root.hidden = true;\r\n  }\r\n\r\n  /**\r\n   * true - эдемент активен, его нежелательно перетирать\r\n   * @return {boolean}\r\n   */\r\n  isActive() {\r\n    return !this.root.hidden;\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    this.root.hidden = true;\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   * Должен быть вызван render() для обновления.\r\n   */\r\n  show() {\r\n    this.root.hidden = false;\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Стереть подконтрольную страницу\r\n   */\r\n  render() {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_0__.pageDebug) {\r\n      console.log(`[PAGE ${this.constructor.name}]\\trender`);\r\n    }\r\n    this.root.innerHTML = '';\r\n    // this.root.appendChild(createPage(заголовок, контент));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/basePageView.js?");

/***/ }),

/***/ "./public/pages/categoryPage.js":
/*!**************************************!*\
  !*** ./public/pages/categoryPage.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CategoryPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _categoryPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categoryPageView.js */ \"./public/pages/categoryPageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/actions/categoryPageActions.js */ \"./public/flux/actions/categoryPageActions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/modal/modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//             Category Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Обработчик scroll, который можно будет удалить\r\n * Проверяет, достигнут ли конец ленты\r\n * @param {event} event\r\n */\r\nfunction newsFeedEndReachEventAction({currentTarget}) {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().categoryPage;\r\n  const trackedElement = currentTarget.querySelector('#feed__loading');\r\n  // работаем, только если отслеживаемый элемент\r\n  // находися в области видимости пользователя\r\n  if (state.isLoading || state.isEndFound ||\r\n    trackedElement.getBoundingClientRect().y > (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.getUserWindowHeight)()) {\r\n    return;\r\n  }\r\n  console.log('[Category Page] scroll trigger');\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadCategoryCards);\r\n}\r\n\r\n/**\r\n * Получить feedChunkSize записей (настройка на стороне сервера)\r\n */\r\nasync function uploadCategoryCards() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().categoryPage;\r\n\r\n  if (state.isEndFound || state.isLoading) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n      console.log('[Category Page] Can\\'t load articles on ' +\r\n        'as isEndFound state flag is true');\r\n    }\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Обработчик для ответа с сервера\r\n   * @param {Object} cards\r\n   */\r\n  function onLoad(cards) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n      console.log('[Category Page] more news loaded!');\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].saveNewCategoryArticles(\r\n            cards.length ? cards[cards.length - 1].id : state.idLastLoaded,\r\n            cards,\r\n        ),\r\n    );\r\n  };\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setCategoryArticlesLoadingFlag());\r\n\r\n  await _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get({\r\n    url: `/articles/category?idLastLoaded=${state.idLastLoaded}` +\r\n        `&category=${state.currentCategory}`,\r\n  })\r\n      .then(({status, response}) => {\r\n        if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].STATUS.ok) {\r\n          onLoad(response.data);\r\n          return;\r\n        }\r\n\r\n        if (status / 500 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setTitle(`Сервис временно не доступен: ${status}`);\r\n        }\r\n        if (status / 400 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setTitle(/* пользовательская */`Ошибка ${status}`);\r\n        }\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setContent(response.msg);\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].open(false);\r\n      })\r\n      .catch((err) => console.warn(err.message));\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].unsetCategoryArticlesLoadingFlag());\r\n}\r\n\r\n/**\r\n * @class CategoryPage\r\n */\r\nclass CategoryPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _categoryPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    // обновить ленту в соответствии с фильтром\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.SELECT_CATEGORY, (category) => {\r\n      if (category !== '') {\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].clearCategoryArticles());\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].allowCategoryArticlesLoading());\r\n        uploadCategoryCards();\r\n      }\r\n      history.pushState(\r\n          null,\r\n          '',\r\n          '/categories' + (category !== '' ? '/' + category : ''),\r\n      );\r\n      // меняем и тайтл\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n          _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.changePageActions.changePage(\r\n              'categories',\r\n              `SaberProject |\r\n              ${category !== '' ?\r\n              (category.charAt(0).toUpperCase() + category.slice(1)) :\r\n              'Categories'}`,\r\n          ),\r\n      );\r\n    });\r\n\r\n    // Обновить ленту, если есть изменения в статье или пользователь\r\n    // опубликовал новую\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.editorTypes.PUBLISH_ARTICLE, () => {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].clearCategoryArticles());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n\r\n    const scrollable = document.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[Category Page] нет дивака .content');\r\n    } else {\r\n      scrollable.addEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    super.hide();\r\n    const scrollable = document.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[Category Page] нет дивака .content');\r\n    } else {\r\n      scrollable.removeEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * true - эдемент активен, его нежелательно перетирать\r\n   * @return {boolean}\r\n   */\r\n  isActive() {\r\n    let category = '';\r\n    const idx = document.URL.indexOf('categories/');\r\n    if (idx !== -1) {\r\n      try {\r\n        category = decodeURI(document.URL.slice(idx + 11));\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n      console.log('[CategoryPage] (isActive) category from Url:',\r\n          category);\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].selectCategory(category));\r\n    } else if (document.URL.indexOf('categories') !== -1) {\r\n      // Если была выбрана категория, но юзер перешел по урлу на categories\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].clearSelectedCategory());\r\n    }\r\n\r\n    // Чтобы спрятать анимацию загрузки, пока Category не выбранa\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().categoryPage.currentCategory === '') {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].forbidCategoryArticlesLoading());\r\n    }\r\n\r\n    return super.isActive();\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/categoryPage.js?");

/***/ }),

/***/ "./public/pages/categoryPageView.js":
/*!******************************************!*\
  !*** ./public/pages/categoryPageView.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CategoryPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/feed/feed.js */ \"./public/components/feed/feed.js\");\n/* harmony import */ var _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/feed/composeCardStandart.js */ \"./public/components/feed/composeCardStandart.js\");\n/* harmony import */ var _components_categoryChoiceBar_categoryChoiceBar_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/categoryChoiceBar/categoryChoiceBar.js */ \"./public/components/categoryChoiceBar/categoryChoiceBar.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../flux/actions/categoryPageActions.js */ \"./public/flux/actions/categoryPageActions.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//          Category Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - ленту новостей, с фильтром по тегам.\r\n * @class CategoryPage\r\n */\r\nclass CategoryPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    // root не трогать\r\n    super(root);\r\n\r\n    this.pageComponents = {\r\n      categoryChoose: new _components_categoryChoiceBar_categoryChoiceBar_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](\r\n          () => _flux_store_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getState().categoryPage.currentCategory,\r\n          _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].selectCategory,\r\n          _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].clearSelectedCategory,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.SELECT_CATEGORY,\r\n      ),\r\n      feed: new _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\r\n          _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n          'categoryPage',\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.SAVE_NEW_CATEGORY_ARTICLES,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.CLEAR_CATEGORY_ARTICLES,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.FORBID_CATEGORY_ARTICLES_UPLOADING,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.categoryPageTypes.ALLOW_CATEGORY_ARTICLES_UPLOADING,\r\n          _flux_actions_categoryPageActions_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].forbidCategoryArticlesLoading,\r\n          () => {\r\n            console.log('{CategoryPage feed} isEndFound is not been reset');\r\n            return {type: '__EMPTY__'};\r\n          },\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    */\r\n  render() {\r\n    super.render();\r\n\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\r\n        'Поиск по категориям',\r\n        this.pageComponents.categoryChoose,\r\n        this.pageComponents.feed,\r\n    ));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/categoryPageView.js?");

/***/ }),

/***/ "./public/pages/loadingScreen.js":
/*!***************************************!*\
  !*** ./public/pages/loadingScreen.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LoadingPage)\n/* harmony export */ });\n/* harmony import */ var _components_loading_loading_pug_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/loading/loading.pug.js */ \"./public/components/loading/loading.pug.js\");\n\r\n\r\nconst SPEED_MIN_LIMIT = 100;  // 1000 frames ~ 10% of progress\r\nconst INITIAL_SPEED = 400;  // 1000 frames ~ 40% of progress\r\nconst PROGRESS_STOP_AT = 75;  // %\r\nconst SPEED_ON_END = 1000;  // 1000 frames ~ 100% of progress\r\n\r\n/**\r\n * @class LoadingPage\r\n * @module LoadingPage\r\n */\r\nclass LoadingPage {\r\n  /**\r\n  * фон во время загрузки приложения\r\n  */\r\n  constructor() {\r\n    this.progressValue = 0;\r\n    this.root = document.createElement('div');\r\n    this.root.className = 'background';\r\n    this.root.innerHTML = (0,_components_loading_loading_pug_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\r\n      progressValue: this.progressValue,\r\n    });\r\n    this.progressBar = this.root.querySelector('progress');\r\n    this.animationId = 0;\r\n  }\r\n\r\n  /**\r\n   * Начать продвижение загрузки\r\n   */\r\n  async start() {\r\n    const root = document.getElementById('root');\r\n    root.innerHTML = '';\r\n    root.appendChild(this.root);\r\n\r\n    let prevTimestamp = performance.now();\r\n    let speed = INITIAL_SPEED;\r\n\r\n    const step = (timestamp) => {\r\n      this.progressValue += (timestamp - prevTimestamp) * speed / 10000;\r\n      prevTimestamp = timestamp;\r\n      if (this.progressValue < PROGRESS_STOP_AT) {\r\n        speed--;\r\n        if (speed < SPEED_MIN_LIMIT) {\r\n          speed = SPEED_MIN_LIMIT;\r\n        }\r\n        this.progressBar.value = this.progressValue;\r\n        window.requestAnimationFrame(step);\r\n      }\r\n    };\r\n\r\n    // начать анимацию\r\n    this.animationId = window.requestAnimationFrame(step);\r\n  }\r\n\r\n  /**\r\n   * Довести прогресс-бар до конца\r\n   */\r\n  async end() {\r\n    // остановить анимацию, если еще идет\r\n    window.cancelAnimationFrame(this.animationId);\r\n\r\n    await new Promise((resolve) => {\r\n      let prevTimestamp = performance.now();\r\n\r\n      const step = (timestamp) => {\r\n        this.progressValue += (timestamp - prevTimestamp) *SPEED_ON_END / 10000;\r\n        prevTimestamp = timestamp;\r\n        if (this.progressValue < 100) {\r\n          this.progressBar.value = this.progressValue;\r\n          window.requestAnimationFrame(step);\r\n        } else {\r\n          resolve();\r\n        }\r\n      };\r\n\r\n      // начать анимацию\r\n      step(performance.now());\r\n    });\r\n\r\n    // убрать за собой\r\n    const root = document.getElementById('root');\r\n    root.innerHTML = '';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/loadingScreen.js?");

/***/ }),

/***/ "./public/pages/mainPage.js":
/*!**********************************!*\
  !*** ./public/pages/mainPage.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MainPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _mainPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mainPageView.js */ \"./public/pages/mainPageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/modal/modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Main Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Обработчик scroll, который можно будет удалить\r\n * Проверяет, достигнут ли конец ленты\r\n * @param {event} event\r\n */\r\nfunction newsFeedEndReachEventAction({currentTarget}) {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().mainPage;\r\n  const trackedCard = currentTarget.querySelector('#feed__loading');\r\n  // работаем, только если отслеживаемый элемент\r\n  // находися в области видимости пользователя.\r\n  // При этом не находимся в состоянии ожидания запроса\r\n  // и трекинг-элемент не скрыт (при display: none - y = 0)\r\n  if (state.isLoading || state.isEndFound ||\r\n    trackedCard.getBoundingClientRect().y > (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.getUserWindowHeight)()) {\r\n    return;\r\n  }\r\n  console.log('[Main Page] scroll trigger');\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextCards);\r\n}\r\n\r\n/**\r\n * Получить feedChunkSize записей (настройка на стороне сервера)\r\n */\r\nasync function uploadNextCards() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().mainPage;\r\n  const stateAuth = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization;\r\n\r\n  if (state.isEndFound || state.isLoading) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_8__.ajaxDebug) {\r\n      console.log('[Main Page] can\\'t load news as' +\r\n        'isEndFound state flag is true');\r\n    }\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Обработчик для ответа с сервера\r\n   * @param {Object} cards\r\n   */\r\n  function onLoad(cards) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_8__.ajaxDebug) {\r\n      console.log('[Main Page] more news loaded!');\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.mainPageActions.saveNewCards(\r\n            cards.length ? cards[cards.length - 1].id : state.idLastLoaded,\r\n            cards,\r\n        ),\r\n    );\r\n  };\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.mainPageActions.setLoadingFlag());\r\n\r\n  await _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get({\r\n    url: `/articles/feed?idLastLoaded=${state.idLastLoaded || ''}` +\r\n      '&login=' +\r\n      (stateAuth.isAuthenticated ? stateAuth.login : 'all'),\r\n  })\r\n      .then(({status, response}) => {\r\n        if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n          onLoad(response.data);\r\n          return;\r\n        }\r\n\r\n        if (status / 500 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setTitle(`Сервис временно не доступен: ${status}`);\r\n        }\r\n        if (status / 400 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setTitle(/* пользовательская */`Ошибка ${status}`);\r\n        }\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setContent(response.msg);\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].open(false);\r\n      })\r\n      .catch((err) => console.warn(err.message));\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.mainPageActions.unsetLoadingFlag());\r\n}\r\n\r\n/**\r\n * @class MainPage\r\n * @module MainPage\r\n */\r\nclass MainPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _mainPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    // TODO: (неприоритет) добавить экшны на обновление записи и удаление, чтобы\r\n    // не скачивать ленту еще раз. Во всех лентах.\r\n    // Обновить ленту, если есть изменения в статье или пользователь\r\n    // опубликовал новую\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_4__.editorTypes.PUBLISH_ARTICLE, () => {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.mainPageActions.clearCards());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.changePageActions.changePage(\r\n            'main',\r\n            `SaberProject`,\r\n        ),\r\n    );\r\n\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().mainPage.cards.length === 0) {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextCards);\r\n    }\r\n\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[Main Page] нет дивака .content');\r\n    } else {\r\n      scrollable.addEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    super.hide();\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[MainPage] нет дивака .content');\r\n    } else {\r\n      scrollable.removeEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/mainPage.js?");

/***/ }),

/***/ "./public/pages/mainPageView.js":
/*!**************************************!*\
  !*** ./public/pages/mainPageView.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MainPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/feed/feed.js */ \"./public/components/feed/feed.js\");\n/* harmony import */ var _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/feed/composeCardStandart.js */ \"./public/components/feed/composeCardStandart.js\");\n/* harmony import */ var _components_feed_previews_mainPagePreviewBar_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/feed/previews/mainPagePreviewBar.js */ \"./public/components/feed/previews/mainPagePreviewBar.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Main Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - ленту новостей, хедер, сайдбар.\r\n * @class MainPage\r\n * @module MainPage\r\n */\r\nclass MainPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    // root не трогать\r\n    super(root);\r\n    const feedPreview = new _components_feed_previews_mainPagePreviewBar_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\r\n    this.pageComponents = {\r\n      feedPreview,\r\n      feed: new _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\r\n          _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n          'mainPage',\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.mainPageTypes.SAVE_NEW_CARDS,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.mainPageTypes.CLEAR_CARDS,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.mainPageTypes.FORBID_CARDS_UPLOADING,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.mainPageTypes.ALLOW_CARDS_UPLOADING,\r\n          _flux_actions_js__WEBPACK_IMPORTED_MODULE_6__.mainPageActions.forbidCardsLoading,\r\n          _flux_actions_js__WEBPACK_IMPORTED_MODULE_6__.mainPageActions.allowCardsLoading,\r\n          feedPreview,\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('', this.pageComponents.feed));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/mainPageView.js?");

/***/ }),

/***/ "./public/pages/profilePage.js":
/*!*************************************!*\
  !*** ./public/pages/profilePage.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfilePage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _profilePageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profilePageView.js */ \"./public/pages/profilePageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//             Profile Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Обработчик scroll, который можно будет удалить\r\n * Проверяет, достигнут ли конец ленты\r\n * @param {event} event\r\n */\r\nfunction newsFeedEndReachEventAction({currentTarget}) {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage;\r\n  const trackedElement = currentTarget.querySelector('#feed__loading');\r\n  // работаем, только если отслеживаемый элемент\r\n  // находися в области видимости пользователя\r\n  if (state.isLoading || state.isEndFound ||\r\n    trackedElement.getBoundingClientRect().y > _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getUserWindowHeight()) {\r\n    return;\r\n  }\r\n  console.log('[Profile Page] scroll trigger');\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextArticles);\r\n}\r\n\r\n/**\r\n * Получить статьи текущего пользователя\r\n */\r\nasync function uploadNextArticles() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage;\r\n\r\n  if (state.isEndFound || state.isLoading) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_8__.ajaxDebug) {\r\n      console.log('can\\'t load usercards as isEndFound state flag is true');\r\n    }\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Обработчик для ответа с сервера\r\n   * @param {Object} cards\r\n   */\r\n  function onLoad(cards) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_8__.ajaxDebug) {\r\n      console.log('[ProfilePage] more user cards loaded!');\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.saveNewArticles(\r\n            cards.length ? cards[cards.length-1].id : state.idLastLoaded,\r\n            cards,\r\n        ),\r\n    );\r\n  };\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.setArticlesLoadingFlag());\r\n\r\n  await _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get({\r\n    url: `/articles/author?idLastLoaded=${state.idLastLoaded}` +\r\n    `&login=${state.user.login}`,\r\n  })\r\n      .then(({status, response}) => {\r\n        if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n          onLoad(response.data);\r\n          return;\r\n        }\r\n        (0,_components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_5__.showModalNetOrServerError)(status, response.msg);\r\n      })\r\n      .catch((err) => console.warn(err.message));\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.unsetArticlesLoadingFlag());\r\n}\r\n\r\n\r\n/**\r\n * @class ProfilePage\r\n * @module ProfilePage\r\n */\r\nclass ProfilePage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _profilePageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_4__.authorizationTypes.LOGOUT, () => {\r\n      if (this.isActive()) {\r\n        console.log('[ProfilePage] Logout reaction');\r\n        if (document.URL.indexOf('/profile') !== -1) {\r\n          _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].redirect('/');\r\n        }\r\n      }\r\n    });\r\n\r\n    // Если были на своей страницы и сделали вход,\r\n    // Перерисовываем страницу как профиль\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_4__.authorizationTypes.LOGIN, () => {\r\n      if (this.isActive()) {\r\n        console.log('[ProfilePage] Login reaction');\r\n        if (document.URL.indexOf('/profile') === -1 &&\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage.user.login ===\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization.login) {\r\n          _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].redirect('/profile');\r\n        }\r\n      }\r\n    });\r\n\r\n    // Обновить ленту, если есть изменения в статье или пользователь\r\n    // опубликовал новую\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_4__.editorTypes.PUBLISH_ARTICLE, () => {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.clearArticles());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n    const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage;\r\n    const authState = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization;\r\n\r\n    // берем login из урла и сверяемся, есть ли о юзере данные\r\n    // или нужно загружать по сети\r\n    // на странице /profile работаем только с авторизованным пользователем\r\n    if (document.URL.indexOf('/profile') !== -1) {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.setUserInfo(authState));\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.clearArticles());\r\n    } else {\r\n      const userUrlParam = document.URL.slice(document.URL.indexOf('user/')+5);\r\n      console.warn('[ProfilePage] user from Url ', document.URL, userUrlParam);\r\n      // путь '/user/' не пропустится сервером, т.к. путь не проходит валидацию\r\n      // для пути с параметром. Но доп. валидация нелишняя\r\n      if (userUrlParam === '') {\r\n        _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].redirect('/404');\r\n      }\r\n      if (userUrlParam !== state.user.login) {\r\n        if (userUrlParam === authState.login) {\r\n          _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].redirect('/profile');\r\n          return;\r\n        }\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.setUserLoading({\r\n          login: userUrlParam,\r\n        }));\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.clearArticles());\r\n        _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get({url: `/user?user=${userUrlParam}`})\r\n            .then(({status, response}) => {\r\n              if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n                _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.profilePageActions.setUserInfo(response.data));\r\n                return;\r\n              }\r\n              (0,_components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_5__.showModalNetOrServerError)(status, response.msg);\r\n              _common_utils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].redirect('/');\r\n            })\r\n            .catch((err) => console.warn(err.message));\r\n      }\r\n    }\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.changePageActions.changePage(\r\n            'profile',\r\n            `SaberProject | ${state.user.login}`,\r\n        ),\r\n    );\r\n\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().profilePage.cards.length === 0) {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextArticles);\r\n    }\r\n\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[ProfilePage] нет дивака .content');\r\n    } else {\r\n      scrollable.addEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    super.hide();\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[ProfilePage] нет дивака .content');\r\n    } else {\r\n      scrollable.removeEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Вызывается в роутере. Если return не '', нужно выполнить переход\r\n   * по пути, возвращенному из функции\r\n   *\r\n   * Возможны редиректы на: /login\r\n   * @param {string} currentPath\r\n   * @return {string}\r\n   */\r\n  redirect(currentPath) {\r\n    const authorizedUser = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().authorization;\r\n\r\n    // редирект с user/<login> на /profile обрабатыватеся\r\n    // в самой страничке\r\n\r\n    if (document.URL.indexOf('/profile') !== -1 &&\r\n        !authorizedUser.isAuthenticated) {\r\n      return '/login';\r\n    }\r\n    return '';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/profilePage.js?");

/***/ }),

/***/ "./public/pages/profilePageView.js":
/*!*****************************************!*\
  !*** ./public/pages/profilePageView.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfilePageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/feed/feed.js */ \"./public/components/feed/feed.js\");\n/* harmony import */ var _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/feed/composeCardStandart.js */ \"./public/components/feed/composeCardStandart.js\");\n/* harmony import */ var _components_profileCard_profileCard_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/profileCard/profileCard.js */ \"./public/components/profileCard/profileCard.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Страница содержит главный компонент - ленту новостей, хедер, сайдбар.\r\n * @class ProfilePageView\r\n */\r\nclass ProfilePageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.pageComponents = {\r\n      profileCard: new _components_profileCard_profileCard_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](),\r\n      feed: new _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\r\n          _components_feed_composeCardStandart_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n          'profilePage',\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.profilePageTypes.SAVE_NEW_USER_ARTICLES,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.profilePageTypes.CLEAR_USER_ARTICLES,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.profilePageTypes.FORBID_USER_ARTICLES_UPLOADING,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_5__.profilePageTypes.ALLOW_USER_ARTICLES_UPLOADING,\r\n          _flux_actions_js__WEBPACK_IMPORTED_MODULE_6__.profilePageActions.forbidArticlesLoading,\r\n          () => {\r\n            console.log('{profilePage feed} isEndFound is not been reset');\r\n            return {type: '__EMPTY__'};\r\n          },\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Страница содержит главный компонент - карточку пользователя и его статьи\r\n   */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\r\n        '',\r\n        this.pageComponents.profileCard,\r\n        this.pageComponents.feed,\r\n    ));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/profilePageView.js?");

/***/ }),

/***/ "./public/pages/profileSettingsPage.js":
/*!*********************************************!*\
  !*** ./public/pages/profileSettingsPage.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfileSettingsPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _profileSettingsPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profileSettingsPageView.js */ \"./public/pages/profileSettingsPageView.js\");\n/* harmony import */ var _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/modal/modalTemplates.js */ \"./public/components/modal/modalTemplates.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _common_regexp_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/regexp.js */ \"./public/common/regexp.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//         Profile Settings Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * @class ProfileSettingsPage\r\n */\r\nclass ProfileSettingsPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _profileSettingsPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.authorizationTypes.LOGOUT, () => {\r\n      if (this.isActive()) {\r\n        console.log('[ProfileSettingsPage] Logout reaction');\r\n        (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.redirect)('/');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n\r\n    const form = this.view.root.querySelector('form');\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n      // TODO: смена пароля\r\n      // const password = form.querySelector('input[name=\"password\"]');\r\n      const firstName =\r\n          form.querySelector('input[name=\"username\"]')?.value.trim();\r\n      const lastName =\r\n          form.querySelector('input[name=\"surname\"]')?.value.trim();\r\n      const description =\r\n          form.querySelector('textarea[name=\"description\"]')?.value.trim();\r\n      const img = form.querySelector('input[type=\"file\"]')?.files[0];\r\n\r\n      if (firstName !== '' && !_common_regexp_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].firstName.test(firstName)) {\r\n        this.view.pageComponents.settingsForm.appendWarning(\r\n            'Такое имя выбрать нельзя',\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (lastName !== '' && !_common_regexp_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].lastName.test(lastName)) {\r\n        this.view.pageComponents.settingsForm.appendWarning(\r\n            'Такую фамилию выбрать нельзя',\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (img && !img.type.startsWith('image/')) {\r\n        _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Ошибка', 'Выберите изображение');\r\n        return;\r\n      }\r\n\r\n      // если пароли не совпадают TODO:\r\n      // if (showRegister && passwordRepeated !== password) {\r\n      //   formWarning.style.display = 'block';\r\n      //   formWarningLabel.style.display = 'block';\r\n      //   formWarning.textContent = 'Удостоверьтесь, что пароли совпадают';\r\n      //   return;\r\n      // }\r\n\r\n      let responseStatus = 0;\r\n      let avatarHash = '';\r\n      new Promise((resolve, reject) => {\r\n        if (img) {\r\n          resolve(img);\r\n        } else {\r\n          reject(new Error('Картинка не прекреплена'));\r\n        }\r\n      })\r\n          .then(() => _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].postFile({url: '/img/upload', body: img}))\r\n          .then(({status, response}) => new Promise((resolve, reject) => {\r\n            if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n              resolve(response.data.imgId);\r\n            } else {\r\n              responseStatus = status;\r\n              reject(new Error(response.msg));\r\n            }\r\n          }))\r\n          // Падает, если не прикреплена картинка - надо восстановить цепочку,\r\n          // а если Ajax, то перейти в конец\r\n          .catch((err) => new Promise((resolve, reject) => {\r\n            if (responseStatus === 0) {\r\n              resolve('');\r\n            } else {\r\n              reject(err);\r\n            }\r\n          }))\r\n          .then((avatarUrl) => {\r\n            // прокидываем картинку в юзердату\r\n            avatarHash = avatarUrl;\r\n            return _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post({\r\n              url: '/user/profile/update',\r\n              body: {\r\n                // password,\r\n                firstName,\r\n                lastName,\r\n                avatarUrl,\r\n                description,\r\n              },\r\n            });\r\n          })\r\n          .then(({status, response}) => new Promise((resolve, reject) => {\r\n            if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.ok) {\r\n              resolve(response.data);\r\n            } else {\r\n              responseStatus = status;\r\n              reject(new Error(response.msg));\r\n            }\r\n          }))\r\n          .then((userData) => {\r\n            if (avatarHash !== '') {\r\n              userData.avatarUrl = _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].APIurl + '/img/' + avatarHash;\r\n            }\r\n            _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.authorizationActions.login(userData));\r\n            _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].informativeMsg('Успех!', 'Профиль обновлен');\r\n            (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.redirect)('/profile');\r\n            return;\r\n          })\r\n          .catch(({message}) => {\r\n            if (responseStatus === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].STATUS.invalidSession) {\r\n              _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch(_flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.authorizationActions.logout());\r\n              _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].informativeMsg(\r\n                  'Сессия устарела', 'Пройдите авторизацию',\r\n              );\r\n              (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_7__.redirect)('/login');\r\n              return;\r\n            }\r\n            if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n              console.warn(message);\r\n            }\r\n            // В случае ошибки сервера\r\n            if ((responseStatus + '')[0] === '5') {\r\n              _components_modal_modalTemplates_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].netOrServerError(responseStatus, message);\r\n              return;\r\n            }\r\n            // в случае провала валидации формы\r\n            this.view.pageComponents.settingsForm.appendWarning(msg);\r\n          });\r\n    });\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_4__.changePageActions.changePage(\r\n            'profileSettings',\r\n            `Settings | ${_flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState().authorization.login}`,\r\n        ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Вызывается в роутере. Если return не '', нужно выполнить переход\r\n   * по пути, возвращенному из функции\r\n   *\r\n   * Возможны редиректы на: /login\r\n   * @param {string} currentPath\r\n   * @return {string}\r\n   */\r\n  redirect(currentPath) {\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getState().authorization.login !== '') {\r\n      return '';\r\n    }\r\n    return '/login';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/profileSettingsPage.js?");

/***/ }),

/***/ "./public/pages/profileSettingsPageView.js":
/*!*************************************************!*\
  !*** ./public/pages/profileSettingsPageView.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfileSettingsPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_settings_settingsForm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/settings/settingsForm.js */ \"./public/components/settings/settingsForm.js\");\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//       Profile Setting Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - форму изменения профиля.\r\n * @class ProfileSettingsPageView\r\n */\r\nclass ProfileSettingsPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.pageComponents = {\r\n      settingsForm: new _components_settings_settingsForm_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\r\n    };\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\r\n        'Настройки пользователя',\r\n        this.pageComponents.settingsForm,\r\n    ));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/profileSettingsPageView.js?");

/***/ }),

/***/ "./public/pages/searchPage.js":
/*!************************************!*\
  !*** ./public/pages/searchPage.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SearchPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _searchPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./searchPageView.js */ \"./public/pages/searchPageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/actions/searchActions.js */ \"./public/flux/actions/searchActions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/modal/modal.js */ \"./public/components/modal/modal.js\");\n/* harmony import */ var _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../modules/ajax.js */ \"./public/modules/ajax.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../globals.js */ \"./public/globals.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Search Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Обработчик scroll, который можно будет удалить\r\n * Проверяет, достигнут ли конец ленты\r\n * @param {event} event\r\n */\r\nfunction newsFeedEndReachEventAction({currentTarget}) {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().search;\r\n  const trackedCard = currentTarget.querySelector('#feed__loading');\r\n  // работаем, только если отслеживаемый элемент\r\n  // находися в области видимости пользователя.\r\n  // При этом не находимся в состоянии ожидания запроса\r\n  // и трекинг-элемент не скрыт (при display: none - y = 0)\r\n  if (state.isLoading || state.isEndFound ||\r\n    trackedCard.getBoundingClientRect().y > (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_8__.getUserWindowHeight)()) {\r\n    return;\r\n  }\r\n  console.log('[Search Page] scroll trigger');\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextCards);\r\n}\r\n\r\n/**\r\n * Получить feedChunkSize записей (настройка на стороне сервера)\r\n */\r\nasync function uploadNextCards() {\r\n  const state = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().search;\r\n\r\n  if (state.isEndFound || state.isLoading) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n      console.log('[Search Page] can\\'t load news as' +\r\n        'isEndFound state flag is true');\r\n    }\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Обработчик для ответа с сервера\r\n   * @param {Object} cards\r\n   */\r\n  function onLoad(cards) {\r\n    if (_globals_js__WEBPACK_IMPORTED_MODULE_9__.ajaxDebug) {\r\n      console.log('[Search Page] more news loaded!');\r\n    }\r\n\r\n    // модифицируем в случае с юзером для интеграции в ленту\r\n    cards.forEach((card) => {\r\n      if ('login' in card) {\r\n        card.id = card.login;\r\n      }\r\n    });\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].saveNewCards(\r\n            // TODO:\r\n            // cards.length ? cards[cards.length - 1].id : state.idLastLoaded,\r\n            '',\r\n            cards,\r\n        ),\r\n    );\r\n  };\r\n\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setLoadingFlag());\r\n\r\n  await _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get({\r\n    url: `/search/${state.group}?q=${state.value || ''}` +\r\n      `&idLastLoaded=${state.idLastLoaded || ''}`,\r\n  })\r\n      .then(({status, response}) => {\r\n        if (status === _modules_ajax_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].STATUS.ok) {\r\n          onLoad(response.data);\r\n          return;\r\n        }\r\n\r\n        if (status / 500 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setTitle(`Сервис временно не доступен: ${status}`);\r\n        }\r\n        if (status / 400 === 1) {\r\n          _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setTitle(/* пользовательская */`Ошибка ${status}`);\r\n        }\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setContent(response.msg);\r\n        _components_modal_modal_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].open(false);\r\n      })\r\n      .catch((err) => console.warn(err.message));\r\n  _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].unsetLoadingFlag());\r\n}\r\n\r\n/**\r\n * @class SearchPage\r\n * @module SearchPage\r\n */\r\nclass SearchPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _searchPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n\r\n    // /////////////////////////////////\r\n    //\r\n    //        Communication\r\n    //\r\n    // /////////////////////////////////\r\n\r\n    // обновить ленту если параметры поиска изменились\r\n    const updateFeed = (category) => {\r\n      if (category !== '') {\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].clearCards());\r\n        _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(_flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].allowCardsLoading());\r\n        uploadNextCards();\r\n      }\r\n      // TODO: параметры поиска в url\r\n      // history.pushState(\r\n      //     null,\r\n      //     '',\r\n      //     '/search' + (category !== '' ? '/' + category : ''),\r\n      // );\r\n      // меняем и тайтл\r\n      // store.dispatch(\r\n      //     changePageActions.changePage(\r\n      //         'categories',\r\n      //         `SaberProject |\r\n      //         ${category !== '' ?\r\n      //         (category.charAt(0).toUpperCase() + category.slice(1)) :\r\n      //         'Categories'}`,\r\n      //     ),\r\n      // );\r\n    };\r\n\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.searchTypes.SET_SEARCH_VALUE, updateFeed);\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(_flux_types_js__WEBPACK_IMPORTED_MODULE_5__.searchTypes.SET_SEARCH_GROUP, updateFeed);\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.changePageActions.changePage(\r\n            'search',\r\n            `SaberProject | Search`,\r\n        ),\r\n    );\r\n\r\n    if (_flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getState().search.cards.length === 0) {\r\n      _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(uploadNextCards);\r\n    }\r\n\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[Search Page] нет дивака .content');\r\n    } else {\r\n      scrollable.addEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    super.hide();\r\n    const scrollable = this.view.root.querySelector('.content');\r\n    if (!scrollable) {\r\n      console.warn('[SearchPage] нет дивака .content');\r\n    } else {\r\n      scrollable.removeEventListener(\r\n          'scroll',\r\n          newsFeedEndReachEventAction,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * true - эдемент активен, его нежелательно перетирать\r\n   * @return {boolean}\r\n   */\r\n  isActive() {\r\n    // TODO: получить параметры из поиска\r\n    // let group = '';\r\n    // let value = '';\r\n    // const idx = document.URL.indexOf('search/');\r\n    // if (idx !== -1) {\r\n    //   try {\r\n    //     category = decodeURI(document.URL.slice(idx + ));\r\n    //   } catch (e) {\r\n    //     console.error(e);\r\n    //   }\r\n    //   console.log('[CategoryPage] (isActive) category from Url:',\r\n    //       category);\r\n    //   store.dispatch(categoryPageActions.selectCategory(category));\r\n    // } else if (document.URL.indexOf('categories') !== -1) {\r\n    //   // Если была выбрана категория, но юзер перешел по урлу на categories\r\n    //   store.dispatch(categoryPageActions.clearSelectedCategory());\r\n    // }\r\n\r\n    // // Чтобы спрятать анимацию загрузки, пока Category не выбранa\r\n    // if (store.getState().categoryPage.currentCategory === '') {\r\n    //   store.dispatch(categoryPageActions.forbidCategoryArticlesLoading());\r\n    // }\r\n\r\n    return super.isActive();\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/searchPage.js?");

/***/ }),

/***/ "./public/pages/searchPageView.js":
/*!****************************************!*\
  !*** ./public/pages/searchPageView.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SearchPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _createPage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createPage.js */ \"./public/pages/_createPage.js\");\n/* harmony import */ var _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/feed/feed.js */ \"./public/components/feed/feed.js\");\n/* harmony import */ var _components_feed_composeUsers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/feed/composeUsers.js */ \"./public/components/feed/composeUsers.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/actions/searchActions.js */ \"./public/flux/actions/searchActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//              Search Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - ленту новостей, хедер, сайдбар.\r\n * @class SearchPage\r\n * @module SearchPage\r\n */\r\nclass SearchPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    // root не трогать\r\n    super(root);\r\n    this.pageComponents = {\r\n      feed: new _components_feed_feed_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\r\n          _components_feed_composeUsers_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n          'search',\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_4__.searchTypes.SAVE_NEW_CARDS,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_4__.searchTypes.CLEAR_CARDS,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_4__.searchTypes.FORBID_CARDS_UPLOADING,\r\n          _flux_types_js__WEBPACK_IMPORTED_MODULE_4__.searchTypes.ALLOW_CARDS_UPLOADING,\r\n          _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].forbidCardsLoading,\r\n          _flux_actions_searchActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].allowCardsLoading,\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    */\r\n  render() {\r\n    super.render();\r\n    this.root.appendChild((0,_createPage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('', this.pageComponents.feed));\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/searchPageView.js?");

/***/ }),

/***/ "./public/pages/signupPage.js":
/*!************************************!*\
  !*** ./public/pages/signupPage.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignupPage)\n/* harmony export */ });\n/* harmony import */ var _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageMV.js */ \"./public/pages/basePageMV.js\");\n/* harmony import */ var _signupPageView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signupPageView.js */ \"./public/pages/signupPageView.js\");\n/* harmony import */ var _flux_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/store.js */ \"./public/flux/store.js\");\n/* harmony import */ var _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/actions.js */ \"./public/flux/actions.js\");\n/* harmony import */ var _flux_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../flux/types.js */ \"./public/flux/types.js\");\n/* harmony import */ var _common_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/utils.js */ \"./public/common/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//         Signup Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * @class SignupPage\r\n */\r\nclass SignupPage extends _basePageMV_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.view = new _signupPageView_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](root);\r\n    this.showRegister = false;  // отображение формы логины\r\n    this.unsubscribeLogin = () => {};\r\n  }\r\n\r\n  /**\r\n   * Отобразить подконтрольную страницу.\r\n   */\r\n  show() {\r\n    super.show();\r\n    this.showRegister = false;\r\n    this.unsubscribeLogin = _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].subscribe(\r\n        _flux_types_js__WEBPACK_IMPORTED_MODULE_4__.authorizationTypes.LOGIN,\r\n        () => {\r\n          (0,_common_utils_js__WEBPACK_IMPORTED_MODULE_5__.redirect)('/');\r\n        },\r\n    );\r\n\r\n    this.view.changeFormTypeBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      this.showRegister = !this.showRegister;\r\n      this.view.switchFormType(this.showRegister);\r\n    });\r\n    _flux_store_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dispatch(\r\n        _flux_actions_js__WEBPACK_IMPORTED_MODULE_3__.changePageActions.changePage(\r\n            'signup',\r\n            `SaberProjects | ${this.showRegister? 'Signup' : 'Login'}`,\r\n        ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Скрыть подконтрольную страницу\r\n   */\r\n  hide() {\r\n    super.hide();\r\n    this.unsubscribeLogin();\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/signupPage.js?");

/***/ }),

/***/ "./public/pages/signupPageView.js":
/*!****************************************!*\
  !*** ./public/pages/signupPageView.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignupPageView)\n/* harmony export */ });\n/* harmony import */ var _basePageView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basePageView.js */ \"./public/pages/basePageView.js\");\n/* harmony import */ var _components_signupForm_signupForm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/signupForm/signupForm.js */ \"./public/components/signupForm/signupForm.js\");\n\r\n\r\n\r\n\r\n// ///////////////////////////////// //\r\n//\r\n//       Signup Page\r\n//\r\n// ///////////////////////////////// //\r\n\r\n/**\r\n * Страница содержит главный компонент - форму изменения профиля.\r\n * @class SignupPageView\r\n */\r\nclass SignupPageView extends _basePageView_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n  /**\r\n   * @param {HTMLElement} root\r\n   */\r\n  constructor(root) {\r\n    super(root);\r\n    this.formDiv = null;\r\n    this.changeFormTypeBtn = null;\r\n  }\r\n\r\n  /**\r\n    * Перерисовать главную страницу\r\n    */\r\n  render() {\r\n    super.render();\r\n    const bkgDiv = document.createElement('div');\r\n    bkgDiv.className = 'background-space';\r\n    const pageDiv = document.createElement('div');\r\n    pageDiv.className = 'page-space';\r\n    const contentDiv = document.createElement('div');\r\n    contentDiv.className = 'content-space';\r\n    const formDiv = document.createElement('div');\r\n    const logoDiv = document.createElement('a');\r\n    logoDiv.innerHTML = 'SaberNews';\r\n    logoDiv.className = 'header__title';\r\n    logoDiv.href = '/';\r\n    logoDiv.style.cssText = 'position: absolute;';\r\n\r\n    // //////////////////////////////////\r\n\r\n    // Элементы навигации\r\n    const changeFormTypeBtn = document.createElement('a');\r\n    changeFormTypeBtn.textContent = 'Создать аккаунт';\r\n    changeFormTypeBtn.dataset.router = 'ignore';\r\n\r\n    // форма\r\n    formDiv.appendChild(new _components_signupForm_signupForm_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](false).render());\r\n\r\n    // //////////////////////////////////\r\n\r\n    this.formDiv = formDiv;\r\n    this.changeFormTypeBtn = changeFormTypeBtn;\r\n\r\n    // //////////////////////////////////\r\n\r\n    contentDiv.appendChild(formDiv);\r\n    contentDiv.appendChild(changeFormTypeBtn);\r\n    pageDiv.appendChild(logoDiv);\r\n    pageDiv.appendChild(contentDiv);\r\n    bkgDiv.appendChild(pageDiv);\r\n    this.root.appendChild(bkgDiv);\r\n  }\r\n\r\n  /**\r\n   * Сменить форму логин / регистрация\r\n   * @param {bolean} showRegister true, чтобы отобразить форму регистрации\r\n   * flase - логина\r\n   */\r\n  switchFormType(showRegister) {\r\n    if (!this.formDiv || !this.changeFormTypeBtn) {\r\n      console.warn('[SignupPage] was not rendered yet');\r\n      return;\r\n    }\r\n    this.formDiv.innerHTML = '';\r\n    this.formDiv.appendChild(new _components_signupForm_signupForm_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](showRegister).render());\r\n    this.changeFormTypeBtn.textContent =\r\n      showRegister ? 'У меня уже есть аккаунт' : 'Создать аккаунт';\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://saber_project/./public/pages/signupPageView.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./public/main.js");
/******/ 	
/******/ })()
;